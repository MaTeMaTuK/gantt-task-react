{"version":3,"file":"index.modern.js","sources":["../src/types/public-types.ts","../src/helpers/date-helper.ts","../src/helpers/dicts.ts","../src/components/other/tooltip.tsx","../src/components/icons/unconnection.js","../src/components/icons/connection.js","../src/components/other/deleteTooltip.tsx","../src/components/other/vertical-scroll.tsx","../src/contsxt.ts","../src/components/grid/grid-body.tsx","../src/components/grid/grid.tsx","../src/components/calendar/top-part-of-calendar.tsx","../src/components/calendar/calendar.tsx","../src/components/other/arrow.tsx","../src/helpers/other-helper.ts","../src/helpers/bar-helper.ts","../src/components/task-item/bar/bar-display.tsx","../src/components/task-item/bar/bar-date-handle.tsx","../src/components/task-item/bar/bar-progress-handle.tsx","../src/helpers/jsPlumbConfig.ts","../src/components/task-item/hook.ts","../src/components/task-item/bar/bar.tsx","../src/components/task-item/bar/bar-small.tsx","../src/components/task-item/bar/parent-bar-display.tsx","../src/components/task-item/bar/bar-parent.tsx","../src/components/task-item/milestone/utils.ts","../src/components/task-item/milestone/milestone.tsx","../src/components/task-item/project/project.tsx","../src/components/task-item/task-item.tsx","../src/components/task-item/task-item-log.tsx","../src/components/gantt/task-gantt-content.tsx","../src/components/gantt/task-gantt.tsx","../src/components/other/horizontal-scroll.tsx","../src/components/gantt-config/time-modal.tsx","../src/components/icons/warning.js","../src/components/gantt-config/time.tsx","../src/components/gantt-config/other-config.tsx","../src/components/gantt-config/baseline/add-edit.tsx","../src/components/icons/checked.js","../src/components/gantt-config/baseline/index.tsx","../src/components/gantt-config/display.tsx","../src/components/icons/collapseIcon.js","../src/components/gantt-config/index.tsx","../src/components/gantt/guide-modal.tsx","../src/components/icons/arrow.js","../src/helpers/utils.ts","../src/components/gantt/data-mode.tsx","../src/components/gantt/gantt.tsx"],"sourcesContent":["import React from \"react\";\r\n\r\nexport enum ViewMode {\r\n  QuarterDay = \"Quarter Day\",\r\n  HalfDay = \"Half Day\",\r\n  Day = \"Day\",\r\n  /** ISO-8601 week */\r\n  Week = \"Week\",\r\n  Month = \"Month\",\r\n  Year = \"Year\",\r\n  Quarter = \"Quarter\",\r\n}\r\nexport const viewModeOptions = [\r\n  {\r\n    label: \"日\",\r\n    value: \"Day\",\r\n  },\r\n  {\r\n    label: \"周\",\r\n    value: \"Week\",\r\n  },\r\n  {\r\n    label: \"月\",\r\n    value: \"Month\",\r\n  },\r\n  {\r\n    label: \"季\",\r\n    value: \"Quarter\",\r\n  },\r\n\r\n  {\r\n    label: \"年\",\r\n    value: \"Year\",\r\n  },\r\n];\r\nexport type TaskType = \"task\" | \"milestone\" | \"project\" | \"parent\";\r\n\r\nexport interface OptionsProp {\r\n  label: string;\r\n  value: string;\r\n  objectId?: string;\r\n}\r\nexport interface Task {\r\n  id: string;\r\n  type: TaskType;\r\n  name: string;\r\n  start: Date;\r\n  end: Date;\r\n  progress: number;\r\n  styles?: {\r\n    backgroundColor?: string;\r\n    backgroundSelectedColor?: string;\r\n    progressColor?: string;\r\n    progressSelectedColor?: string;\r\n  };\r\n  isDisabled?: boolean;\r\n  project?: string;\r\n  dependencies?: string[];\r\n  item?: {\r\n    [propName: string]: any;\r\n  };\r\n}\r\nexport interface ItemLink {\r\n  objectId: string;\r\n  destination: object;\r\n  linkType: object;\r\n  source: object;\r\n  [propName: string]: any;\r\n}\r\n\r\nexport interface EventOption {\r\n  /**\r\n   * Time step value for date changes.\r\n   */\r\n  timeStep?: number;\r\n  /**\r\n   * Invokes on bar select on unselect.\r\n   */\r\n  onSelect?: (task: Task, isSelected: boolean) => void;\r\n  /**\r\n   * Invokes on bar double click.\r\n   */\r\n  onDoubleClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\r\n   */\r\n  onDateChange?: (\r\n    task: Task\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on progress change. Chart undoes operation if method return false or error.\r\n   */\r\n  onProgressChange?: (\r\n    task: Task\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\r\n   */\r\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\r\n}\r\n\r\nexport interface DisplayOption {\r\n  viewMode?: ViewMode;\r\n  /**\r\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\r\n   */\r\n  locale?: string;\r\n}\r\nexport interface ConfigOption {\r\n  isBaseLine?: boolean; // 是否显示基线\r\n  isDisplayConfig?: boolean; // 是否有显示配置\r\n  isSetting?: boolean; // 是否显示配置按钮\r\n  isViewModeChange?: boolean; // 是否视图切换\r\n  isToToday?: boolean; // 是否定位到当天\r\n}\r\nexport interface StylingOption {\r\n  headerHeight?: number;\r\n  columnWidth?: number;\r\n  listCellWidth?: string;\r\n  rowHeight?: number;\r\n  ganttHeight?: number;\r\n  barCornerRadius?: number;\r\n  handleWidth?: number;\r\n  fontFamily?: string;\r\n  fontSize?: string;\r\n  listWidth?: number;\r\n  listBottomHeight?: number;\r\n  /**\r\n   * How many of row width can be taken by task.\r\n   * From 0 to 100\r\n   */\r\n  barFill?: number;\r\n  barProgressColor?: string;\r\n  barProgressSelectedColor?: string;\r\n  barBackgroundColor?: string;\r\n  barBackgroundSelectedColor?: string;\r\n  projectProgressColor?: string;\r\n  projectProgressSelectedColor?: string;\r\n  projectBackgroundColor?: string;\r\n  projectBackgroundSelectedColor?: string;\r\n  milestoneBackgroundColor?: string;\r\n  milestoneBackgroundSelectedColor?: string;\r\n  arrowColor?: string;\r\n  arrowIndent?: number;\r\n  todayColor?: string;\r\n  TooltipContent?: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n  TaskListHeader?: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable?: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    /**\r\n     * Sets selected task by id\r\n     */\r\n    setSelectedTask: (taskId: string) => void;\r\n  }>;\r\n}\r\n\r\nexport interface ConnectionProps {\r\n  delConnection?: (value: string) => void;\r\n  addConnection?: (params: {\r\n    source: string;\r\n    destination: string;\r\n    linkType: string;\r\n  }) => void;\r\n  itemLinks?: ItemLink[];\r\n  setCurrentConnection?: (connection: any) => void;\r\n  currentConnection?: any;\r\n}\r\nexport interface TimeItemProps {\r\n  itemType?: string;\r\n  startDate?: string;\r\n  endDate?: string;\r\n  baseLineStartDate?: string;\r\n  baseLineEndDate?: string;\r\n  percentage?: string;\r\n  isDefault?: boolean;\r\n}\r\nexport interface FieldsTypeProps extends OptionsProp {\r\n  [propName: string]: any;\r\n}\r\nexport interface FieldAndItemProps extends OptionsProp {\r\n  fieldType?: FieldsTypeProps;\r\n  icon?: string;\r\n}\r\n\r\nexport interface MilestoneProps {\r\n  itemType: string;\r\n  startDate: string;\r\n}\r\nexport interface OtherConfigProps {\r\n  overdue?: boolean;\r\n  autoPatch?: boolean;\r\n  pivotalPath?: boolean;\r\n  [propName: string]: any;\r\n}\r\nexport interface GanttConfigProps {\r\n  time?: TimeItemProps[];\r\n  milestone?: MilestoneProps;\r\n  currentPanel?: string;\r\n  otherConfig?: OtherConfigProps;\r\n  [propName: string]: any;\r\n}\r\nexport interface BaselineProps {\r\n  name?: string;\r\n  description?: string;\r\n  [propName: string]: any;\r\n}\r\nexport interface GanttProps\r\n  extends EventOption,\r\n    DisplayOption,\r\n    StylingOption,\r\n    ConfigOption,\r\n    ConnectionProps {\r\n  tasks: Task[];\r\n  baseLineLog?: Task[];\r\n  itemTypeData?: OptionsProp[];\r\n  customeFieldData?: OptionsProp[];\r\n  ganttConfig?: GanttConfigProps;\r\n  baselineList?: BaselineProps[];\r\n  configHandle?: (value: GanttConfigProps) => void;\r\n  baseLineHandle?: (\r\n    value?: BaselineProps,\r\n    type?: \"add\" | \"edit\" | \"delete\"\r\n  ) => void;\r\n  setItemTypeValue?: (value: string) => void;\r\n  setCurrentLog?: (value: BaselineProps) => void;\r\n  renderTaskListComponent?: () => JSX.Element;\r\n  renderUserAvatar?: (assignee: Assignee[]) => JSX.Element;\r\n  renderOverflowTooltip?: (value: string) => JSX.Element;\r\n  isUpdate?: boolean;\r\n  currentLog?: BaselineProps;\r\n  actionRef?: React.MutableRefObject<any>;\r\n  workspaceId?: string;\r\n  getCustomFields?: (val: TimeItemProps) => Promise<any>;\r\n  isConnect?: boolean; // 是否允许连线\r\n  onMouseEvent?: (type?: string, task?: Task) => void;\r\n  onClickEvent?: (type?: string, task?: Task) => void;\r\n  configVisibleChange?: (val: boolean) => void;\r\n  tableQuerySelector?: string;\r\n}\r\n\r\nexport interface TabConfigProps {\r\n  currentTab: string;\r\n}\r\n// 特殊时间精度\r\nexport const DateDeltaInit = {\r\n  [ViewMode.Month]: {\r\n    1: 31 * 24 * 3600 * 1000,\r\n    2: 28 * 24 * 3600 * 1000,\r\n    3: 31 * 24 * 3600 * 1000,\r\n    4: 30 * 24 * 3600 * 1000,\r\n    5: 31 * 24 * 3600 * 1000,\r\n    6: 30 * 24 * 3600 * 1000,\r\n    7: 31 * 24 * 3600 * 1000,\r\n    8: 31 * 24 * 3600 * 1000,\r\n    9: 30 * 24 * 3600 * 1000,\r\n    10: 31 * 24 * 3600 * 1000,\r\n    11: 30 * 24 * 3600 * 1000,\r\n    12: 31 * 24 * 3600 * 1000,\r\n  },\r\n  [ViewMode.Year]: {\r\n    common: 365 * 24 * 3600 * 1000,\r\n    leap: 366 * 24 * 3600 * 1000,\r\n  },\r\n  [ViewMode.Quarter]: {\r\n    1: (31 + 28 + 31) * 24 * 3600 * 1000,\r\n    2: (30 + 31 + 30) * 24 * 3600 * 1000,\r\n    3: (31 + 31 + 30) * 24 * 3600 * 1000,\r\n    4: (30 + 30 + 31) * 24 * 3600 * 1000,\r\n  },\r\n  LeapMounth: 29 * 24 * 3600 * 1000,\r\n  LeapQuarter: (31 + 29 + 31) * 24 * 3600 * 1000,\r\n};\r\nexport interface Assignee {\r\n  enabled?: boolean;\r\n  label: string;\r\n  nickname: string;\r\n  username: string;\r\n  value: string;\r\n}\r\n","import { ViewMode } from \"../types/public-types\";\r\nimport DateTimeFormatOptions = Intl.DateTimeFormatOptions;\r\nimport DateTimeFormat = Intl.DateTimeFormat;\r\n\r\ntype DateHelperScales =\r\n  | \"year\"\r\n  | \"month\"\r\n  | \"day\"\r\n  | \"hour\"\r\n  | \"minute\"\r\n  | \"second\"\r\n  | \"millisecond\";\r\n\r\nconst intlDTCache = {};\r\nconst getCachedDateTimeFormat = (locString: string | string[], opts: DateTimeFormatOptions = {}): DateTimeFormat => {\r\n  const key = JSON.stringify([locString, opts]);\r\n  let dtf = intlDTCache[key];\r\n  if (!dtf) {\r\n    dtf = new Intl.DateTimeFormat(locString, opts);\r\n    intlDTCache[key] = dtf;\r\n  }\r\n  return dtf;\r\n};\r\n\r\nexport const addToDate = (\r\n  date: Date,\r\n  quantity: number,\r\n  scale: DateHelperScales\r\n) => {\r\n  const newDate = new Date(\r\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\r\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\r\n    date.getDate() + (scale === \"day\" ? quantity : 0),\r\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\r\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\r\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\r\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\r\n  const scores = [\r\n    \"millisecond\",\r\n    \"second\",\r\n    \"minute\",\r\n    \"hour\",\r\n    \"day\",\r\n    \"month\",\r\n    \"year\",\r\n  ];\r\n\r\n  const shouldReset = (_scale: DateHelperScales) => {\r\n    const maxScore = scores.indexOf(scale);\r\n    return scores.indexOf(_scale) <= maxScore;\r\n  };\r\n  const newDate = new Date(\r\n    date.getFullYear(),\r\n    shouldReset(\"year\") ? 0 : date.getMonth(),\r\n    shouldReset(\"month\") ? 1 : date.getDate(),\r\n    shouldReset(\"day\") ? 0 : date.getHours(),\r\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\r\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\r\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\r\n  );\r\n  return newDate;\r\n};\r\nexport const ganttDateRange = (viewMode: ViewMode) => {\r\n  let newStartDate: Date = new Date(Date.now());\r\n  let newEndDate: Date = new Date(Date.now());\r\n  const year = 10; // 10年\r\n  const oneYear = 1; // 1年\r\n  // 只有week 、 day 是一年 其他的是10年\r\n  switch (viewMode) {\r\n    case ViewMode.Month:\r\n      newStartDate = addToDate(newStartDate, -year * 12 - 1, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newEndDate, year + 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Week: // 周要是7的倍速，否则会显示不准确\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(\r\n        getMonday(newStartDate),\r\n        -7 * 52 * oneYear,\r\n        \"day\"\r\n      );\r\n      newEndDate = addToDate(newEndDate, oneYear + 1, \"year\");\r\n      break;\r\n    case ViewMode.Day:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -oneYear, \"year\");\r\n      newEndDate = addToDate(newStartDate, oneYear + 1, \"year\");\r\n      break;\r\n    case ViewMode.Quarter:\r\n    case ViewMode.Year:\r\n      newStartDate = addToDate(newStartDate, -year, \"year\");\r\n      newEndDate = addToDate(newEndDate, year + 1, \"year\");\r\n      newStartDate = startOfDate(newStartDate, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    default:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"day\");\r\n      newEndDate = addToDate(newEndDate, 5, \"day\");\r\n      break;\r\n  }\r\n  return [newStartDate, newEndDate];\r\n};\r\nexport const seedDates = (\r\n  startDate: Date,\r\n  endDate: Date,\r\n  viewMode: ViewMode\r\n) => {\r\n  let currentDate: Date = new Date(startDate);\r\n  const dates: Date[] = [currentDate];\r\n  while (currentDate < endDate) {\r\n    switch (viewMode) {\r\n      case ViewMode.Year:\r\n        currentDate = addToDate(currentDate, 1, \"year\");\r\n        break;\r\n      case ViewMode.Quarter:\r\n        currentDate = addToDate(currentDate, 3, \"month\");\r\n        break;\r\n      case ViewMode.Month:\r\n        currentDate = addToDate(currentDate, 1, \"month\");\r\n        break;\r\n      case ViewMode.Week:\r\n        currentDate = addToDate(currentDate, 7, \"day\");\r\n        break;\r\n      case ViewMode.Day:\r\n        currentDate = addToDate(currentDate, 1, \"day\");\r\n        break;\r\n      case ViewMode.HalfDay:\r\n        currentDate = addToDate(currentDate, 12, \"hour\");\r\n        break;\r\n      case ViewMode.QuarterDay:\r\n        currentDate = addToDate(currentDate, 6, \"hour\");\r\n        break;\r\n    }\r\n    dates.push(currentDate);\r\n  }\r\n  return dates;\r\n};\r\n\r\nexport const getLocaleMonth = (date: Date, locale: string) => {\r\n  let bottomValue = getCachedDateTimeFormat(locale, {\r\n    month: \"long\",\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\nconst getMonday = (date: Date) => {\r\n  const day = date.getDay();\r\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n  return new Date(date.setDate(diff));\r\n};\r\nexport const getWeekNumberISO8601 = (date: Date) => {\r\n  const tmpDate = new Date(date.valueOf());\r\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\r\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\r\n  const firstThursday = tmpDate.valueOf();\r\n  tmpDate.setMonth(0, 1);\r\n  if (tmpDate.getDay() !== 4) {\r\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\r\n  }\r\n  const weekNumber = (\r\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\r\n  ).toString();\r\n\r\n  if (weekNumber.length === 1) {\r\n    return `0${weekNumber}`;\r\n  } else {\r\n    return weekNumber;\r\n  }\r\n};\r\n","export const barBackgroundColorPivotalPath = \"#8777D9\";\r\n\r\nexport const barBackgroundColorTimeError = \"#FF8F73\";\r\n\r\nexport const errorLinkBorderColor = \"#FF8F73\";\r\n\r\nexport const pivotalPathLinkBorderColor = \"#6554C0\";\r\n\r\n// 滚动条的高度\r\nexport const scrollBarHeight = 4;\r\n\r\nexport const dayFormat = \"YYYY-MM-DD\";\r\nexport const dayTimeFormat = \" YYYY-MM-DD HH:mm:ss\";\r\n\r\nexport const drawerWidth = 600;\r\n\r\n// 一天秒数\r\nexport const daySeconds = 24 * 60 * 60 * 1000;\r\n","import React, { useRef, useEffect, useState, memo, useMemo } from \"react\";\r\nimport { Task, Assignee } from \"../../types/public-types\";\r\nimport { dayFormat } from \"../../helpers/dicts\";\r\nimport dayjs from \"dayjs\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\n\r\nimport styles from \"./tooltip.module.css\";\r\n\r\nexport type TooltipProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  svgContainerHeight: number;\r\n  svgContainerWidth: number;\r\n  headerHeight: number;\r\n  taskListWidth: number;\r\n  scrollX: number;\r\n  scrollY: number;\r\n  rowHeight: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  TooltipContent: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n    userAvatar?: JSX.Element;\r\n  }>;\r\n  renderUserAvatar?: (assignee: Assignee[]) => JSX.Element;\r\n};\r\nexport const Tooltip: React.FC<TooltipProps> = memo(\r\n  ({\r\n    task,\r\n    rowHeight,\r\n    svgContainerHeight,\r\n    svgContainerWidth,\r\n    scrollX,\r\n    scrollY,\r\n    arrowIndent,\r\n    fontSize,\r\n    fontFamily,\r\n    headerHeight,\r\n    taskListWidth,\r\n    TooltipContent,\r\n    renderUserAvatar,\r\n  }) => {\r\n    const tooltipRef = useRef<HTMLDivElement | null>(null);\r\n    const [relatedY, setRelatedY] = useState(0);\r\n    const [relatedX, setRelatedX] = useState(0);\r\n    const UserAvatar = useMemo(() => {\r\n      if (typeof renderUserAvatar === \"function\") {\r\n        return renderUserAvatar(task?.item?.assignee);\r\n      }\r\n      return <React.Fragment />;\r\n    }, [renderUserAvatar, task?.item?.assignee]);\r\n    useEffect(() => {\r\n      if (tooltipRef.current) {\r\n        let newRelatedX =\r\n          task.x2 + arrowIndent + arrowIndent * 0.5 + taskListWidth - scrollX;\r\n        let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\r\n\r\n        const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\r\n        const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\r\n\r\n        const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        const fullChartWidth = taskListWidth + svgContainerWidth;\r\n\r\n        if (tooltipLeftmostPoint > fullChartWidth) {\r\n          newRelatedX =\r\n            task.x1 +\r\n            taskListWidth -\r\n            arrowIndent -\r\n            arrowIndent * 0.5 -\r\n            scrollX -\r\n            tooltipWidth;\r\n        }\r\n        if (newRelatedX < taskListWidth) {\r\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        } else if (tooltipLowerPoint > svgContainerHeight - scrollY) {\r\n          newRelatedX = newRelatedX + 50;\r\n          newRelatedY = svgContainerHeight - tooltipHeight;\r\n        }\r\n        setRelatedY(newRelatedY);\r\n        setRelatedX(newRelatedX);\r\n      }\r\n    }, [\r\n      task,\r\n      arrowIndent,\r\n      scrollX,\r\n      scrollY,\r\n      headerHeight,\r\n      taskListWidth,\r\n      rowHeight,\r\n      svgContainerHeight,\r\n      svgContainerWidth,\r\n    ]);\r\n    return (\r\n      <div\r\n        ref={tooltipRef}\r\n        className={\r\n          relatedX\r\n            ? styles.tooltipDetailsContainer\r\n            : styles.tooltipDetailsContainerHidden\r\n        }\r\n        style={{\r\n          left: task?.type === \"milestone\" ? relatedX + 10 : relatedX + 30,\r\n          top: relatedY < -40 ? -40 : relatedY,\r\n        }}\r\n      >\r\n        <TooltipContent\r\n          task={task}\r\n          fontSize={fontSize}\r\n          fontFamily={fontFamily}\r\n          userAvatar={UserAvatar}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n);\r\n\r\nexport const StandardTooltipContent: React.FC<{\r\n  task: Task;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  userAvatar?: JSX.Element;\r\n}> = ({ task, fontSize, fontFamily, userAvatar }) => {\r\n  const style = {\r\n    fontSize,\r\n    fontFamily,\r\n  };\r\n  return (\r\n    <div className={styles.tooltipDefaultContainer} style={style}>\r\n      {task.type !== \"milestone\" ? (\r\n        <div className={styles.tooltipId}>{task?.item?.key}</div>\r\n      ) : null}\r\n      <div className={styles.tooltipName}>{task.name}</div>\r\n      {task.type === \"milestone\" ? (\r\n        <div className={styles.item}>\r\n          <div>\r\n            <span className={styles.lightColor}>状态：</span>\r\n            <span className={styles.status}>{task?.item?.status?.name}</span>\r\n          </div>\r\n          <div>\r\n            <span className={styles.lightColor}>负责人：</span>\r\n            {userAvatar}\r\n          </div>\r\n          <div className={styles.lightColor}>\r\n            <span>计划完成时间：</span>\r\n            <span>{dayjs(task.end).format(dayFormat)}</span>\r\n          </div>\r\n        </div>\r\n      ) : (\r\n        <div className={`${styles.lightColor} ${styles.item}`}>\r\n          <div>\r\n            <span>开始日期：</span>\r\n            <span>{dayjs(task.start).format(dayFormat)}</span>\r\n          </div>\r\n          <div>\r\n            <span>结束日期：</span>\r\n            <span>{dayjs(task.end).format(dayFormat)}</span>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport Icon from \"@ant-design/icons\";\r\n\r\nconst Svg = () => (\r\n  <svg width=\"24px\" height=\"24px\" viewBox=\"0 0 24 24\" version=\"1.1\">\r\n    <path\r\n      d=\"M13.721 14.43a.972.972 0 00-1.37-.004l-2.088 2.059a1.928 1.928 0 01-1.37.568c-.588 0-1.135-.26-1.525-.738-.634-.777-.505-1.933.203-2.643l1.321-1.322.002.001.688-.686a.974.974 0 000-1.377l-.002-.003a.972.972 0 00-1.375 0l-2.068 2.07a3.892 3.892 0 000 5.497l.009.01A3.87 3.87 0 008.892 19a3.87 3.87 0 002.746-1.139l2.083-2.085a.951.951 0 000-1.345zm-3.442-4.86a.972.972 0 001.37.004l2.088-2.058c.366-.367.853-.57 1.37-.57.588 0 1.135.26 1.525.739.634.777.505 1.933-.203 2.643l-1.321 1.322-.002-.001-.688.686a.974.974 0 000 1.377l.002.003c.38.38.995.38 1.375 0l2.068-2.07a3.892 3.892 0 000-5.497l-.009-.01A3.87 3.87 0 0015.108 5a3.87 3.87 0 00-2.746 1.139l-2.083 2.085a.951.951 0 000 1.345zM8.924 4.618l.401.968a1 1 0 11-1.848.765l-.4-.968a1 1 0 111.848-.765M5.383 7.076l.968.401a1.001 1.001 0 01-.766 1.848l-.968-.4a1.001 1.001 0 01.766-1.848m9.932 10.413a1.003 1.003 0 00-.542 1.307l.402.968A1 1 0 1017.023 19l-.401-.967a1 1 0 00-1.307-.542zm2.176-2.174a1 1 0 00.54 1.306l.969.401a1.001 1.001 0 00.766-1.848l-.969-.4a1 1 0 00-1.306.542z\"\r\n      fill=\"currentColor\"\r\n      fill-rule=\"evenodd\"\r\n    ></path>\r\n  </svg>\r\n);\r\nconst IconComponent = props => <Icon component={Svg} {...props} />;\r\nexport default IconComponent;\r\n","import React from \"react\";\r\nimport Icon from \"@ant-design/icons\";\r\n\r\nconst Svg = () => (\r\n  <svg width=\"1em\" height=\"1em\" viewBox=\"0 0 24 24\" version=\"1.1\">\r\n    <g fill=\"#fff\" fill-rule=\"evenodd\">\r\n      <path d=\"M12.856 5.457l-.937.92a1.002 1.002 0 000 1.437 1.047 1.047 0 001.463 0l.984-.966c.967-.95 2.542-1.135 3.602-.288a2.54 2.54 0 01.203 3.81l-2.903 2.852a2.646 2.646 0 01-3.696 0l-1.11-1.09L9 13.57l1.108 1.089c1.822 1.788 4.802 1.788 6.622 0l2.905-2.852a4.558 4.558 0 00-.357-6.82c-1.893-1.517-4.695-1.226-6.422.47\"></path>\r\n      <path d=\"M11.144 19.543l.937-.92a1.002 1.002 0 000-1.437 1.047 1.047 0 00-1.462 0l-.985.966c-.967.95-2.542 1.135-3.602.288a2.54 2.54 0 01-.203-3.81l2.903-2.852a2.646 2.646 0 013.696 0l1.11 1.09L15 11.43l-1.108-1.089c-1.822-1.788-4.802-1.788-6.622 0l-2.905 2.852a4.558 4.558 0 00.357 6.82c1.893 1.517 4.695 1.226 6.422-.47\"></path>\r\n    </g>\r\n  </svg>\r\n);\r\nconst IconComponent = props => <Icon component={Svg} {...props} />;\r\nexport default IconComponent;\r\n","import React, { useRef, useEffect, useState, memo, useMemo } from \"react\";\r\nimport { Task, ConnectionProps } from \"../../types/public-types\";\r\nimport UnconnectionIcon from \"../icons/unconnection\";\r\nimport ConnectionIcon from \"../icons/connection\";\r\nimport { Tooltip } from \"antd\";\r\nimport { dayFormat } from \"../../helpers/dicts\";\r\nimport dayjs from \"dayjs\";\r\n\r\nimport styles from \"./deleteTooltip.module.css\";\r\n\r\nexport type TooltipProps = ConnectionProps & {\r\n  tasks: Task[];\r\n  taskListWidth: number;\r\n  currentConnection?: any;\r\n  boundTop: number;\r\n  svgContainerHeight: number;\r\n};\r\nexport const DeleteTooltip: React.FC<TooltipProps> = memo(\r\n  ({\r\n    tasks,\r\n    delConnection,\r\n    taskListWidth,\r\n    itemLinks,\r\n    currentConnection,\r\n    boundTop,\r\n    setCurrentConnection,\r\n    svgContainerHeight,\r\n  }) => {\r\n    const path = window.location.origin;\r\n    const tooltipRef = useRef<HTMLDivElement | null>(null);\r\n    const [relatedY, setRelatedY] = useState(0);\r\n    const [relatedX, setRelatedX] = useState(0);\r\n    const sourceTask = useMemo(() => {\r\n      return tasks.filter(ele => {\r\n        return ele.id === currentConnection.connection.sourceId;\r\n      });\r\n    }, [currentConnection.connection.sourceId, tasks]);\r\n    const targetTask = useMemo(() => {\r\n      return tasks.filter(\r\n        ele => ele.id === currentConnection.connection.targetId\r\n      );\r\n    }, [currentConnection.connection.targetId, tasks]);\r\n    useEffect(() => {\r\n      if (tooltipRef.current) {\r\n        const tooltipHeight = tooltipRef.current.offsetHeight;\r\n        const newRelatedY =\r\n          currentConnection?.originalEvent?.clientY - boundTop + tooltipHeight >\r\n          svgContainerHeight\r\n            ? currentConnection?.originalEvent?.clientY -\r\n              boundTop -\r\n              tooltipHeight\r\n            : currentConnection?.originalEvent?.clientY - boundTop;\r\n        const newRelatedX =\r\n          currentConnection?.originalEvent?.clientX - taskListWidth;\r\n        setRelatedY(newRelatedY);\r\n        setRelatedX(newRelatedX);\r\n      }\r\n    }, [\r\n      tasks,\r\n      taskListWidth,\r\n      boundTop,\r\n      currentConnection?.originalEvent?.clientX,\r\n      currentConnection?.originalEvent?.clientY,\r\n      svgContainerHeight,\r\n    ]);\r\n    const removeConnection = async () => {\r\n      const currentLink = itemLinks?.filter((ele: any) => {\r\n        return (\r\n          ele.source?.objectId === currentConnection.connection?.sourceId &&\r\n          ele.destination?.objectId ===\r\n            currentConnection.connection?.targetId &&\r\n          ele.linkType?.objectId === currentConnection.connection.getData()\r\n        );\r\n      });\r\n      if (currentLink?.length) {\r\n        await delConnection?.(currentLink?.[0]?.objectId);\r\n        setCurrentConnection?.(null);\r\n      }\r\n    };\r\n    return (\r\n      <div\r\n        ref={tooltipRef}\r\n        className={styles.tooltipDeleteContainer}\r\n        style={{ left: relatedX + 30, top: relatedY < -40 ? -40 : relatedY }}\r\n      >\r\n        {currentConnection && (\r\n          <div className={styles.tooltipDeleteDefaultContainer}>\r\n            <div className={styles.taskInfo}>\r\n              <div className={styles.title}>\r\n                {sourceTask[0]?.item?.itemType?.icon && (\r\n                  <img src={`${path}${sourceTask[0].item.itemType.icon}`} />\r\n                )}\r\n\r\n                <span> {sourceTask[0]?.name}</span>\r\n              </div>\r\n              <div className={styles.date}>\r\n                {currentConnection.connection?.endpoints?.[0].anchor\r\n                  ?.cssClass === \"Right\"\r\n                  ? `结束日期：${dayjs(sourceTask[0]?.end).format(dayFormat)}`\r\n                  : `开始日期：${dayjs(sourceTask[0]?.start).format(\r\n                      dayFormat\r\n                    )}`}\r\n              </div>\r\n            </div>\r\n            <div className={styles.connect}>\r\n              <div className={styles.connection}>\r\n                <div className={styles.connectionLine} />\r\n                <span className={styles.connectionIcon}>\r\n                  <ConnectionIcon style={{ fontSize: \"18px\" }} />\r\n                </span>\r\n                <div className={styles.connectionLine} />\r\n              </div>\r\n              <Tooltip title=\"解除事项链接\" className={styles.unconnectionIcon}>\r\n                <span onClick={removeConnection}>\r\n                  <UnconnectionIcon />\r\n                </span>\r\n              </Tooltip>\r\n            </div>\r\n            <div className={styles.taskInfo}>\r\n              <div className={styles.title}>\r\n                {targetTask[0]?.item?.itemType?.icon && (\r\n                  <img src={`${path}${targetTask[0].item.itemType.icon}`} />\r\n                )}\r\n\r\n                <span>{targetTask[0]?.name}</span>\r\n              </div>\r\n              <div className={styles.date}>\r\n                {currentConnection.connection?.endpoints[1]?.anchor\r\n                  ?.cssClass === \"Right\"\r\n                  ? `结束日期：${dayjs(targetTask[0]?.end).format(dayFormat)}`\r\n                  : `开始日期：${dayjs(targetTask[0]?.start).format(\r\n                      dayFormat\r\n                    )}`}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n);\r\n","import React, { SyntheticEvent, forwardRef, memo } from \"react\";\r\nimport styles from \"./vertical-scroll.module.css\";\r\n\r\nconst VerticalScrollComponent: React.ForwardRefRenderFunction<\r\n  any,\r\n  {\r\n    ganttHeight: number;\r\n    ganttFullHeight: number;\r\n    headerHeight: number;\r\n    listBottomHeight: number;\r\n    onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n  }\r\n> = (\r\n  { ganttHeight, ganttFullHeight, headerHeight, onScroll, listBottomHeight },\r\n  ref\r\n) => {\r\n  const scrollHeight = 16;\r\n  return (\r\n    <div\r\n      style={{\r\n        height: ganttHeight || \"auto\",\r\n        marginTop: headerHeight,\r\n        marginBottom: `${listBottomHeight + scrollHeight}px`,\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={ref}\r\n    >\r\n      <div style={{ height: ganttFullHeight, width: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const VerticalScroll = memo(forwardRef(VerticalScrollComponent));\r\n","import { createContext } from \"react\";\r\nexport const GanttConfigContext = createContext<any>(null);\r\nexport const ConfigHandleContext = createContext<any>(null);\r\nexport const BaseLineContext = createContext<any>(null);\r\n","import React, {\r\n  ReactChild,\r\n  useState,\r\n  useEffect,\r\n  useContext,\r\n  memo,\r\n  useCallback,\r\n} from \"react\";\r\nimport { Task, ViewMode, EventOption } from \"../../types/public-types\";\r\nimport { addToDate } from \"../../helpers/date-helper\";\r\nimport { GanttConfigContext } from \"../../contsxt\";\r\n\r\nimport styles from \"./grid.module.css\";\r\nimport dayjs from \"dayjs\";\r\nimport weekday from \"dayjs/plugin/weekday\";\r\ndayjs.extend(weekday);\r\nexport type GridBodyProps = {\r\n  tasks: Task[];\r\n  dates: Date[];\r\n  svgWidth: number;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  todayColor: string;\r\n  viewMode?: string;\r\n  scrollX: number;\r\n  offsetLeft: number;\r\n  taskListHeight?: number;\r\n} & EventOption;\r\n// 判断是否为周末\r\n// 之前用是dayjs的weekday()方法获取周几，本地运行可以，但是线上包计算有无，具体原因不确定，所以采用getDay方法\r\nconst isRestDay = (date: Date) => {\r\n  const dt = new Date(date);\r\n  return [0, 6].includes(dt.getDay());\r\n};\r\nexport const GridBody: React.FC<GridBodyProps> = memo(\r\n  ({\r\n    tasks,\r\n    dates,\r\n    rowHeight,\r\n    svgWidth,\r\n    columnWidth,\r\n    todayColor,\r\n    viewMode,\r\n    scrollX,\r\n    offsetLeft,\r\n    taskListHeight,\r\n    onDateChange,\r\n  }) => {\r\n    const { ganttConfig } = useContext(GanttConfigContext);\r\n    const [translateX, setTranslateX] = useState(0);\r\n    const [translateY, setTranslateY] = useState(0);\r\n    const [isShow, setIsShow] = useState(false);\r\n    const [parts, setParts] = useState(1);\r\n    // 余的天数\r\n    const [remainderDays, setRemainderDays] = useState(0);\r\n    //\r\n    const [currentIndex, setCurrentDataIndex] = useState(0);\r\n    useEffect(() => {\r\n      setParts(1);\r\n      setRemainderDays(0);\r\n      setCurrentDataIndex(0);\r\n      // 一个时间刻度分成多少小份： 一月分为28、29、30、31份\r\n    }, [viewMode]);\r\n    let y = 0;\r\n    const invalidColumn: ReactChild[] = [];\r\n    const gridRows: ReactChild[] = [];\r\n    const rowLines: ReactChild[] = [\r\n      <line\r\n        key=\"RowLineFirst\"\r\n        x=\"0\"\r\n        y1={0}\r\n        x2={svgWidth}\r\n        y2={0}\r\n        className={styles.gridRowLine}\r\n      />,\r\n    ];\r\n    const handleMouseMove = useCallback(\r\n      (event: any, index: number) => {\r\n        const pointerX = event.clientX - offsetLeft - 24;\r\n        // 整数\r\n        const currentDataIndex = Math.floor((pointerX + scrollX) / columnWidth);\r\n        setCurrentDataIndex(currentDataIndex);\r\n        let translateX = 0;\r\n        // 天或周\r\n        if (viewMode === ViewMode.Day || viewMode === ViewMode.Week) {\r\n          setParts(1);\r\n          setRemainderDays(0);\r\n          translateX = currentDataIndex * columnWidth;\r\n        }\r\n        // 月\r\n        if (viewMode === ViewMode.Month) {\r\n          // 余数\r\n          const dateRemainder =\r\n            pointerX + scrollX - currentDataIndex * columnWidth;\r\n          // 获取当前月下的天数\r\n          const parts = new Date(\r\n            dates[currentDataIndex]?.getFullYear(),\r\n            dates[currentDataIndex]?.getMonth() + 1,\r\n            0\r\n          ).getDate();\r\n          setParts(parts);\r\n          // 一天对应的宽度\r\n          const dayWidth = columnWidth / parts;\r\n          const remainder = Math.floor(dateRemainder / dayWidth);\r\n          setRemainderDays(remainder);\r\n          translateX =\r\n            currentDataIndex * columnWidth + (remainder / parts) * columnWidth;\r\n        }\r\n        // 季度\r\n        if (viewMode === ViewMode.Quarter) {\r\n          const dateRemainder =\r\n            pointerX + scrollX - currentDataIndex * columnWidth;\r\n          const parts = 3;\r\n          setParts(3);\r\n          // 一天对应的宽度\r\n          const dayWidth = columnWidth / parts;\r\n          const remainder = Math.floor(dateRemainder / dayWidth);\r\n          setRemainderDays(remainder);\r\n          translateX =\r\n            currentDataIndex * columnWidth + (remainder / parts) * columnWidth;\r\n        }\r\n        // 年\r\n        if (viewMode === ViewMode.Year) {\r\n          const dateRemainder =\r\n            pointerX + scrollX - currentDataIndex * columnWidth;\r\n          const parts = 12;\r\n          setParts(12);\r\n          // 一天对应的宽度\r\n          const dayWidth = columnWidth / parts;\r\n          const remainder = Math.floor(dateRemainder / dayWidth);\r\n          setRemainderDays(remainder);\r\n          translateX =\r\n            currentDataIndex * columnWidth + (remainder / parts) * columnWidth;\r\n        }\r\n        setTranslateX(translateX);\r\n        setTranslateY(index * rowHeight);\r\n      },\r\n      [columnWidth, dates, offsetLeft, rowHeight, scrollX, viewMode]\r\n    );\r\n    const handleInvalidColumnMouseMove = useCallback(\r\n      (index: number, row: any) => {\r\n        setTranslateY(index * rowHeight);\r\n        setIsShow(!row.start);\r\n      },\r\n      [rowHeight]\r\n    );\r\n    const invalidBarClick = () => {\r\n      const taskIndex = translateY / rowHeight;\r\n      let startDate, endDate;\r\n      if (viewMode === ViewMode.Day) {\r\n        startDate = dayjs(\r\n          dates[0].valueOf() + (translateX / columnWidth) * 86400000\r\n        );\r\n        endDate = dayjs(\r\n          dates[0].valueOf() + (translateX / columnWidth) * 86400000 + 86400000\r\n        );\r\n      }\r\n      if (viewMode === ViewMode.Week) {\r\n        startDate = dayjs(\r\n          dates[0].valueOf() + (translateX / columnWidth) * 86400000 * 7\r\n        );\r\n        endDate = dayjs(\r\n          dates[0].valueOf() +\r\n            (translateX / columnWidth) * 86400000 * 7 +\r\n            86400000 * 7\r\n        );\r\n      }\r\n      if (viewMode === ViewMode.Month) {\r\n        startDate = dayjs(\r\n          dates[currentIndex].valueOf() + remainderDays * 86400000\r\n        );\r\n        endDate = dayjs(\r\n          dates[currentIndex].valueOf() + remainderDays * 86400000 + 86400000\r\n        );\r\n      }\r\n      if (viewMode === ViewMode.Quarter || viewMode === ViewMode.Year) {\r\n        startDate = dayjs(\r\n          new Date(\r\n            dates[currentIndex].getFullYear(),\r\n            dates[currentIndex].getMonth() + remainderDays\r\n          )\r\n        );\r\n        endDate = dayjs(\r\n          new Date(\r\n            dates[currentIndex].getFullYear(),\r\n            dates[currentIndex].getMonth() + remainderDays + 1\r\n          )\r\n        );\r\n      }\r\n      onDateChange?.(\r\n        Object.assign(tasks[taskIndex], {\r\n          start: ganttConfig?.time?.length\r\n            ? startDate?.startOf(\"day\").toDate()\r\n            : null,\r\n          end: ganttConfig?.time?.length\r\n            ? endDate?.startOf(\"day\").toDate()\r\n            : null,\r\n        })\r\n      );\r\n    };\r\n    for (let i = 0; i < tasks.length; i++) {\r\n      gridRows.push(\r\n        <g\r\n          key={`Cell-${i}`}\r\n          onMouseEnter={(e: any) => {\r\n            const ele = e.target.parentNode.firstChild;\r\n            ele && (ele.style.fill = \"#f3f3f3\");\r\n          }}\r\n          onMouseLeave={(e: any) => {\r\n            const ele = e.target.parentNode.firstChild;\r\n            ele && (ele.style.fill = \"\");\r\n          }}\r\n          // @ts-ignore\r\n          index={i}\r\n        >\r\n          <rect\r\n            key={\"Row\" + tasks[i].id + i}\r\n            x=\"0\"\r\n            y={y}\r\n            width={svgWidth}\r\n            height={rowHeight}\r\n            className={styles.gridRow}\r\n            onMouseMove={(e: any) => {\r\n              handleMouseMove(e, i);\r\n            }}\r\n          />\r\n          <rect\r\n            key={\"Cell\" + tasks[i].id + i}\r\n            x={translateX + 0.5}\r\n            y={y}\r\n            width={columnWidth / parts}\r\n            height={rowHeight}\r\n            fill=\"transparent\"\r\n            ry={4}\r\n            rx={4}\r\n            onMouseMove={() => {\r\n              handleInvalidColumnMouseMove(i, tasks[i]);\r\n            }}\r\n          />\r\n          {/* 卡片为空时不能添加时间 */}\r\n          {tasks[i].id && (\r\n            <rect\r\n              key={\"Time\" + tasks[i].id + i}\r\n              x={translateX}\r\n              y={y + rowHeight / 2 - 30 / 2}\r\n              width={columnWidth / parts}\r\n              height={30}\r\n              fill=\"transparent\"\r\n              onClick={isShow ? invalidBarClick : () => {}}\r\n              cursor={isShow ? \"pointer\" : \"default\"}\r\n              onMouseEnter={(e: any) => {\r\n                const ele = e.target.parentNode;\r\n                const index = ele.getAttribute(\"index\");\r\n                if (isShow && i === Number(index)) {\r\n                  e.target.style.fill = \"#AFCBFF\";\r\n                }\r\n              }}\r\n              onMouseLeave={(e: any) => {\r\n                e.target.style.fill = \"transparent\";\r\n              }}\r\n            />\r\n          )}\r\n        </g>\r\n      );\r\n      invalidColumn.push(\r\n        <rect\r\n          key={\"invalidColumn\" + tasks[i].id + i}\r\n          x={translateX + 0.5}\r\n          y={y}\r\n          width={columnWidth / parts}\r\n          height={rowHeight}\r\n          fill={isShow ? \"#DAE0FF\" : \"transparent\"}\r\n          onMouseMove={() => {\r\n            handleInvalidColumnMouseMove(i, tasks[i]);\r\n          }}\r\n        />\r\n      );\r\n      rowLines.push(\r\n        <line\r\n          key={\"RowLine\" + tasks[i].id + i}\r\n          x=\"0\"\r\n          y1={y + rowHeight}\r\n          x2={svgWidth}\r\n          y2={y + rowHeight}\r\n          className={styles.gridRowLine}\r\n        />\r\n      );\r\n      y += rowHeight;\r\n    }\r\n\r\n    const now = new Date();\r\n    let tickX = 0;\r\n    const ticks: ReactChild[] = [];\r\n    let today: ReactChild = <rect />;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      ticks.push(\r\n        <g key={`${date.getTime()}-${i}-ticks`}>\r\n          <line\r\n            key={`${date.getTime()}-${i}-line`}\r\n            x1={tickX}\r\n            y1={0}\r\n            x2={tickX}\r\n            y2={y < Number(taskListHeight) ? taskListHeight : y}\r\n            className={styles.gridTick}\r\n          />\r\n          {isRestDay(date) && viewMode === ViewMode.Day && (\r\n            <rect\r\n              key={`${date.getTime()}-${date.getTime()}-${i}-restday`}\r\n              x={tickX + 1}\r\n              y=\"0\"\r\n              width={columnWidth - 1}\r\n              height={y < Number(taskListHeight) ? taskListHeight : y}\r\n              className={styles.gridTickWeekday}\r\n            />\r\n          )}\r\n        </g>\r\n      );\r\n      if (\r\n        (i + 1 !== dates.length &&\r\n          date.getTime() < now.getTime() &&\r\n          dates[i + 1].getTime() >= now.getTime()) ||\r\n        // if current date is last\r\n        (i !== 0 &&\r\n          i + 1 === dates.length &&\r\n          date.getTime() < now.getTime() &&\r\n          addToDate(\r\n            date,\r\n            date.getTime() - dates[i - 1].getTime(),\r\n            \"millisecond\"\r\n          ).getTime() >= now.getTime())\r\n      ) {\r\n        // 当天的零点的时间戳（毫秒）\r\n        const currentStamp = new Date(\r\n          new Date().toLocaleDateString()\r\n        ).getTime();\r\n        // 当天和上一个时间的差\r\n        const currentMinus =\r\n          (currentStamp + 86400000 - dates[i].getTime()) / 86400000;\r\n        // 前后时间差\r\n        const totalMinus =\r\n          (dates[i + 1].getTime() - dates[i].getTime()) / 86400000;\r\n        const newTickX =\r\n          tickX +\r\n          columnWidth * (currentMinus / totalMinus) -\r\n          columnWidth / totalMinus / 2;\r\n        today = (\r\n          <g>\r\n            {/* <rect\r\n            x={tickX}\r\n            y={0}\r\n            width={columnWidth}\r\n            height={y}\r\n            fill={todayColor}\r\n          /> */}\r\n            <circle\r\n              cx={newTickX}\r\n              cy=\"3\"\r\n              r=\"3\"\r\n              stroke=\"black\"\r\n              strokeWidth=\"0\"\r\n              fill={todayColor}\r\n            />\r\n            <line\r\n              x1={newTickX}\r\n              y1=\"0\"\r\n              x2={newTickX}\r\n              y2={y < Number(taskListHeight) ? taskListHeight : y}\r\n              style={{ stroke: todayColor, strokeWidth: \"1\" }}\r\n            />\r\n          </g>\r\n        );\r\n      }\r\n      tickX += columnWidth;\r\n    }\r\n    const invalidBar = (\r\n      <g>\r\n        <rect\r\n          x={translateX}\r\n          y={translateY + rowHeight / 2 - 30 / 2}\r\n          width={columnWidth / parts}\r\n          height={30}\r\n          rx={4}\r\n          ry={4}\r\n          fill=\"#AFCBFF\"\r\n          onClick={invalidBarClick}\r\n          cursor=\"pointer\"\r\n        />\r\n      </g>\r\n    );\r\n    return (\r\n      <g\r\n        className=\"gridBody\"\r\n        onMouseLeave={() => {\r\n          setTranslateX(-500);\r\n        }}\r\n      >\r\n        <g className=\"ticks\">{ticks}</g>\r\n\r\n        <g className=\"rowLines\">{rowLines}</g>\r\n        <g className=\"rows\">{gridRows}</g>\r\n        {false && <g className=\"invalidColumn\">{invalidColumn}</g>}\r\n        {false && <g className=\"invalidBar\">{invalidBar}</g>}\r\n        <g className=\"today\">{today}</g>\r\n      </g>\r\n    );\r\n  }\r\n);\r\nGridBody.defaultProps = {\r\n  scrollX: 0,\r\n};\r\n","import React, { memo } from \"react\";\r\nimport { GridBody, GridBodyProps } from \"./grid-body\";\r\nexport type GridProps = GridBodyProps;\r\nexport const Grid: React.FC<GridProps> = memo(props => {\r\n  return (\r\n    <g className=\"grid\">\r\n      <GridBody {...props} />\r\n    </g>\r\n  );\r\n});\r\n","import React from \"react\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\ntype TopPartOfCalendarProps = {\r\n  value: string;\r\n  x1Line: number;\r\n  y1Line: number;\r\n  y2Line: number;\r\n  xText: number;\r\n  yText: number;\r\n};\r\n\r\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\r\n  value,\r\n  x1Line,\r\n  y1Line,\r\n  y2Line,\r\n  xText,\r\n  yText,\r\n}) => {\r\n  return (\r\n    <g className=\"calendarTop\">\r\n      <line\r\n        x1={x1Line}\r\n        y1={y1Line}\r\n        x2={x1Line}\r\n        y2={y2Line}\r\n        className={styles.calendarTopTick}\r\n        key={value + \"line\"}\r\n      />\r\n      <text\r\n        key={value + \"text\"}\r\n        y={yText}\r\n        x={xText}\r\n        className={styles.calendarTopText}\r\n      >\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { ReactChild, memo, useCallback, useMemo } from \"react\";\r\nimport { ViewMode } from \"../../types/public-types\";\r\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\r\nimport {\r\n  getLocaleMonth,\r\n  getWeekNumberISO8601,\r\n} from \"../../helpers/date-helper\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\nexport type CalendarProps = {\r\n  dateSetup: DateSetup;\r\n  locale: string;\r\n  viewMode: ViewMode;\r\n  headerHeight: number;\r\n  columnWidth: number;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n};\r\nexport const Calendar: React.FC<CalendarProps> = memo(\r\n  ({\r\n    dateSetup,\r\n    locale,\r\n    viewMode,\r\n    headerHeight,\r\n    columnWidth,\r\n    fontFamily,\r\n    fontSize,\r\n  }) => {\r\n    const bottomValuesInit = useCallback(\r\n      (bottomValue, date, headerHeight, i, type) => {\r\n        return (\r\n          <text\r\n            key={\r\n              [\"Day\", \"Other\", \"Week\"].includes(type)\r\n                ? date.getTime()\r\n                : bottomValue + date.getFullYear()\r\n            }\r\n            y={\r\n              [\"Day\", \"Week\"].includes(type)\r\n                ? headerHeight * 0.6 + 6\r\n                : headerHeight * 0.6\r\n            }\r\n            x={columnWidth * i + columnWidth * 0.5}\r\n            className={styles.calendarBottomText}\r\n          >\r\n            {bottomValue}\r\n          </text>\r\n        );\r\n      },\r\n      [columnWidth]\r\n    );\r\n    const getCalendarValuesForYear = useCallback(() => {\r\n      const topValues: ReactChild[] = [];\r\n      const bottomValues: ReactChild[] = [];\r\n      for (let i = 0; i < dateSetup.dates.length; i++) {\r\n        const date = dateSetup.dates[i];\r\n        const bottomValue = date.getFullYear().toString();\r\n        bottomValues.push(\r\n          bottomValuesInit(bottomValue, date, headerHeight, i, \"year\")\r\n        );\r\n      }\r\n      return [topValues, bottomValues];\r\n    }, [dateSetup.dates, headerHeight, bottomValuesInit]);\r\n    const getCalendarValuesForQuarter = useCallback(() => {\r\n      const topValues: ReactChild[] = [];\r\n      const bottomValues: ReactChild[] = [];\r\n      const topDefaultWidth = columnWidth * 3;\r\n      const topDefaultHeight = headerHeight * 0.5;\r\n      for (let i = 0; i < dateSetup.dates.length; i++) {\r\n        const date = dateSetup.dates[i];\r\n        const currentQuarter = Math.floor(\r\n          date.getMonth() % 3 === 0\r\n            ? date.getMonth() / 3 + 1\r\n            : date.getMonth() / 3 + 1\r\n        );\r\n        const bottomValue = `第${currentQuarter}季`;\r\n        bottomValues.push(\r\n          bottomValuesInit(bottomValue, date, headerHeight, i, \"Quarter\")\r\n        );\r\n        if (\r\n          i === 0 ||\r\n          date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n        ) {\r\n          const topValue = date.getFullYear().toString();\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue}\r\n              value={topValue}\r\n              x1Line={columnWidth * i}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={\r\n                topDefaultWidth + columnWidth * i - currentQuarter * columnWidth\r\n              }\r\n              yText={topDefaultHeight * 0.9}\r\n            />\r\n          );\r\n        }\r\n      }\r\n      return [topValues, bottomValues];\r\n    }, [columnWidth, dateSetup.dates, headerHeight, bottomValuesInit]);\r\n    const getCalendarValuesForMonth = useCallback(() => {\r\n      const topValues: ReactChild[] = [];\r\n      const bottomValues: ReactChild[] = [];\r\n      const topDefaultWidth = columnWidth * 6;\r\n      const topDefaultHeight = headerHeight * 0.5;\r\n      for (let i = 0; i < dateSetup.dates.length; i++) {\r\n        const date = dateSetup.dates[i];\r\n        const bottomValue = getLocaleMonth(date, locale);\r\n        bottomValues.push(\r\n          bottomValuesInit(bottomValue, date, headerHeight, i, \"Month\")\r\n        );\r\n        if (\r\n          i === 0 ||\r\n          date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n        ) {\r\n          const topValue = date.getFullYear().toString();\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue}\r\n              value={topValue}\r\n              x1Line={columnWidth * i}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={\r\n                topDefaultWidth +\r\n                columnWidth * i -\r\n                date.getMonth() * columnWidth\r\n              }\r\n              yText={topDefaultHeight * 0.9}\r\n            />\r\n          );\r\n        }\r\n      }\r\n      return [topValues, bottomValues];\r\n    }, [columnWidth, dateSetup.dates, headerHeight, locale, bottomValuesInit]);\r\n\r\n    const getCalendarValuesForWeek = useCallback(() => {\r\n      const topValues: ReactChild[] = [];\r\n      const bottomValues: ReactChild[] = [];\r\n      let weeksCount: number = 1;\r\n      const topDefaultHeight = headerHeight * 0.5;\r\n      const dates = dateSetup.dates;\r\n      for (let i = dates.length - 1; i >= 0; i--) {\r\n        const date = dates[i];\r\n        let topValue = \"\";\r\n        if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\r\n          // top\r\n          topValue = `${date.getFullYear()}年${date.getMonth() + 1}月`;\r\n        }\r\n        // bottom\r\n        const bottomValue = `第${getWeekNumberISO8601(date)}周`;\r\n\r\n        bottomValues.push(\r\n          bottomValuesInit(bottomValue, date, headerHeight, i, \"Week\")\r\n        );\r\n\r\n        if (topValue) {\r\n          // if last day is new month\r\n          if (i !== dates.length - 1) {\r\n            topValues.push(\r\n              <TopPartOfCalendar\r\n                key={topValue}\r\n                value={topValue}\r\n                x1Line={columnWidth * i + weeksCount * columnWidth}\r\n                y1Line={0}\r\n                y2Line={topDefaultHeight}\r\n                xText={columnWidth * i + columnWidth * weeksCount * 0.5}\r\n                yText={topDefaultHeight * 0.9 - 4}\r\n              />\r\n            );\r\n          }\r\n          weeksCount = 0;\r\n        }\r\n        weeksCount++;\r\n      }\r\n      return [topValues, bottomValues];\r\n    }, [columnWidth, dateSetup.dates, headerHeight, bottomValuesInit]);\r\n\r\n    const getCalendarValuesForDay = useCallback(() => {\r\n      const topValues: ReactChild[] = [];\r\n      const bottomValues: ReactChild[] = [];\r\n      const topDefaultHeight = headerHeight * 0.5;\r\n      const dates = dateSetup.dates;\r\n      for (let i = 0; i < dates.length; i++) {\r\n        const date = dates[i];\r\n        const bottomValue = date.getDate().toString();\r\n\r\n        bottomValues.push(\r\n          bottomValuesInit(bottomValue, date, headerHeight, i, \"Day\")\r\n        );\r\n        if (\r\n          i + 1 !== dates.length &&\r\n          date.getMonth() !== dates[i + 1].getMonth()\r\n        ) {\r\n          const topValue = `${date.getFullYear()}年${date.getMonth() + 1}月`;\r\n\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue + date.getFullYear()}\r\n              value={topValue}\r\n              x1Line={columnWidth * (i + 1)}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={columnWidth * (i + 1) - date.getDate() * columnWidth * 0.5}\r\n              yText={topDefaultHeight * 0.9 - 4}\r\n            />\r\n          );\r\n        }\r\n      }\r\n      return [topValues, bottomValues];\r\n    }, [columnWidth, dateSetup.dates, headerHeight, bottomValuesInit]);\r\n\r\n    const getCalendarValuesForOther = useCallback(() => {\r\n      const topValues: ReactChild[] = [];\r\n      const bottomValues: ReactChild[] = [];\r\n      const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\r\n      const topDefaultHeight = headerHeight * 0.5;\r\n      const dates = dateSetup.dates;\r\n      for (let i = 0; i < dates.length; i++) {\r\n        const date = dates[i];\r\n        const bottomValue = Intl.DateTimeFormat(locale, {\r\n          hour: \"numeric\",\r\n        }).format(date);\r\n\r\n        bottomValues.push(\r\n          bottomValuesInit(bottomValue, date, headerHeight, i, \"Other\")\r\n        );\r\n        if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\r\n          const topValue = `${date.getDate()} ${getLocaleMonth(date, locale)}`;\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue + date.getFullYear()}\r\n              value={topValue}\r\n              x1Line={columnWidth * i + ticks * columnWidth}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={columnWidth * i + ticks * columnWidth * 0.5}\r\n              yText={topDefaultHeight * 0.9}\r\n            />\r\n          );\r\n        }\r\n      }\r\n      return [topValues, bottomValues];\r\n    }, [\r\n      columnWidth,\r\n      dateSetup.dates,\r\n      headerHeight,\r\n      locale,\r\n      viewMode,\r\n      bottomValuesInit,\r\n    ]);\r\n    const [topValues, bottomValues] = useMemo(() => {\r\n      let topValues: ReactChild[] = [];\r\n      let bottomValues: ReactChild[] = [];\r\n      switch (dateSetup.viewMode) {\r\n        case ViewMode.Month:\r\n          [topValues, bottomValues] = getCalendarValuesForMonth();\r\n          break;\r\n        case ViewMode.Week:\r\n          [topValues, bottomValues] = getCalendarValuesForWeek();\r\n          break;\r\n        case ViewMode.Day:\r\n          [topValues, bottomValues] = getCalendarValuesForDay();\r\n          break;\r\n        case ViewMode.Year:\r\n          [topValues, bottomValues] = getCalendarValuesForYear();\r\n          break;\r\n        case ViewMode.Quarter:\r\n          [topValues, bottomValues] = getCalendarValuesForQuarter();\r\n          break;\r\n        default:\r\n          [topValues, bottomValues] = getCalendarValuesForOther();\r\n          break;\r\n      }\r\n      return [topValues, bottomValues];\r\n    }, [\r\n      dateSetup.viewMode,\r\n      getCalendarValuesForDay,\r\n      getCalendarValuesForMonth,\r\n      getCalendarValuesForOther,\r\n      getCalendarValuesForQuarter,\r\n      getCalendarValuesForWeek,\r\n      getCalendarValuesForYear,\r\n    ]);\r\n    return (\r\n      <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\r\n        <rect\r\n          x={0}\r\n          y={0}\r\n          width={columnWidth * dateSetup.dates.length}\r\n          height={headerHeight}\r\n          className={styles.calendarHeader}\r\n        />\r\n        {bottomValues}\r\n        {topValues}\r\n      </g>\r\n    );\r\n  }\r\n);\r\n","import React from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\n\r\ntype ArrowProps = {\r\n  taskFrom: BarTask;\r\n  taskTo: BarTask;\r\n  rowHeight: number;\r\n  taskHeight: number;\r\n  arrowIndent: number;\r\n};\r\nexport const Arrow: React.FC<ArrowProps> = ({\r\n  taskFrom,\r\n  taskTo,\r\n  rowHeight,\r\n  taskHeight,\r\n  arrowIndent,\r\n}) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n\r\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \r\n  h ${arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  H ${taskTo.x1 - arrowIndent} \r\n  V ${taskToEndPosition} \r\n  h ${arrowIndent}`;\r\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \r\n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \r\n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\r\n  return (\r\n    <g className=\"arrow\">\r\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\r\n      <polygon points={trianglePoints} />\r\n    </g>\r\n  );\r\n};\r\n","import { BarTask } from \"../types/bar-task\";\r\nimport { Task, Assignee } from \"../types/public-types\";\r\n\r\nexport function isKeyboardEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.KeyboardEvent {\r\n  return (event as React.KeyboardEvent).key !== undefined;\r\n}\r\n\r\nexport function isMouseEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.MouseEvent {\r\n  return (event as React.MouseEvent).clientX !== undefined;\r\n}\r\n\r\nexport function isBarTask(task: Task | BarTask): task is BarTask {\r\n  return (task as BarTask).x1 !== undefined;\r\n}\r\n// 判断是平年还是闰年\r\nexport function isLeapYear(year: number) {\r\n  if (year % 4 === 0 && year % 100 !== 0) {\r\n    return true;\r\n  } else if (year % 400 === 0) {\r\n    return true;\r\n  } else {\r\n    return false;\r\n  }\r\n}\r\nexport function getQuarter(currMonth: number) {\r\n  return Math.floor(currMonth % 3 === 0 ? currMonth / 3 : currMonth / 3 + 1);\r\n}\r\nexport const initAssignee = (assignee: Assignee[]): string => {\r\n  let connectName = \"\";\r\n  if (assignee && assignee.length) {\r\n    connectName = assignee.reduce(\r\n      (str: string, cur: Assignee, index: number) => {\r\n        return index === assignee.length - 1\r\n          ? str + cur.username\r\n          : str + cur.username + \"、\";\r\n      },\r\n      \"\"\r\n    );\r\n  }\r\n  return connectName;\r\n};\r\n","import { Task, ViewMode, DateDeltaInit } from \"../types/public-types\";\r\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\r\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\r\nimport { isLeapYear, getQuarter } from \"../helpers/other-helper\";\r\nexport const convertToBarTasks = (\r\n  tasks: Task[],\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string,\r\n  viewMode: string\r\n) => {\r\n  const dateDelta =\r\n    dates[1].getTime() -\r\n    dates[0].getTime() -\r\n    dates[1].getTimezoneOffset() * 60 * 1000 +\r\n    dates[0].getTimezoneOffset() * 60 * 1000;\r\n  let barTasks = tasks.map((t, i) => {\r\n    return convertToBarTask(\r\n      t,\r\n      i,\r\n      dates,\r\n      dateDelta,\r\n      columnWidth,\r\n      rowHeight,\r\n      taskHeight,\r\n      barCornerRadius,\r\n      handleWidth,\r\n      barProgressColor,\r\n      barProgressSelectedColor,\r\n      barBackgroundColor,\r\n      barBackgroundSelectedColor,\r\n      projectProgressColor,\r\n      projectProgressSelectedColor,\r\n      projectBackgroundColor,\r\n      projectBackgroundSelectedColor,\r\n      milestoneBackgroundColor,\r\n      milestoneBackgroundSelectedColor,\r\n      viewMode\r\n    );\r\n  });\r\n\r\n  // set dependencies\r\n  barTasks = barTasks.map((task, i) => {\r\n    const dependencies = task.dependencies || [];\r\n    for (let j = 0; j < dependencies.length; j++) {\r\n      const dependence = barTasks.findIndex(\r\n        value => value.id === dependencies[j]\r\n      );\r\n      if (dependence !== -1) barTasks[dependence].barChildren.push(i);\r\n    }\r\n    return task;\r\n  });\r\n  return barTasks;\r\n};\r\n\r\nconst convertToBarTask = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string,\r\n  viewMode: string\r\n): BarTask => {\r\n  let barTask: BarTask;\r\n  switch (task.type) {\r\n    case \"milestone\":\r\n      barTask = convertToMilestone(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      );\r\n      break;\r\n    case \"project\":\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor,\r\n        viewMode\r\n      );\r\n      break;\r\n    default:\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor,\r\n        viewMode\r\n      );\r\n      break;\r\n  }\r\n  return barTask;\r\n};\r\n\r\nconst convertToBar = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  viewMode: string\r\n): BarTask => {\r\n  const x1: any = taskXCoordinate(\r\n    task.start,\r\n    dates,\r\n    dateDelta,\r\n    columnWidth,\r\n    viewMode\r\n  );\r\n  let x2: any = taskXCoordinate(\r\n    task.end,\r\n    dates,\r\n    dateDelta,\r\n    columnWidth,\r\n    viewMode\r\n  );\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n\r\n  const styles = {\r\n    backgroundColor: barBackgroundColor,\r\n    backgroundSelectedColor: barBackgroundSelectedColor,\r\n    progressColor: barProgressColor,\r\n    progressSelectedColor: barProgressSelectedColor,\r\n    ...task.styles,\r\n  };\r\n  const typeInternal: TaskTypeInternal = task.type;\r\n  if (\r\n    (typeInternal === \"task\" || typeInternal === \"parent\") &&\r\n    x2 - x1 < handleWidth * 2\r\n  ) {\r\n    x2 = x1 + handleWidth * 2;\r\n  }\r\n  return {\r\n    ...task,\r\n    typeInternal,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    height: taskHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst convertToMilestone = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n) => {\r\n  const x: any = taskXCoordinate(task.end, dates, dateDelta, columnWidth);\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n  const x1 = x - taskHeight * 0.5;\r\n  const x2 = x + taskHeight * 0.5;\r\n  const styles = {\r\n    backgroundColor: milestoneBackgroundColor,\r\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\r\n    progressColor: \"\",\r\n    progressSelectedColor: \"\",\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    end: task.start,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    typeInternal: task.type,\r\n    progress: 0,\r\n    height: taskHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst taskXCoordinate = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  viewMode?: string\r\n) => {\r\n  if (!xDate) return;\r\n  let precision;\r\n  let index = 0;\r\n  if (viewMode === ViewMode.Month) {\r\n    index =\r\n      xDate?.getFullYear() * 12 +\r\n      xDate?.getMonth() -\r\n      dates[0]?.getFullYear() * 12 -\r\n      dates[0]?.getMonth();\r\n    if (isLeapYear(xDate?.getFullYear()) && xDate?.getMonth() === 1) {\r\n      precision = DateDeltaInit.LeapMounth;\r\n    } else {\r\n      precision = DateDeltaInit[ViewMode.Month][xDate?.getMonth() + 1];\r\n    }\r\n  } else if (viewMode === ViewMode.Year) {\r\n    index = xDate?.getFullYear() - dates[0]?.getFullYear();\r\n    precision = isLeapYear(xDate?.getFullYear())\r\n      ? DateDeltaInit[ViewMode.Year].leap\r\n      : DateDeltaInit[ViewMode.Year].common;\r\n  } else if (viewMode === ViewMode.Quarter) {\r\n    index =\r\n      xDate?.getFullYear() * 4 +\r\n      getQuarter(xDate?.getMonth() + 1) -\r\n      dates[0]?.getFullYear() * 4 -\r\n      getQuarter(dates[0]?.getMonth() + 1);\r\n    if (\r\n      isLeapYear(xDate?.getFullYear()) &&\r\n      getQuarter(xDate?.getMonth() + 1) === 1\r\n    ) {\r\n      precision = DateDeltaInit.LeapQuarter;\r\n    } else {\r\n      precision =\r\n        DateDeltaInit[ViewMode.Quarter][getQuarter(xDate?.getMonth() + 1)];\r\n    }\r\n  } else {\r\n    index = ~~(\r\n      (xDate.getTime() -\r\n        dates[0].getTime() +\r\n        xDate.getTimezoneOffset() -\r\n        dates[0].getTimezoneOffset()) /\r\n      dateDelta\r\n    );\r\n    precision = dateDelta;\r\n  }\r\n  if (index < 0) {\r\n    index = 0;\r\n  } else if (index > dates.length - 1) {\r\n    index = dates.length - 1;\r\n  }\r\n  const x = Math.round(\r\n    (index +\r\n      (xDate.getTime() -\r\n        dates[index].getTime() -\r\n        xDate.getTimezoneOffset() * 60 * 1000 +\r\n        dates[index].getTimezoneOffset() * 60 * 1000) /\r\n        precision) *\r\n      columnWidth\r\n  );\r\n  return x;\r\n};\r\n\r\nconst taskYCoordinate = (\r\n  index: number,\r\n  rowHeight: number,\r\n  taskHeight: number\r\n) => {\r\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\r\n  return y;\r\n};\r\n\r\nexport const progressWithByParams = (\r\n  taskX1: number,\r\n  taskX2: number,\r\n  progress: number\r\n) => {\r\n  return (taskX2 - taskX1) * progress * 0.01;\r\n};\r\n\r\nexport const progressByProgressWidth = (\r\n  progressWidth: number,\r\n  barTask: BarTask\r\n) => {\r\n  const barWidth = barTask.x2 - barTask.x1;\r\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\r\n  if (progressPercent >= 100) return 100;\r\n  else if (progressPercent <= 0) return 0;\r\n  else {\r\n    return progressPercent;\r\n  }\r\n};\r\n\r\nconst progressByX = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 100;\r\n  else if (x <= task.x1) return 0;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\n\r\nexport const getProgressPoint = (\r\n  progressX: number,\r\n  taskY: number,\r\n  taskHeight: number\r\n) => {\r\n  const point = [\r\n    progressX - 5,\r\n    taskY + taskHeight,\r\n    progressX + 5,\r\n    taskY + taskHeight,\r\n    progressX,\r\n    taskY + taskHeight - 5.66,\r\n  ];\r\n  return point.join(\",\");\r\n};\r\n\r\nconst startByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x >= task.x2 - task.handleWidth * 2) {\r\n    x = task.x2 - task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x1 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst endByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x <= task.x1 + task.handleWidth * 2) {\r\n    x = task.x1 + task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x2) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x2 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX1 = task.x1 + additionalXValue;\r\n  const newX2 = newX1 + task.x2 - task.x1;\r\n  return [newX1, newX2];\r\n};\r\n\r\nconst dateByX = (\r\n  x: number,\r\n  taskX: number,\r\n  taskDate: Date,\r\n  xStep: number,\r\n  timeStep: number\r\n) => {\r\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\r\n  newDate = new Date(\r\n    newDate.getTime() +\r\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\r\n  );\r\n  return newDate;\r\n};\r\n\r\n/**\r\n * Method handles event in real time(mousemove) and on finish(mouseup)\r\n */\r\nexport const handleTaskBySVGMouseEvent = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  let result: { isChanged: boolean; changedTask: BarTask };\r\n  switch (selectedTask.type) {\r\n    case \"milestone\":\r\n      result = handleTaskBySVGMouseEventForMilestone(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta\r\n      );\r\n      break;\r\n    default:\r\n      result = handleTaskBySVGMouseEventForBar(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta\r\n      );\r\n      break;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForBar = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"progress\":\r\n      changedTask.progress = progressByX(svgX, selectedTask);\r\n      isChanged = changedTask.progress !== selectedTask.progress;\r\n      break;\r\n    case \"start\": {\r\n      const newX1 = startByX(svgX, xStep, selectedTask);\r\n      changedTask.x1 = newX1;\r\n      isChanged = changedTask.x1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n      }\r\n      break;\r\n    }\r\n    case \"end\": {\r\n      const newX2 = endByX(svgX, xStep, selectedTask);\r\n      changedTask.x2 = newX2;\r\n      isChanged = changedTask.x2 !== selectedTask.x2;\r\n      if (isChanged) {\r\n        changedTask.end = dateByX(\r\n          newX2,\r\n          selectedTask.x2,\r\n          selectedTask.end,\r\n          xStep,\r\n          timeStep\r\n        );\r\n      }\r\n      break;\r\n    }\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = dateByX(\r\n          newMoveX2,\r\n          selectedTask.x2,\r\n          selectedTask.end,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForMilestone = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = changedTask.start;\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n","import React from \"react\";\r\nimport style from \"./bar.module.css\";\r\nimport { BarTask } from \"../../../types/bar-task\";\r\nimport {\r\n  barBackgroundColorPivotalPath,\r\n  barBackgroundColorTimeError,\r\n} from \"../../../helpers/dicts\";\r\n\r\ntype BarDisplayProps = {\r\n  x: number;\r\n  y: number;\r\n  task?: BarTask;\r\n  width: number;\r\n  height: number;\r\n  isSelected: boolean;\r\n  progressWidth: number;\r\n  barCornerRadius: number;\r\n  styles: {\r\n    backgroundColor: string;\r\n    backgroundSelectedColor: string;\r\n    progressColor: string;\r\n    progressSelectedColor: string;\r\n    opacity?: number;\r\n  };\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n  id: string;\r\n  isLog?: boolean | undefined;\r\n};\r\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  isSelected,\r\n  progressWidth,\r\n  barCornerRadius,\r\n  styles,\r\n  onMouseDown,\r\n  id,\r\n  task,\r\n  isLog,\r\n}) => {\r\n  const getBarColor = () => {\r\n    return task?.isTimeErrorItem || task?.isOverdueItem\r\n      ? barBackgroundColorTimeError\r\n      : task?.isPivotalPathItem\r\n      ? barBackgroundColorPivotalPath\r\n      : isSelected\r\n      ? styles.backgroundSelectedColor\r\n      : styles.backgroundColor;\r\n  };\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        id={id}\r\n        x={x}\r\n        width={width}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getBarColor()}\r\n        className={style.barBackground}\r\n      />\r\n      <rect\r\n        x={x + progressWidth}\r\n        width={width - progressWidth}\r\n        y={y}\r\n        height={height}\r\n        style={{ opacity: isLog ? 0.8 : 0.4 }}\r\n        fill=\"#fff\"\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\n// import styles from \"./bar.module.css\";\r\n\r\ntype BarDateHandleProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  type: string;\r\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\r\n};\r\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  type,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        x={type === \"left\" ? x - 18 : x + 6}\r\n        y={y + 3}\r\n        width={12}\r\n        height={20}\r\n        className=\"barHandle barHandleBg\"\r\n      />\r\n      <rect\r\n        x={type === \"left\" ? x - 14 : x + 14}\r\n        y={y + 6}\r\n        width={width}\r\n        height={height}\r\n        className=\"barHandle barHandleDate\"\r\n        ry={1}\r\n        rx={1}\r\n      />\r\n      <rect\r\n        x={type === \"left\" ? x - 10 : x + 10}\r\n        y={y + 6}\r\n        width={width}\r\n        height={height}\r\n        className=\"barHandle barHandleDate\"\r\n        ry={1}\r\n        rx={1}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarProgressHandleProps = {\r\n  progressPoint: string;\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\r\n  progressPoint,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <polygon\r\n      className={`barHandle ${styles.barHandleProgress}`}\r\n      points={progressPoint}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","// 是否允许改变流程图的布局（包括大小、连线、节点删除等）\r\nexport const canChangeLayout = true;\r\n\r\n// 很多连接线都是相同设置的情况下，可以将配置抽离出来，作为一个单独的变量，作为connect的第二个参数传入。\r\n// 实际上connect的第二个参数会和第一个参数merge，作为一个整体。\r\nexport const commonConfig = {\r\n  /**\r\n   * 如果你将isSource和isTarget设置成true，那么久可以用户在拖动时，自动创建链接。\r\n   */\r\n  // 是否可以拖动（作为连线起点）\r\n  isSource: canChangeLayout,\r\n  // 是否可以放置（连线终点）\r\n  isTarget: canChangeLayout,\r\n  // 设置连接点最多可以连接几条线\r\n  // -1不限制，默认限制一条线\r\n  maxConnections: -1,\r\n  // 设置锚点位置，按照[target, source]的顺序进行设置\r\n  // 可以有 Bottom Top Right Left四种方位\r\n  // 还可以是BottomLeft BottomRight BottomCenter TopLeft TopRight TopCenter LeftMiddle RightMiddle的组合\r\n  // 默认值 ['Bottom', 'Bottom']\r\n  // anchor: ['Bottom', 'Bottom'],\r\n  // 端点类型，形状（区分大小写），Rectangle-正方形 Dot-圆形 Blank-空\r\n  endpoint: [\r\n    canChangeLayout ? \"Dot\" : \"Blank\",\r\n    {\r\n      radius: 4,\r\n      cssClass: \"end-point\",\r\n    },\r\n  ],\r\n  // 设置端点的样式\r\n  endpointStyle: {\r\n    // fill: \"#0A50D1\", // 填充颜色\r\n    // outlineStroke: \"blank\", // 边框颜色\r\n    // outlineWidth: 0, // 边框宽度\r\n  },\r\n  // 设置连接线的样式 Bezier-贝瑟尔曲线 Flowchart-流程图 StateMachine-弧线 Straight-直线\r\n  connector: [\r\n    \"Flowchart\",\r\n    { alwaysRespectStubs: true, cornerRadius: 8, stub: 16 },\r\n  ],\r\n  // 设置连接线的样式\r\n  connectorStyle: {\r\n    stroke: \"#979797\", // 实线颜色\r\n    strokeWidth: 1.5, // 实线宽度\r\n    strokeOpacity: 0.5,\r\n  },\r\n  // 设置连接线悬浮样式\r\n  connectorHoverStyle: {\r\n    strokeWidth: 2,\r\n    stroke: \"#0C62FF\",\r\n    outlineWidth: 5,\r\n    outlineStroke: \"F7F7F7\",\r\n  },\r\n\r\n  // 设置连接线的箭头\r\n  // 可以设置箭头的长宽以及箭头的位置，location 0.5表示箭头位于中间，location 1表示箭头设置在连接线末端。 一根连接线是可以添加多个箭头的。\r\n  connectorOverlays: [\r\n    [\r\n      \"PlainArrow\",\r\n      {\r\n        width: 8,\r\n        length: 8,\r\n        location: 1,\r\n      },\r\n    ],\r\n  ],\r\n};\r\nexport const offsetCalculators = {\r\n  CIRCLE: function (el: any) {\r\n    const cx = parseInt(el.getAttribute(\"cx\"), 10);\r\n    const cy = parseInt(el.getAttribute(\"cy\"), 10);\r\n    const r = parseInt(el.getAttribute(\"r\"), 10);\r\n    return {\r\n      left: cx - r,\r\n      top: cy - r,\r\n    };\r\n  },\r\n  ELLIPSE: function (el: any) {\r\n    const cx = parseInt(el.getAttribute(\"cx\"), 10);\r\n    const cy = parseInt(el.getAttribute(\"cy\"), 10);\r\n    const rx = parseInt(el.getAttribute(\"rx\"), 10);\r\n    const ry = parseInt(el.getAttribute(\"ry\"), 10);\r\n    return {\r\n      left: cx - rx,\r\n      top: cy - ry,\r\n    };\r\n  },\r\n  RECT: function (el: any) {\r\n    const x = parseInt(el.getAttribute(\"x\"), 10);\r\n    const y = parseInt(el.getAttribute(\"y\"), 10);\r\n    return {\r\n      left: x,\r\n      top: y,\r\n    };\r\n  },\r\n};\r\n// custom size calculators for SVG shapes.\r\nexport const sizeCalculators = {\r\n  CIRCLE: function (el: any) {\r\n    const r = parseInt(el.getAttribute(\"r\"), 10);\r\n    return [r * 2, r * 2];\r\n  },\r\n  ELLIPSE: function (el: any) {\r\n    const rx = parseInt(el.getAttribute(\"rx\"), 10);\r\n    const ry = parseInt(el.getAttribute(\"ry\"), 10);\r\n    return [rx * 2, ry * 2];\r\n  },\r\n  RECT: function (el: any) {\r\n    const w = parseInt(el.getAttribute(\"width\"), 10);\r\n    const h = parseInt(el.getAttribute(\"height\"), 10);\r\n    return [w, h];\r\n  },\r\n};\r\nexport const relationInit = {\r\n  FS: [\"Right\", \"Left\"],\r\n  FF: [\"Right\", \"Right\"],\r\n  SS: [\"Left\", \"Left\"],\r\n  SF: [\"Left\", \"Right\"],\r\n};\r\nexport const relationReverse = (start: string, end: string) => {\r\n  if (start === \"Right\" && end === \"Left\") {\r\n    return \"FS\";\r\n  }\r\n  if (start === \"Right\" && end === \"Right\") {\r\n    return \"FF\";\r\n  }\r\n  if (start === \"Left\" && end === \"Left\") {\r\n    return \"SS\";\r\n  }\r\n  if (start === \"Left\" && end === \"Right\") {\r\n    return \"SF\";\r\n  }\r\n  return \"SS\";\r\n};\r\nexport const deleteIcon = `<svg t=\"1633768438353\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"4762\" width=\"20\" height=\"20\"><path d=\"M522.24 512m-440.32 0a440.32 440.32 0 1 0 880.64 0 440.32 440.32 0 1 0-880.64 0Z\" fill=\"#666666\" p-id=\"4763\"></path><path d=\"M667.136 687.616c-7.68 0-15.872-3.072-21.504-9.216L355.84 389.12c-11.776-11.776-11.776-31.232 0-43.52 11.776-11.776 31.232-11.776 43.52 0l289.792 289.792c11.776 11.776 11.776 31.232 0 43.52-6.144 5.632-14.336 8.704-22.016 8.704z\" fill=\"#FFFFFF\" p-id=\"4764\"></path><path d=\"M377.344 687.616c-7.68 0-15.872-3.072-21.504-9.216-11.776-11.776-11.776-31.232 0-43.52L645.12 345.6c11.776-11.776 31.232-11.776 43.52 0 11.776 11.776 11.776 31.232 0 43.52L399.36 678.4c-6.144 6.144-13.824 9.216-22.016 9.216z\" fill=\"#FFFFFF\" p-id=\"4765\"></path></svg>`;\r\n","import { useEffect, useState, useMemo } from \"react\";\r\nimport { commonConfig } from \"../../helpers/jsPlumbConfig\";\r\nexport const pointOverEvent = (barRef: any, jsPlumb: any, id: string) => {\r\n  // 鼠标移入连接点时会触发barWrapper失去hover,从而导致barHandle和handleGroup消失，所以采用动态添加class的方式\r\n  barRef.current.classList.add(\"barHover\");\r\n  // 鼠标移入连接点时，使另外一个连接节点也显示出来\r\n  if (jsPlumb) {\r\n    jsPlumb.selectEndpoints({ element: id }).addClass(\"endpoint-hover\");\r\n  }\r\n};\r\nexport const pointOutEvent = (\r\n  barRef: React.RefObject<Element>,\r\n  jsPlumb: any,\r\n  id: string\r\n) => {\r\n  barRef?.current?.classList.remove(\"barHover\");\r\n  if (jsPlumb) {\r\n    jsPlumb.selectEndpoints({ element: id }).removeClass(\"endpoint-hover\");\r\n  }\r\n};\r\nexport const barAnchor = {\r\n  milestone: {\r\n    Left: [0, 0.5, -1, 0, 5, 0, \"Left\"],\r\n    Right: [1, 0.5, 1, 0, -2, 0, \"Right\"],\r\n  },\r\n  normal: {\r\n    Left: [0, 0.5, -1, 0, 0, 0, \"Left\"],\r\n    Right: [1, 0.5, 1, 0, 0, 0, \"Right\"],\r\n  },\r\n};\r\nexport const useHover = (\r\n  barRef: React.RefObject<Element>,\r\n  jsPlumb: any,\r\n  id: string,\r\n  action: string\r\n): any => {\r\n  const passiveAction = useMemo(() => {\r\n    return [\"start\", \"end\", \"progress\", \"move\"].includes(action);\r\n  }, [action]);\r\n  useEffect((): any => {\r\n    if (barRef.current && jsPlumb) {\r\n      const addHoverClass = () => {\r\n        if (!passiveAction) {\r\n          barRef?.current?.classList.add(\"barHover\");\r\n\r\n          jsPlumb.selectEndpoints({ element: id }).addClass(\"endpoint-hover\");\r\n          jsPlumb.selectEndpoints({ element: id }).setVisible(true);\r\n        } else {\r\n          barRef?.current?.classList.remove(\"barHover\");\r\n          jsPlumb\r\n            .selectEndpoints({ element: id })\r\n            .removeClass(\"endpoint-hover\");\r\n          jsPlumb\r\n            .selectEndpoints({ element: id })\r\n            .setVisible(false, true, true);\r\n        }\r\n      };\r\n      const removeHoverClass = () => {\r\n        barRef?.current?.classList.remove(\"barHover\");\r\n\r\n        jsPlumb.selectEndpoints({ element: id }).removeClass(\"endpoint-hover\");\r\n      };\r\n      const nodeDom = barRef.current;\r\n      nodeDom.addEventListener(\"mousemove\", addHoverClass);\r\n      nodeDom.addEventListener(\"mouseout\", removeHoverClass);\r\n      return () => {\r\n        if (nodeDom) {\r\n          nodeDom.removeEventListener(\"mousemove\", addHoverClass);\r\n          nodeDom.removeEventListener(\"mouseout\", removeHoverClass);\r\n        }\r\n      };\r\n    }\r\n  }, [barRef, jsPlumb, id, passiveAction]);\r\n};\r\n\r\nexport const useAddPoint = (\r\n  jsPlumb: any,\r\n  task: any,\r\n  barRef: any,\r\n  type?: string\r\n) => {\r\n  const [addPointFinished, setAddPointFinished] = useState(false);\r\n  useEffect(() => {\r\n    if (jsPlumb) {\r\n      // 生成新节点删除旧节点时需设置setIdChanged\r\n      jsPlumb.setIdChanged(task.id, task.id);\r\n      const rightPoint = jsPlumb.addEndpoint(\r\n        task.id,\r\n        {\r\n          anchor:\r\n            type === \"milestone\"\r\n              ? barAnchor.milestone.Right\r\n              : barAnchor.normal.Right,\r\n          uuid: task.id + \"-Right\",\r\n        },\r\n        commonConfig\r\n      );\r\n      rightPoint.bind(\"mouseover\", () =>\r\n        pointOverEvent(barRef, jsPlumb, task.id)\r\n      );\r\n      rightPoint.bind(\"mouseout\", () =>\r\n        pointOutEvent(barRef, jsPlumb, task.id)\r\n      );\r\n      const leftPoint = jsPlumb.addEndpoint(\r\n        task.id,\r\n        {\r\n          anchor:\r\n            type === \"milestone\"\r\n              ? barAnchor.milestone.Left\r\n              : barAnchor.normal.Left,\r\n          uuid: task.id + \"-Left\",\r\n        },\r\n        commonConfig\r\n      );\r\n      leftPoint.bind(\"mouseover\", () =>\r\n        pointOverEvent(barRef, jsPlumb, task.id)\r\n      );\r\n      leftPoint.bind(\"mouseout\", () => pointOutEvent(barRef, jsPlumb, task.id));\r\n      setAddPointFinished(true);\r\n    }\r\n    return () => {\r\n      if (jsPlumb) {\r\n        jsPlumb.deleteEndpoint(task.id + \"-Left\");\r\n        jsPlumb.deleteEndpoint(task.id + \"-Right\");\r\n      }\r\n    };\r\n  }, [jsPlumb, task.y, barRef, task.id, type]);\r\n  return addPointFinished;\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport {\r\n  progressWithByParams,\r\n  getProgressPoint,\r\n} from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarDateHandle } from \"./bar-date-handle\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\nimport { useHover, useAddPoint } from \"../hook\";\r\nexport const Bar: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n  jsPlumb,\r\n  isLog,\r\n  setPointInited,\r\n  ganttEvent = {\r\n    action: \"\",\r\n  },\r\n}) => {\r\n  const { action } = ganttEvent;\r\n  const barRef = useRef<any>(null);\r\n  const progressWidth = progressWithByParams(task.x1, task.x2, task.progress);\r\n  const progressPoint = getProgressPoint(\r\n    progressWidth + task.x1,\r\n    task.y,\r\n    task.height\r\n  );\r\n  const handleHeight = task.height - 12;\r\n  // 设置端点\r\n  const addPointFinished = useAddPoint(jsPlumb, task, barRef);\r\n  useEffect(() => {\r\n    if (addPointFinished) {\r\n      setPointInited?.(addPointFinished);\r\n    }\r\n  }, [addPointFinished, setPointInited]);\r\n  useEffect(() => {\r\n    if (jsPlumb) {\r\n      // 重绘元素，解决拖动时间块连接点跟随\r\n      jsPlumb.revalidate(task.id);\r\n    }\r\n  }, [jsPlumb, task]);\r\n  useEffect(() => {\r\n    return () => {\r\n      if (jsPlumb) {\r\n        jsPlumb.deleteEndpoint(task.id + \"-Left\");\r\n        jsPlumb.deleteEndpoint(task.id + \"-Right\");\r\n      }\r\n    };\r\n  }, [jsPlumb, task.id]);\r\n  useHover(barRef, jsPlumb, task.id, action);\r\n  return (\r\n    <svg>\r\n      <g ref={barRef} className={styles.barWrapper} tabIndex={0}>\r\n        {!isLog && isDateChangeable && (\r\n          <g className=\"barHandle\">\r\n            <rect\r\n              x={task.x1 - 20}\r\n              y={task.y - 3}\r\n              width={task.x2 - task.x1 + 40}\r\n              height={task.height + 6}\r\n              className={`barHandle ${styles.barHandleBackground}`}\r\n              ry={task.barCornerRadius}\r\n              rx={task.barCornerRadius}\r\n            />\r\n          </g>\r\n        )}\r\n\r\n        <BarDisplay\r\n          x={task.x1}\r\n          y={task.y}\r\n          task={task}\r\n          width={task.x2 - task.x1}\r\n          height={task.height}\r\n          progressWidth={progressWidth}\r\n          barCornerRadius={task.barCornerRadius}\r\n          styles={!isLog ? task.styles : { ...task.styles, opacity: 0.5 }}\r\n          isSelected={isSelected}\r\n          id={isLog ? `${task.id}-log` : task.id}\r\n          isLog={isLog}\r\n          onMouseDown={e => {\r\n            isDateChangeable && !isLog && onEventStart(\"move\", task, e);\r\n          }}\r\n        />\r\n        <g className=\"handleGroup\">\r\n          {isDateChangeable && !isLog && (\r\n            <g>\r\n              {/* left */}\r\n              <BarDateHandle\r\n                x={task.x1}\r\n                y={task.y}\r\n                width={task.handleWidth}\r\n                height={handleHeight}\r\n                type=\"left\"\r\n                onMouseDown={e => {\r\n                  onEventStart(\"start\", task, e);\r\n                }}\r\n              />\r\n              {/* right */}\r\n              <BarDateHandle\r\n                x={task.x2}\r\n                y={task.y}\r\n                width={task.handleWidth}\r\n                height={handleHeight}\r\n                type=\"right\"\r\n                onMouseDown={e => {\r\n                  onEventStart(\"end\", task, e);\r\n                }}\r\n              />\r\n            </g>\r\n          )}\r\n          {isProgressChangeable && !isLog && (\r\n            <BarProgressHandle\r\n              progressPoint={progressPoint}\r\n              onMouseDown={e => {\r\n                onEventStart(\"progress\", task, e);\r\n              }}\r\n            />\r\n          )}\r\n        </g>\r\n      </g>\r\n    </svg>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport {\r\n  progressWithByParams,\r\n  getProgressPoint,\r\n} from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const BarSmall: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const progressWidth = progressWithByParams(task.x1, task.x2, task.progress);\r\n  const progressPoint = getProgressPoint(\r\n    progressWidth + task.x1,\r\n    task.y,\r\n    task.height\r\n  );\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        task={task}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressWidth={progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n        id={task.id}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport style from \"./bar.module.css\";\r\nimport { BarTask } from \"../../../types/bar-task\";\r\nimport {\r\n  barBackgroundColorPivotalPath,\r\n  barBackgroundColorTimeError,\r\n} from \"../../../helpers/dicts\";\r\n\r\ntype BarDisplayProps = {\r\n  x: number;\r\n  y: number;\r\n  task: BarTask;\r\n  width: number;\r\n  height: number;\r\n  isSelected: boolean;\r\n  progressWidth: number;\r\n  barCornerRadius: number;\r\n  styles: {\r\n    backgroundColor: string;\r\n    backgroundSelectedColor: string;\r\n    progressColor: string;\r\n    progressSelectedColor: string;\r\n    opacity?: number;\r\n  };\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n  id: string;\r\n  isLog?: boolean | undefined;\r\n};\r\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\r\n  x,\r\n  y,\r\n  task,\r\n  width,\r\n  height,\r\n  isSelected,\r\n  progressWidth,\r\n  barCornerRadius,\r\n  styles,\r\n  onMouseDown,\r\n  id,\r\n  isLog,\r\n}) => {\r\n  const getBarColor = () => {\r\n    return task?.isTimeErrorItem || task?.isOverdueItem\r\n      ? barBackgroundColorTimeError\r\n      : task?.isPivotalPathItem\r\n      ? barBackgroundColorPivotalPath\r\n      : isSelected\r\n      ? styles.backgroundSelectedColor\r\n      : styles.backgroundColor;\r\n  };\r\n  const triangleX = task.x2 - task.x1 > 15 ? 15 : 2;\r\n  const triangleY = 2;\r\n\r\n  const projectLeftTriangle = [\r\n    task.x1,\r\n    task.y + task.height - triangleY,\r\n    task.x1,\r\n    task.y + task.height + triangleY + 3,\r\n    task.x1 + triangleX,\r\n    task.y + task.height - triangleY,\r\n  ].join(\",\");\r\n  const projectRightTriangle = [\r\n    task.x2,\r\n    task.y + task.height - triangleY,\r\n    task.x2,\r\n    task.y + task.height + triangleY + 3,\r\n    task.x2 - triangleX,\r\n    task.y + task.height - triangleY,\r\n  ].join(\",\");\r\n\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        id={id}\r\n        x={x}\r\n        width={width}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getBarColor()}\r\n        className={style.barBackground}\r\n      />\r\n      <polygon points={projectLeftTriangle} fill={getBarColor()} />\r\n      <polygon points={projectRightTriangle} fill={getBarColor()} />\r\n      <rect\r\n        x={x + progressWidth}\r\n        width={width - progressWidth}\r\n        y={y}\r\n        height={height + 5}\r\n        style={{ opacity: isLog ? 0.8 : 0.4 }}\r\n        fill=\"#fff\"\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport {\r\n  progressWithByParams,\r\n  getProgressPoint,\r\n} from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./parent-bar-display\";\r\nimport { BarDateHandle } from \"./bar-date-handle\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\nimport { useHover, useAddPoint } from \"../hook\";\r\nexport const BarParent: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n  jsPlumb,\r\n  isLog,\r\n  setPointInited,\r\n  ganttEvent = {\r\n    action: \"\",\r\n  },\r\n}) => {\r\n  const barRef = useRef<any>(null);\r\n  const { action } = ganttEvent;\r\n  const progressWidth = progressWithByParams(task.x1, task.x2, task.progress);\r\n  const progressPoint = getProgressPoint(\r\n    progressWidth + task.x1 + 1,\r\n    task.y + 5,\r\n    task.height\r\n  );\r\n  // 设置端点\r\n  const addPointFinished = useAddPoint(jsPlumb, task, barRef);\r\n  useEffect(() => {\r\n    if (addPointFinished) {\r\n      setPointInited?.(addPointFinished);\r\n    }\r\n  }, [addPointFinished, setPointInited]);\r\n  useEffect(() => {\r\n    if (jsPlumb) {\r\n      // 重绘元素，解决拖动时间块连接点跟随\r\n      jsPlumb.revalidate(task.id);\r\n    }\r\n  }, [jsPlumb, task]);\r\n  useEffect(() => {\r\n    return () => {\r\n      if (jsPlumb) {\r\n        jsPlumb.deleteEndpoint(task?.id + \"-Left\");\r\n        jsPlumb.deleteEndpoint(task?.id + \"-Right\");\r\n      }\r\n    };\r\n  }, [jsPlumb, task?.id]);\r\n  useHover(barRef, jsPlumb, task.id, action);\r\n  const handleHeight = task.height - 10;\r\n  return (\r\n    <g ref={barRef} className={styles.barWrapper} tabIndex={0}>\r\n      {!isLog && isDateChangeable && (\r\n        <g className=\"barHandle\">\r\n          <rect\r\n            x={task.x1 - 20}\r\n            y={task.y - 6}\r\n            width={task.x2 - task.x1 + 40}\r\n            height={task.height + 12}\r\n            className={`barHandle ${styles.barHandleBackground}`}\r\n            ry={task.barCornerRadius}\r\n            rx={task.barCornerRadius}\r\n          />\r\n        </g>\r\n      )}\r\n\r\n      <BarDisplay\r\n        id={isLog ? `${task.id}-log` : task.id}\r\n        isLog={isLog}\r\n        x={task.x1}\r\n        y={task.y}\r\n        task={task}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressWidth={progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={!isLog ? task.styles : { ...task.styles, opacity: 0.5 }}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && !isLog && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isDateChangeable && !isLog && (\r\n          <g>\r\n            {/* left */}\r\n            <BarDateHandle\r\n              x={task.x1}\r\n              y={task.y}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              type=\"left\"\r\n              onMouseDown={e => {\r\n                onEventStart(\"start\", task, e);\r\n              }}\r\n            />\r\n            {/* right */}\r\n            <BarDateHandle\r\n              x={task.x2 - task.handleWidth}\r\n              y={task.y}\r\n              width={task.handleWidth}\r\n              height={handleHeight}\r\n              type=\"right\"\r\n              onMouseDown={e => {\r\n                onEventStart(\"end\", task, e);\r\n              }}\r\n            />\r\n          </g>\r\n        )}\r\n        {isProgressChangeable && !isLog && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","export const base64Milestone =\r\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATpJREFUeNqslUEOATEUQL9exDiARCJhRYRbIDE2HIONA4iVFYux5gISYmfnBizsrViO32qbwZj+tn7yTTqdeW865v9CHMdgk51mHNhcn+M/lOi2YIyHEDOPucccR1vYme4jCRC+xEMvZaqPkmXWvcwG3h4ATCOASk1PL3A+dBZ8wqv11/nOkC5htnAVVAlzgdtImCucKmE+cIqE+cJNElEHsohGrvBkrOYAx4MeFtQKwn/A1UqKZT0MGT59IMvfG64iISgxLPWz7C1ieb5xvQCsIz3cqFfE/wPx7nwkHD6bADzuYnjifUoIZFfs+0g+4ZiNt89UdkUnSRocebevQnORZMFTW4WNxAT/2ewoEgo8s11nSahw0pYpe8pCFRBP/p1T4DZ7spYkwggnC6QkkD2rxCvUtNmreAowAEKnBro8dl0wAAAAAElFTkSuQmCC\";\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./milestone.module.css\";\r\nimport { useHover, useAddPoint } from \"../../task-item/hook\";\r\nimport { base64Milestone } from \"./utils\";\r\nexport const Milestone: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  // isSelected,\r\n  jsPlumb,\r\n  setPointInited,\r\n  ganttEvent = {\r\n    action: \"\",\r\n  },\r\n}) => {\r\n  const barRef = useRef<any>(null);\r\n  const { action } = ganttEvent;\r\n  // 设置端点\r\n  const addPointFinished = useAddPoint(jsPlumb, task, barRef, \"milestone\");\r\n  useEffect(() => {\r\n    if (addPointFinished) {\r\n      setPointInited?.(addPointFinished);\r\n    }\r\n  }, [addPointFinished, setPointInited]);\r\n  useHover(barRef, jsPlumb, task.id, action);\r\n  useEffect(() => {\r\n    if (jsPlumb) {\r\n      // 重绘元素，解决拖动时间块连接点跟随\r\n      jsPlumb.revalidate(task.id);\r\n    }\r\n  }, [jsPlumb, task]);\r\n  useEffect(() => {\r\n    return () => {\r\n      if (jsPlumb) {\r\n        jsPlumb.deleteEndpoint(task.id + \"-Left\");\r\n        jsPlumb.deleteEndpoint(task.id + \"-Right\");\r\n      }\r\n    };\r\n  }, [jsPlumb, task.id]);\r\n  // const points = useMemo(() => {\r\n  //   return `${task.x1},${task.y + 12.5} ${task.x1 + 12.5},${task.y - 12.5} ${\r\n  //     task.x1 + 25\r\n  //   },${task.y - 12.5} ${task.x1 + 25},${task.y + 12.5}`;\r\n  // }, [task]);\r\n  return (\r\n    <g ref={barRef} tabIndex={0} className={styles.milestoneWrapper}>\r\n      {/* TODO:里程碑的竖线由于层级显示有问题，暂时去掉 */}\r\n      {/* <line\r\n        x1={task.x1 + task.height / 2}\r\n        y1=\"0\"\r\n        x2={task.x1 + task.height / 2}\r\n        y2={task.y < Number(taskListHeight) ? taskListHeight : task.y}\r\n        style={{ stroke: \"#5B42FF\", strokeWidth: \".5\" }}\r\n      /> */}\r\n      <rect\r\n        id={task.id}\r\n        fill=\"transparent\"\r\n        x={task.x1}\r\n        width={task.height}\r\n        y={task.y}\r\n        height={task.height}\r\n        className={styles.milestoneBackground}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <image\r\n        href={base64Milestone}\r\n        x={task.x1 + task.height / 6}\r\n        y={task.y + task.height / 6}\r\n        width={(task.height * 2) / 3}\r\n        height={(task.height * 2) / 3}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { progressWithByParams } from \"../../../helpers/bar-helper\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./project.module.css\";\r\n\r\nexport const Project: React.FC<TaskItemProps> = ({ task, isSelected }) => {\r\n  const barColor = isSelected\r\n    ? task.styles.backgroundSelectedColor\r\n    : task.styles.backgroundColor;\r\n  const processColor = isSelected\r\n    ? task.styles.progressSelectedColor\r\n    : task.styles.progressColor;\r\n  const progressWidth = progressWithByParams(task.x1, task.x2, task.progress);\r\n  const projectWith = task.x2 - task.x1;\r\n\r\n  const projectLeftTriangle = [\r\n    task.x1,\r\n    task.y + task.height / 2 - 1,\r\n    task.x1,\r\n    task.y + task.height,\r\n    task.x1 + 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n  const projectRightTriangle = [\r\n    task.x2,\r\n    task.y + task.height / 2 - 1,\r\n    task.x2,\r\n    task.y + task.height,\r\n    task.x2 - 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.projectWrapper}>\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectBackground}\r\n      />\r\n      <rect\r\n        x={task.x1}\r\n        width={progressWidth}\r\n        y={task.y}\r\n        height={task.height}\r\n        ry={task.barCornerRadius}\r\n        rx={task.barCornerRadius}\r\n        fill={processColor}\r\n      />\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height / 2}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectTop}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectLeftTriangle}\r\n        fill={barColor}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectRightTriangle}\r\n        fill={barColor}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport {\r\n  GanttContentMoveAction,\r\n  GanttEvent,\r\n} from \"../../types/gantt-task-actions\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { BarSmall } from \"./bar/bar-small\";\r\nimport { BarParent } from \"./bar/bar-parent\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\n\r\nexport type TaskItemProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  taskHeight: number;\r\n  isProgressChangeable: boolean;\r\n  isDateChangeable: boolean;\r\n  isDelete: boolean;\r\n  isSelected: boolean;\r\n  onEventStart: (\r\n    action: GanttContentMoveAction,\r\n    selectedTask: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => any;\r\n  jsPlumb?: any;\r\n  isLog?: boolean | undefined;\r\n  taskListHeight?: number;\r\n  setPointInited?: (value: boolean) => void;\r\n  isMoving?: boolean;\r\n  ganttEvent?: GanttEvent;\r\n};\r\n\r\nexport const TaskItem: React.FC<TaskItemProps> = props => {\r\n  const { task, isDelete, isSelected, onEventStart, jsPlumb } = props;\r\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\r\n\r\n  useEffect(() => {\r\n    switch (task.typeInternal) {\r\n      case \"milestone\":\r\n        setTaskItem(<Milestone {...props} />);\r\n        break;\r\n      case \"project\":\r\n        setTaskItem(<Project {...props} />);\r\n        break;\r\n      case \"smalltask\":\r\n        setTaskItem(<BarSmall {...props} />);\r\n        break;\r\n      case \"parent\":\r\n        setTaskItem(<BarParent {...props} />);\r\n        break;\r\n      default:\r\n        setTaskItem(<Bar {...props} />);\r\n        break;\r\n    }\r\n  }, [task, isSelected, jsPlumb, props]);\r\n\r\n  return (\r\n    <g\r\n      onKeyDown={e => {\r\n        switch (e.key) {\r\n          case \"Delete\": {\r\n            if (isDelete) onEventStart(\"delete\", task, e);\r\n            break;\r\n          }\r\n        }\r\n        e.stopPropagation();\r\n      }}\r\n      onMouseEnter={e => {\r\n        onEventStart(\"mouseenter\", task, e);\r\n      }}\r\n      onMouseLeave={e => {\r\n        onEventStart(\"mouseleave\", task, e);\r\n      }}\r\n      onDoubleClick={e => {\r\n        onEventStart(\"dblclick\", task, e);\r\n      }}\r\n      onClick={e => {\r\n        onEventStart(\"click\", task, e);\r\n      }}\r\n      onFocus={() => {\r\n        onEventStart(\"select\", task);\r\n      }}\r\n    >\r\n      {taskItem}\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { BarSmall } from \"./bar/bar-small\";\r\nimport { BarParent } from \"./bar/bar-parent\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\n\r\nexport type TaskItemProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  taskHeight: number;\r\n  isProgressChangeable: boolean;\r\n  isDateChangeable: boolean;\r\n  isDelete: boolean;\r\n  isSelected: boolean;\r\n  onEventStart: (\r\n    action: GanttContentMoveAction,\r\n    selectedTask: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => any;\r\n  jsPlumb?: any;\r\n  isLog?: boolean | undefined;\r\n};\r\n\r\nexport const TaskItemLog: React.FC<TaskItemProps> = props => {\r\n  const { task, onEventStart, isSelected, jsPlumb } = {\r\n    ...props,\r\n  };\r\n\r\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\r\n\r\n  useEffect(() => {\r\n    switch (task.typeInternal) {\r\n      case \"milestone\":\r\n        setTaskItem(<Milestone {...props} />);\r\n        break;\r\n      case \"project\":\r\n        setTaskItem(<Project {...props} />);\r\n        break;\r\n      case \"smalltask\":\r\n        setTaskItem(<BarSmall {...props} />);\r\n        break;\r\n      case \"parent\":\r\n        setTaskItem(<BarParent {...props} />);\r\n        break;\r\n      default:\r\n        setTaskItem(<Bar {...props} />);\r\n        break;\r\n    }\r\n  }, [task, isSelected, jsPlumb]);\r\n\r\n  return (\r\n    <g\r\n      onClick={e => {\r\n        onEventStart(\"click\", task, e);\r\n      }}\r\n    >\r\n      {taskItem}\r\n    </g>\r\n  );\r\n};\r\n","import React, {\r\n  useEffect,\r\n  useState,\r\n  useContext,\r\n  useCallback,\r\n  memo,\r\n} from \"react\";\r\nimport { EventOption, ConnectionProps } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Arrow } from \"../other/arrow\";\r\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\r\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\r\nimport {\r\n  errorLinkBorderColor,\r\n  pivotalPathLinkBorderColor,\r\n} from \"../../helpers/dicts\";\r\nimport { TaskItem } from \"../task-item/task-item\";\r\nimport { TaskItemLog } from \"../task-item/task-item-log\";\r\nimport { GanttConfigContext } from \"../../contsxt\";\r\nimport { filter, isEqual } from \"lodash\";\r\nimport {\r\n  offsetCalculators,\r\n  sizeCalculators,\r\n  relationReverse,\r\n  relationInit,\r\n} from \"../../helpers/jsPlumbConfig\";\r\nimport {\r\n  BarMoveAction,\r\n  GanttContentMoveAction,\r\n  GanttEvent,\r\n} from \"../../types/gantt-task-actions\";\r\nimport { message } from \"antd\";\r\n\r\nexport type TaskGanttContentProps = {\r\n  tasks: BarTask[];\r\n  logTasks: BarTask[];\r\n  dates: Date[];\r\n  ganttEvent: GanttEvent;\r\n  selectedTask: BarTask | undefined;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  timeStep: number;\r\n  svg?: React.RefObject<SVGSVGElement>;\r\n  svgWidth: number;\r\n  taskHeight: number;\r\n  arrowColor: string;\r\n  arrowIndent: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  setGanttEvent: (value: GanttEvent) => void;\r\n  setFailedTask: (value: BarTask | null) => void;\r\n  setSelectedTask: (taskId: string) => void;\r\n  taskListHeight?: number;\r\n  clickBaselineItem?: (offsetX: number, currentLogItem: BarTask) => void;\r\n  isConnect?: boolean;\r\n  containerRef?: React.MutableRefObject<any>;\r\n} & EventOption &\r\n  ConnectionProps;\r\n\r\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = memo(\r\n  ({\r\n    tasks,\r\n    logTasks,\r\n    dates,\r\n    ganttEvent,\r\n    selectedTask,\r\n    rowHeight,\r\n    columnWidth,\r\n    timeStep,\r\n    svg,\r\n    taskHeight,\r\n    arrowColor,\r\n    arrowIndent,\r\n    fontFamily,\r\n    fontSize,\r\n    setGanttEvent,\r\n    setFailedTask,\r\n    setSelectedTask,\r\n    onDateChange,\r\n    onProgressChange,\r\n    onDoubleClick,\r\n    onDelete,\r\n    addConnection,\r\n    itemLinks,\r\n    taskListHeight,\r\n    clickBaselineItem,\r\n    isConnect,\r\n    setCurrentConnection,\r\n    currentConnection,\r\n    containerRef,\r\n  }) => {\r\n    const [connectUuids, setConnectUuids] = useState([]);\r\n    const point = svg?.current?.createSVGPoint();\r\n    const [xStep, setXStep] = useState(0);\r\n    const [initEventX1Delta, setInitEventX1Delta] = useState(0);\r\n    // 是否正在拖动时间bar\r\n    const [isMoving, setIsMoving] = useState(false);\r\n    // 是否正在连线\r\n    const [jsPlumbInstance, setJsPlumbInstance] = useState<any>(null);\r\n    const { ganttConfig } = useContext(GanttConfigContext);\r\n    const [pointInited, setPointInited] = useState(false);\r\n\r\n    useEffect(() => {\r\n      const connectClickHandle = () => {\r\n        if (currentConnection) {\r\n          currentConnection?.connection?.removeClass(\"select-connection\");\r\n          setCurrentConnection?.(null);\r\n        }\r\n      };\r\n      const container = containerRef?.current;\r\n      container?.addEventListener(\"click\", connectClickHandle, true);\r\n      return () => {\r\n        container?.removeEventListener(\"click\", connectClickHandle, true);\r\n      };\r\n    }, [containerRef, setCurrentConnection, currentConnection]);\r\n    useEffect(() => {\r\n      if (!currentConnection && jsPlumbInstance) {\r\n        const connections = jsPlumbInstance.getConnections();\r\n        connections.forEach((ele: any) => {\r\n          ele.removeClass(\"select-connection\");\r\n        });\r\n      }\r\n    }, [currentConnection, jsPlumbInstance]);\r\n    useEffect(() => {\r\n      const dateDelta =\r\n        dates[1].getTime() -\r\n        dates[0].getTime() -\r\n        dates[1].getTimezoneOffset() * 60 * 1000 +\r\n        dates[0].getTimezoneOffset() * 60 * 1000;\r\n      const newXStep = (timeStep * columnWidth) / dateDelta;\r\n      setXStep(newXStep);\r\n    }, [columnWidth, dates, timeStep]);\r\n\r\n    useEffect(() => {\r\n      const handleMouseMove = async (event: MouseEvent) => {\r\n        if (!ganttEvent.changedTask || !point || !svg?.current) return;\r\n        event.preventDefault();\r\n\r\n        point.x = event.clientX;\r\n        const cursor = point.matrixTransform(\r\n          svg?.current.getScreenCTM()?.inverse()\r\n        );\r\n\r\n        const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\r\n          cursor.x,\r\n          ganttEvent.action as BarMoveAction,\r\n          ganttEvent.changedTask,\r\n          xStep,\r\n          timeStep,\r\n          initEventX1Delta\r\n        );\r\n        if (isChanged) {\r\n          setGanttEvent({ action: ganttEvent.action, changedTask });\r\n        }\r\n      };\r\n\r\n      const handleMouseUp = async (event: MouseEvent) => {\r\n        const { action, originalSelectedTask, changedTask } = ganttEvent;\r\n        if (!changedTask || !point || !svg?.current || !originalSelectedTask)\r\n          return;\r\n        event.preventDefault();\r\n\r\n        point.x = event.clientX;\r\n        const cursor = point.matrixTransform(\r\n          svg?.current.getScreenCTM()?.inverse()\r\n        );\r\n        const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\r\n          cursor.x,\r\n          action as BarMoveAction,\r\n          changedTask,\r\n          xStep,\r\n          timeStep,\r\n          initEventX1Delta\r\n        );\r\n\r\n        const isNotLikeOriginal =\r\n          originalSelectedTask.start !== newChangedTask.start ||\r\n          originalSelectedTask.end !== newChangedTask.end ||\r\n          originalSelectedTask.progress !== newChangedTask.progress;\r\n\r\n        // remove listeners\r\n        svg.current.removeEventListener(\"mousemove\", handleMouseMove);\r\n        svg.current.removeEventListener(\"mouseup\", handleMouseUp);\r\n        setGanttEvent({ action: \"\" });\r\n        setIsMoving(false);\r\n\r\n        // custom operation start\r\n        let operationSuccess = true;\r\n        if (\r\n          (action === \"move\" || action === \"end\" || action === \"start\") &&\r\n          onDateChange &&\r\n          isNotLikeOriginal\r\n        ) {\r\n          try {\r\n            const result = await onDateChange(newChangedTask);\r\n            if (result !== undefined) {\r\n              operationSuccess = result;\r\n            }\r\n          } catch (error) {\r\n            operationSuccess = false;\r\n          }\r\n        } else if (onProgressChange && isNotLikeOriginal) {\r\n          try {\r\n            const result = await onProgressChange(newChangedTask);\r\n            if (result !== undefined) {\r\n              operationSuccess = result;\r\n            }\r\n          } catch (error) {\r\n            operationSuccess = false;\r\n          }\r\n        }\r\n\r\n        // If operation is failed - return old state\r\n        if (!operationSuccess) {\r\n          setFailedTask(originalSelectedTask);\r\n        }\r\n      };\r\n\r\n      if (\r\n        !isMoving &&\r\n        [\"move\", \"end\", \"start\", \"progress\"].includes(ganttEvent.action) &&\r\n        svg?.current\r\n      ) {\r\n        svg.current.addEventListener(\"mousemove\", handleMouseMove);\r\n        svg.current.addEventListener(\"mouseup\", handleMouseUp);\r\n        setIsMoving(true);\r\n      }\r\n    }, [\r\n      ganttEvent,\r\n      xStep,\r\n      initEventX1Delta,\r\n      onProgressChange,\r\n      timeStep,\r\n      onDateChange,\r\n      svg,\r\n      isMoving,\r\n      point,\r\n      setFailedTask,\r\n      setGanttEvent,\r\n    ]);\r\n\r\n    /**\r\n     * Method is Start point of task change\r\n     */\r\n    const handleBarEventStart = useCallback(\r\n      async (\r\n        action: GanttContentMoveAction,\r\n        task: BarTask,\r\n        event?: React.MouseEvent | React.KeyboardEvent\r\n      ) => {\r\n        if (!event) {\r\n          if (action === \"select\") {\r\n            setSelectedTask(task.id);\r\n          }\r\n        }\r\n        // Keyboard events\r\n        else if (isKeyboardEvent(event)) {\r\n          if (action === \"delete\") {\r\n            if (onDelete) {\r\n              try {\r\n                const result = await onDelete(task);\r\n                if (result !== undefined && result) {\r\n                  setGanttEvent({ action, changedTask: task });\r\n                }\r\n              } catch (error) {\r\n                console.error(\"Error on Delete. \" + error);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        // Mouse Events\r\n        else if (action === \"mouseenter\") {\r\n          if (!ganttEvent.action) {\r\n            setGanttEvent({\r\n              action,\r\n              changedTask: task,\r\n              originalSelectedTask: task,\r\n            });\r\n          }\r\n        } else if (action === \"mouseleave\") {\r\n          setGanttEvent({ action: \"\" });\r\n        } else if (action === \"dblclick\") {\r\n          !!onDoubleClick && onDoubleClick(task);\r\n        } else if (action === \"click\") {\r\n          const offsetX = event?.nativeEvent?.offsetX;\r\n          // 当前基线时间块对应的item\r\n          const currentLogItem = tasks.filter(\r\n            (ele: BarTask) => ele.id === task.id\r\n          );\r\n          // item的开始时间和结束时间为空时，点击基线时间块可以添加时间\r\n          if (!(currentLogItem?.[0]?.end && currentLogItem?.[0]?.start)) {\r\n            clickBaselineItem?.(offsetX, currentLogItem[0]);\r\n          }\r\n          setGanttEvent({ action, changedTask: task });\r\n        }\r\n        // Change task event start\r\n        else if (action === \"move\") {\r\n          if (!svg?.current || !point) return;\r\n          point.x = event.clientX;\r\n          const cursor = point.matrixTransform(\r\n            svg.current.getScreenCTM()?.inverse()\r\n          );\r\n          setInitEventX1Delta(cursor.x - task.x1);\r\n          setGanttEvent({\r\n            action,\r\n            changedTask: task,\r\n            originalSelectedTask: task,\r\n          });\r\n        } else {\r\n          setGanttEvent({\r\n            action,\r\n            changedTask: task,\r\n            originalSelectedTask: task,\r\n          });\r\n        }\r\n      },\r\n      [\r\n        ganttEvent.action,\r\n        onDelete,\r\n        onDoubleClick,\r\n        point,\r\n        setGanttEvent,\r\n        setSelectedTask,\r\n        svg,\r\n        clickBaselineItem,\r\n        tasks,\r\n      ]\r\n    );\r\n    const getLinkTypeId = useCallback(\r\n      (start: string, end: string) => {\r\n        const linkType = relationReverse(start, end);\r\n        return ganttConfig.relation[linkType];\r\n      },\r\n      [ganttConfig.relation]\r\n    );\r\n\r\n    const getHasLinkItems = useCallback(task => {\r\n      // 获取与当前事项有关联关系的事项列表\r\n      const hasLinkItems = task?.link || {};\r\n      let needUpdateItems: string[] = [];\r\n      Object.keys(hasLinkItems).map(type => {\r\n        if (hasLinkItems[type]) {\r\n          Object.keys(hasLinkItems[type]).map(linkType => {\r\n            if (hasLinkItems[type][linkType]) {\r\n              needUpdateItems = needUpdateItems.concat(\r\n                hasLinkItems[type][linkType]\r\n              );\r\n            }\r\n          });\r\n        }\r\n      });\r\n      return needUpdateItems;\r\n    }, []);\r\n\r\n    const checkIsPivotalPathLink = useCallback(\r\n      (task, target, tasks, relationType) => {\r\n        const targetPivotalPathItem = tasks.filter(\r\n          (ele: BarTask) => ele.id === target && ele?.isPivotalPathItem\r\n        );\r\n        if (\r\n          task?.isPivotalPathItem &&\r\n          targetPivotalPathItem?.length &&\r\n          relationType === \"FS\"\r\n        ) {\r\n          return true;\r\n        }\r\n        return false;\r\n      },\r\n      []\r\n    );\r\n\r\n    const checkIsErrorLink = useCallback(\r\n      (task, target) => {\r\n        // 获取与当前事项有关联关系的事项列表\r\n        const needUpdateItems = getHasLinkItems(task);\r\n        // 获取当前事项的子代事项\r\n        const subItems: string[] = task?.item?.subItem || [];\r\n\r\n        let flag = false;\r\n        // 关联关系为目标节点的事项\r\n        const targetItems = needUpdateItems.filter(id => id === target);\r\n        if (targetItems?.length > 1) {\r\n          flag = true;\r\n          return flag;\r\n        }\r\n        // 父子存在关联关系\r\n        if ((task?.item?.ancestors || []).includes(target)) {\r\n          flag = true;\r\n          return flag;\r\n        }\r\n        subItems.forEach(item => {\r\n          if (needUpdateItems.includes(item)) {\r\n            flag = true;\r\n          }\r\n        });\r\n        return flag;\r\n      },\r\n      [getHasLinkItems]\r\n    );\r\n    useEffect(() => {\r\n      if (isConnect) {\r\n        import(\"jsplumb\").then(({ jsPlumb }: any) => {\r\n          jsPlumb.ready(() => {\r\n            const instance = jsPlumb.getInstance();\r\n            instance.fire(\"jsPlumbDemoLoaded\", instance);\r\n            setJsPlumbInstance(instance);\r\n          });\r\n        });\r\n      }\r\n    }, [isConnect]);\r\n    useEffect(() => {\r\n      if (jsPlumbInstance) {\r\n        const originalOffset = jsPlumbInstance.getOffset;\r\n        const originalSize = jsPlumbInstance.getSize;\r\n        jsPlumbInstance.getOffset = function (el: any) {\r\n          const tn = el.tagName.toUpperCase();\r\n          if (offsetCalculators[tn]) {\r\n            return offsetCalculators[tn](el);\r\n          } else return originalOffset.apply(this, [el]);\r\n        };\r\n        jsPlumbInstance.getSize = function (el: any) {\r\n          const tn = el.tagName.toUpperCase();\r\n          if (sizeCalculators[tn]) {\r\n            return sizeCalculators[tn](el);\r\n          } else return originalSize.apply(this, [el]);\r\n        };\r\n        jsPlumbInstance.setContainer(\"horizontalContainer\");\r\n        // 连线前校验\r\n        jsPlumbInstance.bind(\"beforeDrop\", (conn: any) => {\r\n          const taskSource = filter(tasks, { id: conn.sourceId })[0];\r\n          const taskTarget = filter(tasks, { id: conn.targetId })[0];\r\n          if (!ganttConfig.relation) {\r\n            message.warning(\"未配置关联关系\");\r\n            return;\r\n          }\r\n          if (conn.targetId === conn.sourceId) {\r\n            message.warning(\"连线有误\");\r\n            return;\r\n          }\r\n          // 父卡片和子卡片不能相互连接，其他类型待定\r\n          if (\r\n            (taskSource?.item?.subItem || []).includes(taskTarget?.id) ||\r\n            (taskTarget?.item?.subItem || []).includes(taskSource?.id)\r\n          ) {\r\n            message.warning(\"父子卡片之间不能存在关联关系\");\r\n            return;\r\n          }\r\n          // 两个卡片只能存在一种关联关系\r\n          const linkTypeId = getLinkTypeId(\r\n            conn.connection.endpoints[0].anchor.cssClass,\r\n            conn.dropEndpoint.anchor.cssClass\r\n          );\r\n          const currentLink = itemLinks?.filter((ele: any) => {\r\n            return (\r\n              ele.source?.objectId === conn?.sourceId &&\r\n              ele.destination?.objectId === conn?.targetId &&\r\n              ele.linkType?.objectId === linkTypeId\r\n            );\r\n          });\r\n          if (currentLink?.length) {\r\n            message.warning(\"连线有误\");\r\n            return false;\r\n          }\r\n          let sourceTask: BarTask | undefined;\r\n          let desinationTask: BarTask | undefined;\r\n          tasks.map(task => {\r\n            if (task.id === conn.sourceId) {\r\n              sourceTask = task;\r\n            }\r\n            if (task.id === conn.sourceId) {\r\n              desinationTask = task;\r\n            }\r\n          });\r\n          const hasLinkItems = getHasLinkItems(sourceTask);\r\n          // 两个事项有多条关联关系\r\n          if (hasLinkItems.includes(conn.targetId)) {\r\n            message.warning(\"连线有误\");\r\n            return false;\r\n          }\r\n          if (\r\n            desinationTask?.item?.subItem.includes(conn.sourceId) ||\r\n            sourceTask?.item?.subItem.includes(conn.targetId)\r\n          ) {\r\n            message.warning(\"连线有误\");\r\n            return false;\r\n          }\r\n          return true;\r\n        });\r\n        jsPlumbInstance.bind(\"connection\", (infor: any, originalEvent: any) => {\r\n          const linkTypeId = getLinkTypeId(\r\n            infor.connection.endpoints[0].anchor.cssClass,\r\n            infor.connection.endpoints[1].anchor.cssClass\r\n          );\r\n          const params = {\r\n            source: infor?.sourceId,\r\n            destination: infor?.targetId,\r\n            linkType: linkTypeId,\r\n          };\r\n          // init(infor.connection);\r\n          if (originalEvent) {\r\n            infor.connection.setData(linkTypeId);\r\n            addConnection?.(params);\r\n          }\r\n        });\r\n        jsPlumbInstance.bind(\"click\", (connection: any, originalEvent: any) => {\r\n          jsPlumbInstance.select().removeClass(\"select-connection\");\r\n          connection.addClass(\"select-connection\");\r\n          setCurrentConnection?.({\r\n            originalEvent: originalEvent,\r\n            connection: connection,\r\n          });\r\n        });\r\n      }\r\n      return () => {\r\n        if (jsPlumbInstance) {\r\n          jsPlumbInstance.unbind(\"beforeDrop\");\r\n          jsPlumbInstance.unbind(\"connection\");\r\n          jsPlumbInstance.unbind(\"click\");\r\n        }\r\n      };\r\n    }, [\r\n      jsPlumbInstance,\r\n      itemLinks,\r\n      tasks,\r\n      getHasLinkItems,\r\n      addConnection,\r\n      ganttConfig.relation,\r\n      getLinkTypeId,\r\n      setCurrentConnection,\r\n    ]);\r\n    useEffect(() => {\r\n      if (!itemLinks?.length) {\r\n        if (!isEqual(connectUuids, [])) {\r\n          setConnectUuids([]);\r\n        }\r\n      }\r\n\r\n      if (itemLinks?.length && tasks.length && jsPlumbInstance) {\r\n        const newConnectUuids: any = [];\r\n        tasks.forEach((task: any) => {\r\n          // 找到需要连线的卡片\r\n          const itemFilter = itemLinks?.filter((ele: any) => {\r\n            return ele.source?.objectId === task?.id;\r\n          });\r\n          itemFilter.forEach((ele: any) => {\r\n            let relationType = \"\";\r\n            for (const key in ganttConfig.relation) {\r\n              if (ganttConfig.relation[key] === ele.linkType?.objectId) {\r\n                relationType = key;\r\n                continue;\r\n              }\r\n            }\r\n            const isErrorLink = checkIsErrorLink(\r\n              task,\r\n              ele.destination?.objectId\r\n            );\r\n            const isPivotalPathLink = checkIsPivotalPathLink(\r\n              task,\r\n              ele.destination?.objectId,\r\n              tasks,\r\n              relationType\r\n            );\r\n            newConnectUuids.push({\r\n              source: ele.source?.objectId,\r\n              destination: ele.destination?.objectId,\r\n              relationType: relationType,\r\n              isErrorLink: isErrorLink,\r\n              isPivotalPathLink: isPivotalPathLink,\r\n            });\r\n          });\r\n        });\r\n        if (!isEqual(connectUuids, newConnectUuids)) {\r\n          setConnectUuids(newConnectUuids);\r\n        }\r\n      }\r\n    }, [\r\n      jsPlumbInstance,\r\n      itemLinks,\r\n      tasks,\r\n      connectUuids,\r\n      checkIsErrorLink,\r\n      checkIsPivotalPathLink,\r\n      ganttConfig.relation,\r\n      ganttConfig,\r\n    ]);\r\n    useEffect(() => {\r\n      // pointInited是连接点初始化完成的标志，解决jsPlumbInstance.connect连线时，由于连接点未初始化完成导致连线加载不出来\r\n      if (jsPlumbInstance && connectUuids.length && pointInited) {\r\n        jsPlumbInstance.setSuspendDrawing(true);\r\n        for (let i = 0; i < connectUuids.length; i++) {\r\n          const uuidObj = connectUuids[i];\r\n          const {\r\n            source,\r\n            destination,\r\n            relationType,\r\n            isErrorLink,\r\n            isPivotalPathLink,\r\n          } = uuidObj;\r\n          if (source && destination && relationType) {\r\n            const uuid = [\r\n              `${source}-${relationInit[relationType]?.[0]}`,\r\n              `${destination}-${relationInit[relationType]?.[1]}`,\r\n            ];\r\n            const connect = jsPlumbInstance.connect({\r\n              uuids: uuid,\r\n            });\r\n            // 给连线设置linkType\r\n            if (connect) {\r\n              if (isErrorLink) {\r\n                // 设置连线错误的颜色\r\n                connect.setPaintStyle({\r\n                  stroke: errorLinkBorderColor,\r\n                });\r\n              }\r\n              if (isPivotalPathLink) {\r\n                // 设置关键路径连线的颜色\r\n                connect.setPaintStyle({\r\n                  stroke: pivotalPathLinkBorderColor,\r\n                });\r\n              }\r\n              connect.setData(ganttConfig?.relation?.[relationType]);\r\n            }\r\n          }\r\n        }\r\n        jsPlumbInstance.setSuspendDrawing(false, true);\r\n      }\r\n\r\n      return () => {\r\n        if (jsPlumbInstance) {\r\n          jsPlumbInstance.deleteEveryConnection();\r\n        }\r\n      };\r\n    }, [jsPlumbInstance, ganttConfig?.relation, connectUuids, pointInited]);\r\n    return (\r\n      <g className=\"content\">\r\n        <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\r\n          {tasks.map(task => {\r\n            return task.barChildren.map(child => {\r\n              return (\r\n                <Arrow\r\n                  key={`Arrow from ${task.id} to ${tasks[child].id}`}\r\n                  taskFrom={task}\r\n                  taskTo={tasks[child]}\r\n                  rowHeight={rowHeight}\r\n                  taskHeight={taskHeight}\r\n                  arrowIndent={arrowIndent}\r\n                />\r\n              );\r\n            });\r\n          })}\r\n        </g>\r\n        <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\r\n          {tasks.map(task => {\r\n            const cuttentLog = logTasks.find(ele => ele.id === task.id);\r\n            if (cuttentLog) {\r\n              cuttentLog.y = task.y;\r\n            }\r\n            return (\r\n              <g key={`g-${task.id}`}>\r\n                {!cuttentLog?.start || !cuttentLog?.end ? null : (\r\n                  <TaskItemLog\r\n                    task={cuttentLog}\r\n                    arrowIndent={arrowIndent}\r\n                    taskHeight={taskHeight}\r\n                    isProgressChangeable={\r\n                      !!onProgressChange && !task.isDisabled\r\n                    }\r\n                    isDateChangeable={!!onDateChange && !task.isDisabled}\r\n                    isDelete={!task.isDisabled}\r\n                    onEventStart={handleBarEventStart}\r\n                    key={`${task.id}-log`}\r\n                    isSelected={!!selectedTask && task.id === selectedTask.id}\r\n                    isLog\r\n                  />\r\n                )}\r\n                {!task.start || !task.end ? null : (\r\n                  <TaskItem\r\n                    jsPlumb={jsPlumbInstance}\r\n                    task={task}\r\n                    arrowIndent={arrowIndent}\r\n                    taskHeight={taskHeight}\r\n                    isProgressChangeable={\r\n                      !!onProgressChange && !task.isDisabled\r\n                    }\r\n                    isDateChangeable={!!onDateChange && !task.isDisabled}\r\n                    isDelete={!task.isDisabled}\r\n                    onEventStart={handleBarEventStart}\r\n                    key={task.id}\r\n                    isSelected={!!selectedTask && task.id === selectedTask.id}\r\n                    taskListHeight={taskListHeight}\r\n                    setPointInited={setPointInited}\r\n                    isMoving={isMoving}\r\n                    ganttEvent={ganttEvent}\r\n                  />\r\n                )}\r\n              </g>\r\n            );\r\n          })}\r\n        </g>\r\n      </g>\r\n    );\r\n  }\r\n);\r\n","import React, {\r\n  useRef,\r\n  forwardRef,\r\n  useImperativeHandle,\r\n  SyntheticEvent,\r\n  useContext,\r\n  memo,\r\n} from \"react\";\r\nimport { GridProps, Grid } from \"../grid/grid\";\r\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\r\nimport { TaskGanttArrows } from \"./task-gantt-arrows\";\r\nimport { scrollBarHeight, daySeconds } from \"../../helpers/dicts\";\r\nimport { ViewMode } from \"../../types/public-types\";\r\nimport { GanttConfigContext } from \"../../contsxt\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport dayjs from \"dayjs\";\r\n\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport type TaskGanttProps = {\r\n  gridProps: GridProps;\r\n  calendarProps: CalendarProps;\r\n  barProps: TaskGanttContentProps;\r\n  ganttHeight: number;\r\n  scrollX: number;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n  taskListHieght?: number;\r\n  listBottomHeight?: number;\r\n  taskListHeight?: number;\r\n  headerHeight: number;\r\n  // onMouseMove: (event: React.MouseEvent<HTMLDivElement>) => void;\r\n};\r\nconst TaskGanttComponent: React.ForwardRefRenderFunction<\r\n  any,\r\n  TaskGanttProps\r\n> = (\r\n  {\r\n    gridProps,\r\n    calendarProps,\r\n    barProps,\r\n    scrollX,\r\n    onScroll,\r\n    taskListHeight,\r\n    listBottomHeight,\r\n    headerHeight,\r\n  },\r\n\r\n  ref\r\n) => {\r\n  const { dates, onDateChange, columnWidth } = gridProps;\r\n  const { viewMode } = calendarProps;\r\n  const { ganttConfig } = useContext(GanttConfigContext);\r\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\r\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\r\n  useImperativeHandle(ref, () => ({\r\n    horizontalContainerRef: horizontalContainerRef.current,\r\n    verticalGanttContainerRef: verticalGanttContainerRef.current,\r\n  }));\r\n  const clickBaselineItem = (offsetX: number, currentLogItem: BarTask) => {\r\n    let startDate, endDate;\r\n    if (viewMode === ViewMode.Day) {\r\n      startDate = dayjs(\r\n        dates[0].valueOf() + (offsetX / columnWidth) * daySeconds\r\n      );\r\n      endDate = dayjs(\r\n        dates[0].valueOf() + (offsetX / columnWidth) * daySeconds + daySeconds\r\n      );\r\n      onDateChange?.(\r\n        Object.assign(currentLogItem, {\r\n          start: ganttConfig?.time?.length\r\n            ? startDate?.startOf(\"day\").toDate()\r\n            : null,\r\n          end: ganttConfig?.time?.length\r\n            ? endDate?.startOf(\"day\").toDate()\r\n            : null,\r\n        })\r\n      );\r\n    }\r\n  };\r\n  return (\r\n    <div\r\n      className={styles.ganttVerticalContainer}\r\n      ref={verticalGanttContainerRef}\r\n      onScroll={onScroll}\r\n      style={{\r\n        marginBottom: `${listBottomHeight}px`,\r\n      }}\r\n    >\r\n      <div style={{ height: `${headerHeight}px` }}>\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={gridProps.svgWidth}\r\n          height={calendarProps.headerHeight}\r\n          fontFamily={barProps.fontFamily}\r\n        >\r\n          <Calendar {...calendarProps} />\r\n        </svg>\r\n      </div>\r\n      <div\r\n        id=\"horizontalContainer\"\r\n        ref={horizontalContainerRef}\r\n        className={styles.horizontalContainer}\r\n        style={{ width: gridProps.svgWidth }}\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={gridProps.svgWidth}\r\n          height={\r\n            barProps.rowHeight * barProps.tasks.length < Number(taskListHeight)\r\n              ? taskListHeight\r\n              : barProps.rowHeight * barProps.tasks.length + scrollBarHeight\r\n          }\r\n          fontFamily={barProps.fontFamily}\r\n          ref={ganttSVGRef}\r\n          style={{ position: \"relative\" }}\r\n        >\r\n          <Grid\r\n            {...gridProps}\r\n            viewMode={calendarProps.viewMode}\r\n            scrollX={scrollX}\r\n            taskListHeight={taskListHeight}\r\n          />\r\n          <TaskGanttContent\r\n            {...newBarProps}\r\n            taskListHeight={taskListHeight}\r\n            clickBaselineItem={clickBaselineItem}\r\n            containerRef={horizontalContainerRef}\r\n          />\r\n        </svg>\r\n\r\n        {false && (\r\n          <div className={styles.contextContainer}>\r\n            {newBarProps.tasks.map(task => {\r\n              if (!task.start || !task.end) {\r\n                return null;\r\n              }\r\n              return (\r\n                <TaskGanttArrows key={task.id} {...newBarProps} task={task} />\r\n              );\r\n            })}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const TaskGantt = memo(forwardRef(TaskGanttComponent));\r\n","import React, { SyntheticEvent, forwardRef, memo } from \"react\";\r\nimport styles from \"./horizontal-scroll.module.css\";\r\n\r\nexport const HorizontalScrollComponent: React.ForwardRefRenderFunction<\r\n  any,\r\n  {\r\n    svgWidth: number;\r\n    taskListWidth: number;\r\n    listBottomHeight: number;\r\n    onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n  }\r\n> = ({ svgWidth, taskListWidth, onScroll, listBottomHeight }, ref) => {\r\n  const dividerWidth = 15;\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        marginLeft: taskListWidth + dividerWidth,\r\n        width: `calc(100% - ${taskListWidth}px)`,\r\n        bottom: `${listBottomHeight}px`,\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={ref}\r\n    >\r\n      <div style={{ width: svgWidth, height: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const HorizontalScroll = memo(forwardRef(HorizontalScrollComponent));\r\n","import React, { useEffect, useContext, useState } from \"react\";\r\nimport { Modal, Form, Select } from \"antd\";\r\nimport { ConfigHandleContext } from \"../../contsxt\";\r\nimport { TimeItemProps, FieldAndItemProps } from \"../../types/public-types\";\r\nimport styles from \"./index.module.css\";\r\nimport { find, omit } from \"lodash\";\r\nimport { OptionData, OptionGroupData } from \"rc-select/lib/interface\";\r\nconst { Option } = Select;\r\n\r\nconst filterOption = (\r\n  input: string,\r\n  option: OptionData | OptionGroupData | undefined\r\n): boolean => {\r\n  return option?.name?.toLowerCase().indexOf(input?.toLowerCase()) > -1;\r\n};\r\n// 筛选某一类型的字段\r\nexport const filterFields = (\r\n  type: string,\r\n  customField: FieldAndItemProps[]\r\n) => {\r\n  return customField.filter((ele: FieldAndItemProps) => {\r\n    return ele?.fieldType?.key === type;\r\n  });\r\n};\r\n// 过滤不存在的字段\r\nexport const filterDeleteFields = (\r\n  id: string | undefined,\r\n  customField: FieldAndItemProps[]\r\n) => {\r\n  const filterData = find(customField, { objectId: id });\r\n  return filterData ? filterData.objectId : null;\r\n};\r\ninterface ItemModalProps {\r\n  visible: boolean;\r\n  handleCancel: () => void;\r\n  handleOk: (values: TimeItemProps) => void;\r\n  currentItem: TimeItemProps;\r\n  timeList?: TimeItemProps[];\r\n}\r\nconst ItemModal: React.FC<ItemModalProps> = ({\r\n  visible,\r\n  handleCancel,\r\n  handleOk,\r\n  currentItem,\r\n  timeList,\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  const { itemTypeData, getCustomFields } = useContext(ConfigHandleContext);\r\n  // 设置isSelected变量，避免切换事项类型变化时引起form.setFieldsValue触发\r\n  const [isSelected, setIsSelected] = useState(false);\r\n  const [customField, setCustomField] = useState([]);\r\n  const [confirmLoading, setConfirmLoading] = useState(false);\r\n  // 筛选字段类型为日期和数值的字段\r\n  useEffect(() => {\r\n    if (visible) {\r\n      if (isSelected) {\r\n        return;\r\n      }\r\n      form.resetFields();\r\n      form.setFieldsValue({\r\n        endDate: filterDeleteFields(currentItem.endDate, customField),\r\n        itemType: filterDeleteFields(`${currentItem.itemType}`, itemTypeData),\r\n        percentage: filterDeleteFields(currentItem.percentage, customField),\r\n        startDate: filterDeleteFields(currentItem.startDate, customField),\r\n        isDefault: currentItem.isDefault,\r\n      });\r\n    }\r\n  }, [visible, currentItem, form, customField, itemTypeData, isSelected]);\r\n  useEffect(() => {\r\n    const fetch = async (currentItem: TimeItemProps) => {\r\n      const fields = await getCustomFields(currentItem);\r\n      setCustomField(fields);\r\n    };\r\n    if (visible) {\r\n      fetch(currentItem);\r\n    }\r\n  }, [visible, getCustomFields, currentItem]);\r\n  useEffect(() => {\r\n    if (!visible) {\r\n      setIsSelected(false);\r\n    }\r\n  }, [visible]);\r\n  const handleConfirm = () => {\r\n    form\r\n      .validateFields()\r\n      .then(async values => {\r\n        // 保存时对已经删除的字段清空处理\r\n        const fields = await getCustomFields(currentItem);\r\n        Object.keys(omit(values, [\"itemType\"])).forEach(ele => {\r\n          const fileldFilter = fields.filter(\r\n            (f: FieldAndItemProps) => f.objectId === values[ele]\r\n          );\r\n          if (!fileldFilter.length) {\r\n            const obj = {};\r\n            obj[ele] = null;\r\n            form.setFieldsValue(obj);\r\n          }\r\n        });\r\n        form.validateFields().then(async () => {\r\n          setConfirmLoading(true);\r\n          await handleOk(values);\r\n          setConfirmLoading(false);\r\n        });\r\n      })\r\n      .catch(info => {\r\n        console.log(\"Validate Failed:\", info);\r\n      });\r\n  };\r\n  const itemCheck = (_: any, value: string) => {\r\n    if (value) {\r\n      const itemFilter = timeList?.filter(item => item.itemType === value);\r\n      if (itemFilter?.length && currentItem.itemType !== value) {\r\n        return Promise.reject(new Error(\"该事项类型已选择， 请重新选择\"));\r\n      }\r\n      return Promise.resolve();\r\n    } else {\r\n      return Promise.resolve();\r\n    }\r\n  };\r\n  const handelChange = async (val: string) => {\r\n    setIsSelected(true);\r\n    const fields = await getCustomFields({ itemType: val });\r\n    setCustomField(fields);\r\n    form.setFieldsValue({\r\n      startDate: undefined,\r\n      endDate: undefined,\r\n      percentage: undefined,\r\n    });\r\n  };\r\n  return (\r\n    <Modal\r\n      title=\"时间字段配置\"\r\n      visible={visible}\r\n      onOk={handleConfirm}\r\n      onCancel={handleCancel}\r\n      cancelText=\"取消\"\r\n      okText=\"确定\"\r\n      confirmLoading={confirmLoading}\r\n    >\r\n      <Form\r\n        form={form}\r\n        name=\"basic\"\r\n        labelCol={{ span: 24 }}\r\n        wrapperCol={{ span: 24 }}\r\n        layout=\"vertical\"\r\n      >\r\n        {!currentItem?.isDefault && (\r\n          <Form.Item\r\n            label=\"事项类型\"\r\n            name=\"itemType\"\r\n            rules={[\r\n              { required: true, message: \"请选择事项类型\" },\r\n              {\r\n                validator: itemCheck,\r\n              },\r\n            ]}\r\n          >\r\n            <Select placeholder=\"请选择\" onChange={handelChange}>\r\n              {itemTypeData.map((ele: FieldAndItemProps) => {\r\n                return (\r\n                  <Option value={ele.value} key={ele.value}>\r\n                    {ele.icon ? (\r\n                      <img src={ele.icon} className={styles.icon} />\r\n                    ) : null}\r\n                    {ele.label}\r\n                  </Option>\r\n                );\r\n              })}\r\n            </Select>\r\n          </Form.Item>\r\n        )}\r\n\r\n        <Form.Item\r\n          label=\"开始日期\"\r\n          name=\"startDate\"\r\n          rules={[{ required: true, message: \"请选择开始日期字段\" }]}\r\n        >\r\n          {/* 代码没有抽离，原因是会影响from的校验触发 */}\r\n          <Select\r\n            placeholder=\"请选择\"\r\n            showSearch\r\n            filterOption={filterOption}\r\n            allowClear\r\n          >\r\n            {filterFields(\"Date\", customField).map((ele: FieldAndItemProps) => {\r\n              return (\r\n                <Option value={ele.value} key={ele.value} name={ele.label}>\r\n                  {ele.label}\r\n                </Option>\r\n              );\r\n            })}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item\r\n          label=\"结束日期\"\r\n          name=\"endDate\"\r\n          rules={[{ required: true, message: \"请选择结束日期字段\" }]}\r\n        >\r\n          <Select\r\n            placeholder=\"请选择\"\r\n            allowClear\r\n            showSearch\r\n            filterOption={filterOption}\r\n          >\r\n            {filterFields(\"Date\", customField).map((ele: FieldAndItemProps) => {\r\n              return (\r\n                <Option value={ele.value} key={ele.value} name={ele.label}>\r\n                  {ele.label}\r\n                </Option>\r\n              );\r\n            })}\r\n          </Select>\r\n        </Form.Item>\r\n        <Form.Item label=\"完成占比\" name=\"percentage\">\r\n          <Select\r\n            placeholder=\"请选择\"\r\n            allowClear\r\n            showSearch\r\n            filterOption={filterOption}\r\n          >\r\n            {filterFields(\"Number\", customField).map(\r\n              (ele: FieldAndItemProps) => {\r\n                return (\r\n                  <Option value={ele.value} key={ele.value} name={ele.label}>\r\n                    {ele.label}\r\n                  </Option>\r\n                );\r\n              }\r\n            )}\r\n          </Select>\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\nexport default ItemModal;\r\n","import React from \"react\";\r\nimport Icon from \"@ant-design/icons\";\r\n\r\nconst Svg = () => (\r\n  <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\">\r\n    <title>切片</title>\r\n    <g id=\"方案\" stroke=\"none\" strokeWidth=\"1\" fill=\"none\" fillRule=\"evenodd\">\r\n      <g\r\n        id=\"#18-甘特图-初次提醒时间字段配置\"\r\n        transform=\"translate(-880.000000, -403.000000)\"\r\n      >\r\n        <g\r\n          id=\"5.反馈/1.警告提示/2.带链接/提示\"\r\n          transform=\"translate(864.000000, 395.000000)\"\r\n        >\r\n          <g id=\"图标\" transform=\"translate(16.000000, 8.000000)\">\r\n            <rect\r\n              id=\"矩形\"\r\n              fill=\"#FFFFFF\"\r\n              opacity=\"0\"\r\n              x=\"0\"\r\n              y=\"0\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n            ></rect>\r\n            <path\r\n              d=\"M8,1 C11.8663333,1 15,4.13366667 15,8 C15,11.8663333 11.8663333,15 8,15 C4.13366667,15 1,11.8663333 1,8 C1,4.13366667 4.13366667,1 8,1 Z M8,6.44444444 L7.89383105,6.45156544 C7.5123098,6.50321808 7.22222222,6.82958857 7.22222222,7.22450059 L7.22222222,7.22450059 L7.22222222,11.1088327 C7.22222222,11.5316637 7.57044519,11.8888889 8,11.8888889 L8,11.8888889 L8.10616895,11.8817679 C8.4876902,11.8301153 8.77777778,11.5037448 8.77777778,11.1088327 L8.77777778,11.1088327 L8.77777778,7.22450059 C8.77777778,6.80166965 8.42955481,6.44444444 8,6.44444444 L8,6.44444444 Z M8,4.11111111 C7.57044519,4.11111111 7.22222222,4.45933408 7.22222222,4.88888889 C7.22222222,5.31844369 7.57044519,5.66666667 8,5.66666667 C8.42955481,5.66666667 8.77777778,5.31844369 8.77777778,4.88888889 C8.77777778,4.45933408 8.42955481,4.11111111 8,4.11111111 Z\"\r\n              id=\"Combined-Shape\"\r\n              fill=\"#3683FF\"\r\n            ></path>\r\n          </g>\r\n        </g>\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\nconst IconComponent = props => <Icon component={Svg} {...props} />;\r\nexport default IconComponent;\r\n","import React, { useState, useContext, useMemo, useCallback } from \"react\";\r\nimport { Button, Table, Space, Modal, Tooltip } from \"antd\";\r\nimport { PlusOutlined, QuestionCircleOutlined } from \"@ant-design/icons\";\r\nimport styles from \"./index.module.css\";\r\nimport TimeModal from \"./time-modal\";\r\nimport { ConfigHandleContext, GanttConfigContext } from \"../../contsxt\";\r\nimport { TimeItemProps } from \"../../types/public-types\";\r\nimport WarningIcon from \"../icons/warning\";\r\ninterface TimeProps {}\r\nconst Time: React.FC<TimeProps> = () => {\r\n  const [visible, setVisible] = useState(false);\r\n  const columns = [\r\n    {\r\n      title: \"关联事项\",\r\n      dataIndex: \"itemType\",\r\n      key: \"name\",\r\n      render: (text: string) => {\r\n        const res =\r\n          itemTypeData &&\r\n          itemTypeData.filter((ele: { label: string; value: string }) => {\r\n            return ele.value === text;\r\n          });\r\n        return (\r\n          res[0]?.label || (\r\n            <Tooltip title=\"没有配置的卡片类型将使用默认配置\">\r\n              默认 &nbsp;\r\n              <QuestionCircleOutlined />\r\n            </Tooltip>\r\n          )\r\n        );\r\n      },\r\n    },\r\n    {\r\n      title: \"操作\",\r\n      key: \"action\",\r\n      width: 120,\r\n      render: (_text: string, record: TimeItemProps, index: number) => (\r\n        <Space>\r\n          <a type=\"link\" onClick={() => editTime(index)}>\r\n            配置\r\n          </a>\r\n          {!record?.isDefault && (\r\n            <a type=\"link\" onClick={() => del(index)}>\r\n              删除\r\n            </a>\r\n          )}\r\n        </Space>\r\n      ),\r\n    },\r\n  ];\r\n  const { configHandle, itemTypeData } = useContext(ConfigHandleContext);\r\n  const { ganttConfig } = useContext(GanttConfigContext);\r\n  const [currentItem, setCurrentItem] = useState<any>({});\r\n  const [index, setIndex] = useState(0);\r\n  const timeList = useMemo(\r\n    () =>\r\n      ganttConfig?.time?.length ? ganttConfig?.time : [{ isDefault: true }],\r\n    [ganttConfig?.time]\r\n  );\r\n  // 添加事项类型配置前需要完成默认配置\r\n  const canAddConfig = useMemo(() => {\r\n    return timeList?.[0]?.startDate && timeList?.[0]?.endDate;\r\n  }, [timeList]);\r\n  const handleCancel = useCallback(() => {\r\n    setVisible(false);\r\n  }, []);\r\n  const handleOk = async (values: TimeItemProps) => {\r\n    let newTimeList;\r\n    if (Object.keys(currentItem).length) {\r\n      newTimeList = [...timeList];\r\n      if (currentItem?.isDefault) {\r\n        values.isDefault = currentItem?.isDefault;\r\n      }\r\n      newTimeList[index] = values;\r\n      // 编辑\r\n    } else {\r\n      // 新增\r\n      newTimeList = [...timeList, values];\r\n    }\r\n    setVisible(false);\r\n    configHandle({\r\n      ...ganttConfig,\r\n      time: newTimeList,\r\n    });\r\n  };\r\n  const addTime = useCallback(() => {\r\n    setVisible(true);\r\n    setCurrentItem({});\r\n  }, []);\r\n  const editTime = useCallback(\r\n    (index: number) => {\r\n      setIndex(index);\r\n      setCurrentItem(timeList[index]);\r\n      setVisible(true);\r\n    },\r\n    [timeList]\r\n  );\r\n  const del = (index: number) => {\r\n    Modal.confirm({\r\n      title: \"删除该配置\",\r\n      content: \"删除后无法恢复。您确定删除吗？\",\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => delConfig(index),\r\n    });\r\n  };\r\n  const delConfig = (index: number) => {\r\n    const newTimeList = [...timeList];\r\n    newTimeList.splice(index, 1);\r\n    configHandle({\r\n      ...ganttConfig,\r\n      time: newTimeList,\r\n    });\r\n  };\r\n  return (\r\n    <div>\r\n      <TimeModal\r\n        visible={visible}\r\n        handleCancel={handleCancel}\r\n        handleOk={handleOk}\r\n        currentItem={currentItem}\r\n        timeList={timeList} // 做卡片唯一性校验\r\n      />\r\n      <div className={`${styles.timeTips}`}>\r\n        <em>\r\n          <WarningIcon style={{ color: \"red\" }} />\r\n        </em>\r\n        为了让甘特图正确显示，您需要设置甘特图中时间区块的起止时间对应事项的哪个时间字段\r\n      </div>\r\n      <Table\r\n        columns={columns}\r\n        dataSource={timeList}\r\n        pagination={false}\r\n        className={styles.timeConfigTable}\r\n        rowKey={columns => {\r\n          return columns.itemType || \"default\";\r\n        }}\r\n      />\r\n      <div className={styles.timeConfigAddBtn}>\r\n        <Button\r\n          icon={<PlusOutlined />}\r\n          type=\"link\"\r\n          onClick={addTime}\r\n          disabled={!canAddConfig}\r\n        >\r\n          新增配置\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default Time;\r\n","import React, { useState, useContext, useMemo, useEffect } from \"react\";\r\nimport { Switch, Modal, Tooltip } from \"antd\";\r\nimport { QuestionCircleOutlined } from \"@ant-design/icons\";\r\nimport { GanttConfigContext, ConfigHandleContext } from \"../../contsxt\";\r\n\r\nimport styles from \"./index.module.css\";\r\n\r\nconst { confirm } = Modal;\r\n\r\nconst OtherConfig: React.FC = () => {\r\n  const [checked, setChecked] = useState(false);\r\n  const { ganttConfig } = useContext(GanttConfigContext);\r\n  const { configHandle } = useContext(ConfigHandleContext);\r\n  const otherConfig = useMemo(() => ganttConfig?.otherConfig, [\r\n    ganttConfig?.otherConfig,\r\n  ]);\r\n  useEffect(() => {\r\n    setChecked(otherConfig?.autoPatch);\r\n  }, [otherConfig?.autoPatch]);\r\n  const onChange = (value: boolean) => {\r\n    if (!value) {\r\n      setChecked(value);\r\n      configHandle({\r\n        ...ganttConfig,\r\n        otherConfig: {\r\n          ...ganttConfig.otherConfig,\r\n          ...{ autoPatch: value },\r\n        },\r\n      });\r\n      return;\r\n    }\r\n    confirm({\r\n      title: \"自动编排\",\r\n      okText: \"确定\",\r\n      cancelText: \"取消\",\r\n      content:\r\n        \"开启自动编排时，将按当前的事项关系自动调整所有事项的时间。确认开启？\",\r\n      onOk() {\r\n        setChecked(value);\r\n        configHandle({\r\n          ...ganttConfig,\r\n          otherConfig: {\r\n            ...ganttConfig.otherConfig,\r\n            ...{ autoPatch: value },\r\n          },\r\n        });\r\n      },\r\n      onCancel() {\r\n        setChecked(false);\r\n      },\r\n    });\r\n  };\r\n  return (\r\n    <div className={styles.otherConfig}>\r\n      <div>\r\n        自动编排\r\n        <span className={styles.question}>\r\n          <Tooltip title=\"根据卡片之间的关系，自动调整卡片时间，避免出现逻辑错误\">\r\n            <QuestionCircleOutlined />\r\n          </Tooltip>\r\n        </span>\r\n      </div>\r\n      <div>\r\n        <Switch onChange={onChange} checked={checked} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default OtherConfig;\r\n","import React, { useState, useEffect, useContext, useMemo } from \"react\";\r\nimport { Modal, Form, Input } from \"antd\";\r\nimport { BaselineProps } from \"../../../types/public-types\";\r\nimport { BaseLineContext } from \"../../../contsxt\";\r\nimport dayjs from \"dayjs\";\r\n\r\nconst { TextArea } = Input;\r\ninterface ModalProps {\r\n  visible: boolean;\r\n  handleOk: (value: BaselineProps) => void;\r\n  handleCancel: () => void;\r\n  currentBaseline: BaselineProps;\r\n}\r\n\r\nexport const AddEdit: React.FC<ModalProps> = ({\r\n  visible,\r\n  handleOk,\r\n  handleCancel,\r\n  currentBaseline,\r\n}) => {\r\n  const [form] = Form.useForm();\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  const [confirmLoading, setConfirmLoading] = useState(false);\r\n  const { baselineList } = useContext(BaseLineContext);\r\n  console.log(currentBaseline, \"currentBaseline\");\r\n  const isEdit = useMemo(() => {\r\n    return !!currentBaseline?.objectId;\r\n  }, [currentBaseline]);\r\n  useEffect(() => {\r\n    setModalVisible(visible);\r\n  }, [visible]);\r\n  useEffect(() => {\r\n    form.setFieldsValue({\r\n      name: currentBaseline?.name\r\n        ? currentBaseline?.name\r\n        : dayjs(new Date()).format(\"YYYY-MM-DD HH:mm:ss\"),\r\n      description: currentBaseline?.description,\r\n    });\r\n  }, [currentBaseline, form]);\r\n  const onFinish = () => {};\r\n  const confirmOk = () => {\r\n    form\r\n      .validateFields()\r\n      .then(async (values: BaselineProps) => {\r\n        setConfirmLoading(true);\r\n        await handleOk(Object.assign(currentBaseline, values));\r\n        setConfirmLoading(false);\r\n      })\r\n      .catch(info => {\r\n        console.log(\"Validate Failed:\", info);\r\n      });\r\n  };\r\n  const nameValidator = (\r\n    {},\r\n    value: string,\r\n    callback: (error?: string) => void\r\n  ) => {\r\n    if (!value) {\r\n      callback();\r\n    } else {\r\n      const findRepeat = baselineList?.filter(\r\n        (ele: BaselineProps) => ele.name === value\r\n      );\r\n      if (\r\n        findRepeat.length &&\r\n        currentBaseline &&\r\n        currentBaseline.name !== value\r\n      ) {\r\n        callback(\"该名称已存在\");\r\n      } else {\r\n        callback();\r\n      }\r\n    }\r\n  };\r\n  return (\r\n    <Modal\r\n      title={`${isEdit ? \"编辑\" : \"新建\"}基线`}\r\n      visible={modalVisible}\r\n      onCancel={handleCancel}\r\n      onOk={confirmOk}\r\n      okText=\"确认\"\r\n      cancelText=\"取消\"\r\n      confirmLoading={confirmLoading}\r\n    >\r\n      <Form\r\n        form={form}\r\n        name=\"basic\"\r\n        labelCol={{ span: 24 }}\r\n        wrapperCol={{ span: 24 }}\r\n        layout=\"vertical\"\r\n        onFinish={onFinish}\r\n      >\r\n        <Form.Item\r\n          label=\"基线名称\"\r\n          name=\"name\"\r\n          rules={[\r\n            { required: true, message: \"请输入基线名称\" },\r\n            { validator: nameValidator },\r\n          ]}\r\n        >\r\n          <Input\r\n            placeholder=\"请输入基线名称，最大长度32个字符\"\r\n            maxLength={32}\r\n          />\r\n        </Form.Item>\r\n        <Form.Item label=\"描述\" name=\"description\">\r\n          <TextArea placeholder=\"请输入基线描述\" />\r\n        </Form.Item>\r\n      </Form>\r\n    </Modal>\r\n  );\r\n};\r\nexport default AddEdit;\r\n","import React from \"react\";\r\nimport Icon from \"@ant-design/icons\";\r\n\r\nconst Svg = () => (\r\n  <svg\r\n    width=\"28px\"\r\n    height=\"28px\"\r\n    viewBox=\"0 0 28 28\"\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n  >\r\n    <title>编组 13</title>\r\n    <g id=\"方案\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n      <g id=\"#17-甘特图配置\" transform=\"translate(-864.000000, -336.000000)\">\r\n        <g id=\"编组-12\" transform=\"translate(840.000000, 201.000000)\">\r\n          <g id=\"基线备份-2\" transform=\"translate(24.000000, 135.000000)\">\r\n            <g id=\"编组-13\" transform=\"translate(-0.000844, -0.000844)\">\r\n              <polygon\r\n                id=\"路径\"\r\n                fill=\"#0C62FF\"\r\n                points=\"27.943 0 0 27.943 0.000844122713 0.000844122712\"\r\n              ></polygon>\r\n              <g\r\n                id=\"勾选\"\r\n                transform=\"translate(1.000844, 0.000844)\"\r\n                fill=\"#FFFFFF\"\r\n              >\r\n                <path\r\n                  d=\"M11.8295143,4.29289322 C12.2200386,3.90236893 12.8532036,3.90236893 13.2437279,4.29289322 C13.6042118,4.65337718 13.6319414,5.22060824 13.3269165,5.61289944 L13.2437279,5.70710678 L7.30919533,11.6416393 C6.76002054,12.1908141 5.89095813,12.2251375 5.30179739,11.7446096 L5.18787498,11.6416393 L2.29289322,8.74665756 C1.90236893,8.35613327 1.90236893,7.72296829 2.29289322,7.332444 C2.65337718,6.97196004 3.22060824,6.9442305 3.61289944,7.24925539 L3.70710678,7.332444 L6.248,9.873 L11.8295143,4.29289322 Z\"\r\n                  id=\"路径-4\"\r\n                ></path>\r\n              </g>\r\n            </g>\r\n          </g>\r\n        </g>\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\nconst IconComponent = props => <Icon component={Svg} {...props} />;\r\nexport default IconComponent;\r\n","import React, { useState, useContext, useCallback } from \"react\";\r\nimport { PlusOutlined, EditOutlined, DeleteOutlined } from \"@ant-design/icons\";\r\nimport { Button, Modal } from \"antd\";\r\nimport AddEdit from \"./add-edit\";\r\nimport { BaseLineContext } from \"../../../contsxt\";\r\nimport { BaselineProps } from \"../../../types/public-types\";\r\nimport Checked from \"../../icons/checked\";\r\nimport { omit } from \"lodash\";\r\nimport { dayTimeFormat } from \"../../../helpers/dicts\";\r\n\r\nimport dayjs from \"dayjs\";\r\n\r\nimport styles from \"./index.css\";\r\nexport const BaseLine: React.FC = () => {\r\n  const {\r\n    baseLineHandle,\r\n    baselineList,\r\n    setCurrentLog,\r\n    currentLog,\r\n    OverflowTooltip,\r\n    setLogTasks,\r\n  } = useContext(BaseLineContext);\r\n  const deleteBaseline = (currentBaseline: BaselineProps) => {\r\n    Modal.confirm({\r\n      title: \"删除基线\",\r\n      content: \"删除的基线无法恢复，确认删除？\",\r\n      okText: \"确认\",\r\n      cancelText: \"取消\",\r\n      onOk: () => baseLineHandle(currentBaseline),\r\n    });\r\n  };\r\n  const handleMenuClick = (\r\n    type: string,\r\n    e: React.SyntheticEvent,\r\n    currentBaseLine: BaselineProps\r\n  ) => {\r\n    const currentBaselineOmit = omit(currentBaseLine, [\r\n      \"createdAt\",\r\n      \"updatedAt\",\r\n    ]);\r\n    setCurrentBaseline(currentBaselineOmit);\r\n    e.stopPropagation();\r\n    switch (type) {\r\n      case \"edit\":\r\n        setVisible(true);\r\n        break;\r\n      case \"del\":\r\n        deleteBaseline(currentBaselineOmit);\r\n        break;\r\n    }\r\n  };\r\n  const [visible, setVisible] = useState(false);\r\n  const [currentBaseline, setCurrentBaseline] = useState<any>({});\r\n  const addBaseline = () => {\r\n    setVisible(true);\r\n    setCurrentBaseline({});\r\n  };\r\n  const handleOk = useCallback(\r\n    async (value: BaselineProps) => {\r\n      await baseLineHandle(value, value.objectId ? \"edit\" : \"add\");\r\n      setVisible(false);\r\n    },\r\n    [baseLineHandle]\r\n  );\r\n  const handleCancel = () => {\r\n    setVisible(false);\r\n  };\r\n  const chooseLog = (infor: BaselineProps) => {\r\n    // 取消选中基线\r\n    if (currentLog?.objectId === infor?.objectId) {\r\n      setCurrentLog([]);\r\n      setLogTasks([]);\r\n    } else {\r\n      setCurrentLog(infor);\r\n    }\r\n  };\r\n  return (\r\n    <div className={styles.panel}>\r\n      <div className={styles.createBaseline}>\r\n        <Button\r\n          type=\"dashed\"\r\n          icon={<PlusOutlined />}\r\n          onClick={addBaseline}\r\n          disabled={baselineList?.length >= 10}\r\n        >\r\n          {`创建基线（${baselineList?.length}/10）`}\r\n        </Button>\r\n      </div>\r\n      {visible && (\r\n        <AddEdit\r\n          visible={visible}\r\n          handleOk={handleOk}\r\n          handleCancel={handleCancel}\r\n          currentBaseline={currentBaseline}\r\n        />\r\n      )}\r\n      <ul className={styles.list}>\r\n        {baselineList.map((ele: BaselineProps) => {\r\n          return (\r\n            <li\r\n              key={ele.objectId}\r\n              className={\r\n                currentLog && ele.objectId === currentLog.objectId\r\n                  ? styles.activeBaseline\r\n                  : undefined\r\n              }\r\n            >\r\n              {ele.objectId === currentLog?.objectId && (\r\n                <div className={styles.checkedIcon}>\r\n                  <Checked />\r\n                </div>\r\n              )}\r\n              <div\r\n                className={`${styles.content} ${styles.cursor}`}\r\n                onClick={() => chooseLog(ele)}\r\n              >\r\n                <div className={styles.name}>{OverflowTooltip(ele.name)}</div>\r\n                <div className={styles.time}>\r\n                  <div className={styles.createTime}>\r\n                    创建于：\r\n                    {dayjs(new Date(ele.createdAt)).format(dayTimeFormat)}\r\n                  </div>\r\n                  <div className={styles.handleIcon}>\r\n                    <EditOutlined\r\n                      onClick={e => handleMenuClick(\"edit\", e, ele)}\r\n                    />\r\n                    <DeleteOutlined\r\n                      onClick={e => handleMenuClick(\"del\", e, ele)}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            </li>\r\n          );\r\n        })}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BaseLine;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Switch, Row, Col } from \"antd\";\r\nimport { GanttConfigProps } from \"../../types/public-types\";\r\nimport styles from \"./index.module.css\";\r\ninterface DisplayProps {\r\n  ganttConfig?: GanttConfigProps;\r\n  configHandle?: (value: GanttConfigProps) => void;\r\n  visibleChange?: (value: GanttConfigProps) => void;\r\n}\r\nexport const Display: React.FC<DisplayProps> = ({\r\n  ganttConfig,\r\n  configHandle,\r\n}) => {\r\n  const [currentValue, setCurrentValue] = useState<GanttConfigProps>({});\r\n  useEffect(() => {\r\n    setCurrentValue({ ...ganttConfig, isChanged: false });\r\n  }, [ganttConfig]);\r\n  const handleChange = (value: boolean, type: string) => {\r\n    const newConfig = {\r\n      ...currentValue,\r\n      otherConfig: { ...currentValue.otherConfig, [type]: value },\r\n      isChanged: true,\r\n    };\r\n    setCurrentValue(newConfig);\r\n    configHandle?.(newConfig);\r\n  };\r\n\r\n  return (\r\n    <div className={styles.displayPopover}>\r\n      <Row className={styles.displayRow}>\r\n        <Col span={14}>关键路径</Col>\r\n        <Col span={10} className={styles.textAlignR}>\r\n          <Switch\r\n            onChange={checked => handleChange(checked, \"pivotalPath\")}\r\n            checked={currentValue?.otherConfig?.pivotalPath}\r\n          />\r\n        </Col>\r\n      </Row>\r\n      <Row>\r\n        <Col span={14}>逾期的事项</Col>\r\n        <Col span={10} className={styles.textAlignR}>\r\n          <Switch\r\n            onChange={checked => handleChange(checked, \"overdue\")}\r\n            checked={currentValue?.otherConfig?.overdue}\r\n          />\r\n        </Col>\r\n      </Row>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Display;\r\n","import React from \"react\";\r\nimport Icon from \"@ant-design/icons\";\r\n\r\nconst Svg = () => (\r\n  <svg\r\n    width=\"16px\"\r\n    height=\"16px\"\r\n    viewBox=\"0 0 16 16\"\r\n    version=\"1.1\"\r\n    xmlns=\"http://www.w3.org/2000/svg\"\r\n  >\r\n    <title>切片</title>\r\n    <g id=\"方案\" stroke=\"none\" stroke-width=\"1\" fill=\"none\" fill-rule=\"evenodd\">\r\n      <g\r\n        id=\"#6.详情页间距标注\"\r\n        transform=\"translate(-744.000000, -1064.000000)\"\r\n      >\r\n        <g\r\n          id=\"4.数据展示/5.Collapse折叠面板/标题备份-3\"\r\n          transform=\"translate(744.000000, 1060.000000)\"\r\n        >\r\n          <g\r\n            id=\"1.通用/2.图标/2.填充/collapse-down\"\r\n            transform=\"translate(0.000000, 4.000000)\"\r\n          >\r\n            <rect\r\n              id=\"矩形\"\r\n              fill=\"#FFFFFF\"\r\n              opacity=\"0\"\r\n              x=\"0\"\r\n              y=\"0\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n            ></rect>\r\n            <rect\r\n              id=\"矩形\"\r\n              fill=\"#F1F2F4\"\r\n              x=\"0\"\r\n              y=\"0\"\r\n              width=\"16\"\r\n              height=\"16\"\r\n              rx=\"8\"\r\n            ></rect>\r\n            <path\r\n              d=\"M4.24726739,5.72183194 C3.9842442,5.96094393 3.9842442,6.35723789 4.24726739,6.59634988 L8.29726739,10.2781681 C8.54928757,10.5072773 8.95071243,10.5072773 9.20273261,10.2781681 L13.2527326,6.59634988 C13.5157558,6.35723789 13.5157558,5.96094393 13.2527326,5.72183194 L13.1636023,5.65394772 C12.9133514,5.4955512 12.5712853,5.51817927 12.3472674,5.72183194 L8.75,8.992 L5.15273261,5.72183194 C4.90071243,5.49272269 4.49928757,5.49272269 4.24726739,5.72183194 Z\"\r\n              id=\"路径\"\r\n              fill=\"#213053\"\r\n              transform=\"translate(8.750000, 8.000000) rotate(-90.000000) translate(-8.750000, -8.000000) \"\r\n            ></path>\r\n          </g>\r\n        </g>\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\nconst IconComponent = props => <Icon component={Svg} {...props} />;\r\nexport default IconComponent;\r\n","import React, { memo, useEffect, useState } from \"react\";\r\nimport { Drawer, Collapse } from \"antd\";\r\nimport Time from \"./time\";\r\nimport OtherConfig from \"./other-config\";\r\nimport Baseline from \"./baseline\";\r\nimport Display from \"./display\";\r\nimport { GanttConfigProps } from \"../../types/public-types\";\r\nimport CollapseIcon from \"../icons/collapseIcon\";\r\nimport { drawerWidth } from \"../../helpers/dicts\";\r\nimport { isArray } from \"lodash\";\r\n\r\nimport styles from \"./index.module.css\";\r\n\r\nconst { Panel } = Collapse;\r\n\r\nconst GanttConfig: React.FC<GanttConfigProps> = ({\r\n  toGantt,\r\n  visible,\r\n  currentPanel,\r\n  configHandle,\r\n  ganttConfig,\r\n}) => {\r\n  const [activeKey, setActiveKey] = useState<string[]>([]);\r\n  useEffect(() => {\r\n    if (currentPanel) {\r\n      setActiveKey([currentPanel]);\r\n    } else {\r\n      setActiveKey([]);\r\n    }\r\n  }, [currentPanel]);\r\n  const onChange = (val: string | string[]) => {\r\n    if (isArray(val)) {\r\n      setActiveKey([...val]);\r\n    }\r\n  };\r\n  const genHeader = () => (\r\n    <span className={styles.extraHeader}>\r\n      <span className={styles.title}>基线</span>\r\n      <span className={styles.des}>（点击基线卡片可选择显示基线）</span>\r\n    </span>\r\n  );\r\n  return (\r\n    <Drawer\r\n      title=\"甘特图设置\"\r\n      visible={visible}\r\n      onClose={() => toGantt()}\r\n      width={drawerWidth}\r\n      getContainer={false}\r\n      className={styles.settingsModalContainer}\r\n      contentWrapperStyle={{ maxWidth: \"721px\" }}\r\n      style={{ position: \"absolute\" }}\r\n      maskClosable={false}\r\n      mask={false}\r\n    >\r\n      <Collapse\r\n        activeKey={activeKey}\r\n        onChange={onChange}\r\n        expandIcon={({ isActive }) => (\r\n          <CollapseIcon className={isActive ? styles.activeRotate : \"\"} />\r\n        )}\r\n        className={styles.collapse}\r\n      >\r\n        <Panel header={genHeader()} key=\"baseLine\">\r\n          <Baseline />\r\n        </Panel>\r\n\r\n        <Panel header=\"显示项\" key=\"display\">\r\n          <Display ganttConfig={ganttConfig} configHandle={configHandle} />\r\n        </Panel>\r\n        <Panel header=\"时间字段配置\" key=\"time\">\r\n          <Time />\r\n        </Panel>\r\n        <Panel header=\"其他配置\" key=\"other\">\r\n          <OtherConfig />\r\n        </Panel>\r\n      </Collapse>\r\n    </Drawer>\r\n  );\r\n};\r\nexport default memo(GanttConfig);\r\n","import React, { useState, useEffect, useCallback, memo } from \"react\";\r\nimport { Modal } from \"antd\";\r\nimport styles from \"./gantt.module.css\";\r\ninterface ModaProps {\r\n  visible: boolean;\r\n  toPanel: () => void;\r\n  toCancel: () => void;\r\n}\r\nexport const GuideModal: React.FC<ModaProps> = ({\r\n  visible,\r\n  toPanel,\r\n  toCancel,\r\n}) => {\r\n  const [modalVisible, setModalVisible] = useState(false);\r\n  useEffect(() => {\r\n    setModalVisible(visible);\r\n  }, [visible]);\r\n  const toConfig = useCallback(() => {\r\n    toPanel();\r\n  }, [toPanel]);\r\n  const handleCancel = useCallback(() => {\r\n    toCancel();\r\n  }, [toCancel]);\r\n  return (\r\n    <Modal\r\n      closable={false}\r\n      visible={modalVisible}\r\n      footer={null}\r\n      width={300}\r\n      className=\"guide-modal\"\r\n      onCancel={handleCancel}\r\n    >\r\n      <span className={styles.guideInfor}>\r\n        还没有配置甘特图中卡片的时间字段，\r\n        <span onClick={toConfig} className={styles.clickThis}>\r\n          点此\r\n        </span>\r\n        进行配置\r\n      </span>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default memo(GuideModal);\r\n","import React from \"react\";\r\nimport Icon from \"@ant-design/icons\";\r\n\r\nconst Svg = () => (\r\n  <svg width=\"16px\" height=\"16px\" viewBox=\"0 0 16 16\" version=\"1.1\">\r\n    <title>1.通用/2.Icon图标/Line/Down</title>\r\n    <defs>\r\n      <rect id=\"path-1\" x=\"260\" y=\"226\" width=\"396\" height=\"611\"></rect>\r\n      <filter\r\n        x=\"-0.9%\"\r\n        y=\"-0.9%\"\r\n        width=\"102.8%\"\r\n        height=\"101.8%\"\r\n        filterUnits=\"objectBoundingBox\"\r\n        id=\"filter-2\"\r\n      >\r\n        <feOffset\r\n          dx=\"2\"\r\n          dy=\"0\"\r\n          in=\"SourceAlpha\"\r\n          result=\"shadowOffsetOuter1\"\r\n        ></feOffset>\r\n        <feGaussianBlur\r\n          stdDeviation=\"1.5\"\r\n          in=\"shadowOffsetOuter1\"\r\n          result=\"shadowBlurOuter1\"\r\n        ></feGaussianBlur>\r\n        <feColorMatrix\r\n          values=\"0 0 0 0 0.0352941176   0 0 0 0 0.117647059   0 0 0 0 0.258823529  0 0 0 0.162778628 0\"\r\n          type=\"matrix\"\r\n          in=\"shadowBlurOuter1\"\r\n          result=\"shadowMatrixOuter1\"\r\n        ></feColorMatrix>\r\n        <feOffset\r\n          dx=\"0\"\r\n          dy=\"0\"\r\n          in=\"SourceAlpha\"\r\n          result=\"shadowOffsetOuter2\"\r\n        ></feOffset>\r\n        <feGaussianBlur\r\n          stdDeviation=\"0.5\"\r\n          in=\"shadowOffsetOuter2\"\r\n          result=\"shadowBlurOuter2\"\r\n        ></feGaussianBlur>\r\n        <feColorMatrix\r\n          values=\"0 0 0 0 0.0352941176   0 0 0 0 0.117647059   0 0 0 0 0.258823529  0 0 0 0.34099104 0\"\r\n          type=\"matrix\"\r\n          in=\"shadowBlurOuter2\"\r\n          result=\"shadowMatrixOuter2\"\r\n        ></feColorMatrix>\r\n        <feMerge>\r\n          <feMergeNode in=\"shadowMatrixOuter1\"></feMergeNode>\r\n          <feMergeNode in=\"shadowMatrixOuter2\"></feMergeNode>\r\n        </feMerge>\r\n      </filter>\r\n      <filter color-interpolation-filters=\"auto\" id=\"filter-3\">\r\n        <feColorMatrix\r\n          in=\"SourceGraphic\"\r\n          type=\"matrix\"\r\n          values=\"0 0 0 0 0.180392 0 0 0 0 0.250980 0 0 0 0 0.368627 0 0 0 1.000000 0\"\r\n        ></feColorMatrix>\r\n      </filter>\r\n      <filter color-interpolation-filters=\"auto\" id=\"filter-4\">\r\n        <feColorMatrix\r\n          in=\"SourceGraphic\"\r\n          type=\"matrix\"\r\n          values=\"0 0 0 0 0.180392 0 0 0 0 0.250980 0 0 0 0 0.368627 0 0 0 1.000000 0\"\r\n        ></feColorMatrix>\r\n      </filter>\r\n    </defs>\r\n    <g\r\n      id=\"页面-1\"\r\n      stroke=\"none\"\r\n      stroke-width=\"1\"\r\n      fill=\"none\"\r\n      fill-rule=\"evenodd\"\r\n    >\r\n      <g id=\"甘特图-未设置\" transform=\"translate(-648.000000, -515.000000)\">\r\n        <rect fill=\"#FFFFFF\" x=\"0\" y=\"0\" width=\"1440\" height=\"900\"></rect>\r\n        <g id=\"矩形\">\r\n          <use\r\n            fill=\"black\"\r\n            fill-opacity=\"1\"\r\n            filter=\"url(#filter-2)\"\r\n            id=\"#path-1\"\r\n          ></use>\r\n          <use fill=\"#FFFFFF\" fill-rule=\"evenodd\" id=\"#path-2\"></use>\r\n        </g>\r\n        <g id=\"数据配置\" transform=\"translate(260.000000, 486.000000)\"></g>\r\n        <g id=\"数据配置\" transform=\"translate(260.000000, 530.000000)\"></g>\r\n        <rect\r\n          id=\"矩形\"\r\n          stroke=\"#ECEDF0\"\r\n          x=\"260.5\"\r\n          y=\"225.5\"\r\n          width=\"1159\"\r\n          height=\"612\"\r\n        ></rect>\r\n        <g id=\"编组-13\" transform=\"translate(640.000000, 507.000000)\">\r\n          <circle\r\n            id=\"椭圆形\"\r\n            stroke=\"#ECEDF0\"\r\n            fill=\"#FFFFFF\"\r\n            cx=\"16\"\r\n            cy=\"16\"\r\n            r=\"15.5\"\r\n          ></circle>\r\n          <g\r\n            id=\"展开\"\r\n            transform=\"translate(8.000000, 8.000000)\"\r\n            filter=\"url(#filter-3)\"\r\n          >\r\n            <g transform=\"translate(8.000000, 8.000000) rotate(90.000000) translate(-8.000000, -8.000000) \">\r\n              <rect\r\n                id=\"矩形\"\r\n                fill=\"#D8D8D8\"\r\n                opacity=\"0\"\r\n                x=\"0\"\r\n                y=\"0\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n              ></rect>\r\n              <path\r\n                d=\"M12.9757359,6.15975994 C13.2100505,5.94674669 13.5899495,5.94674669 13.8242641,6.15975994 C14.0585786,6.37277319 14.0585786,6.7181359 13.8242641,6.93114915 L8.42426407,11.8402401 C8.18994949,12.0532533 7.81005051,12.0532533 7.57573593,11.8402401 L2.17573593,6.93114915 C1.94142136,6.7181359 1.94142136,6.37277319 2.17573593,6.15975994 C2.41005051,5.94674669 2.78994949,5.94674669 3.02426407,6.15975994 L8,10.6831562 L12.9757359,6.15975994 Z\"\r\n                id=\"Rectangle-2备份\"\r\n                fill=\"#1E2A3D\"\r\n              ></path>\r\n            </g>\r\n          </g>\r\n          <g filter=\"url(#filter-4)\" id=\"展开\">\r\n            <g transform=\"translate(16.000000, 16.000000) rotate(90.000000) translate(-16.000000, -16.000000) translate(8.000000, 8.000000)\">\r\n              <rect\r\n                id=\"矩形\"\r\n                fill=\"#D8D8D8\"\r\n                opacity=\"0\"\r\n                x=\"0\"\r\n                y=\"0\"\r\n                width=\"16\"\r\n                height=\"16\"\r\n              ></rect>\r\n              <path\r\n                d=\"M12.9757359,6.15975994 C13.2100505,5.94674669 13.5899495,5.94674669 13.8242641,6.15975994 C14.0585786,6.37277319 14.0585786,6.7181359 13.8242641,6.93114915 L8.42426407,11.8402401 C8.18994949,12.0532533 7.81005051,12.0532533 7.57573593,11.8402401 L2.17573593,6.93114915 C1.94142136,6.7181359 1.94142136,6.37277319 2.17573593,6.15975994 C2.41005051,5.94674669 2.78994949,5.94674669 3.02426407,6.15975994 L8,10.6831562 L12.9757359,6.15975994 Z\"\r\n                id=\"Rectangle-2备份\"\r\n                fill=\"#1E2A3D\"\r\n              ></path>\r\n            </g>\r\n          </g>\r\n        </g>\r\n      </g>\r\n    </g>\r\n  </svg>\r\n);\r\nconst IconComponent = props => <Icon component={Svg} {...props} />;\r\nexport default IconComponent;\r\n","export const getLocalStorageItem = (key: string, defalut: any = \"\"): any => {\r\n  try {\r\n    if (typeof window !== \"undefined\") {\r\n      const item = localStorage.getItem(key);\r\n      return (item && JSON.parse(item)) || defalut;\r\n    }\r\n  } catch (e) {\r\n    return localStorage.getItem(key) || defalut;\r\n  }\r\n};\r\n\r\nexport const setLocalStorageItem = (key: string, value: unknown): boolean => {\r\n  try {\r\n    if (typeof window !== \"undefined\") {\r\n      localStorage.setItem(key, JSON.stringify(value));\r\n      return true;\r\n    }\r\n    return false;\r\n  } catch (e) {\r\n    console.error(e);\r\n    return false;\r\n  }\r\n};\r\n\r\nexport default {\r\n  getLocalStorageItem,\r\n  setLocalStorageItem,\r\n};\r\n","import React, { useMemo } from \"react\";\r\nimport { Tabs } from \"antd\";\r\nimport { viewModeOptions, ViewMode } from \"../../types/public-types\";\r\n\r\nimport styles from \"./gantt.module.css\";\r\nconst { TabPane } = Tabs;\r\n\r\ninterface DateModeProps {\r\n  toToday: () => void;\r\n  modeChange: (val: ViewMode) => void;\r\n  todayX: number;\r\n  svgContainerWidth: number;\r\n  refScrollX: number;\r\n}\r\nconst DataMode: React.FC<DateModeProps> = ({\r\n  toToday,\r\n  modeChange,\r\n  todayX,\r\n  svgContainerWidth,\r\n  refScrollX,\r\n}) => {\r\n  const handleChange = (value: string) => {\r\n    modeChange(value as ViewMode);\r\n  };\r\n  const isShowToday = useMemo(() => {\r\n    return (\r\n      refScrollX + svgContainerWidth - 20 < todayX || refScrollX > todayX - 20\r\n    );\r\n  }, [refScrollX, svgContainerWidth, todayX]);\r\n  return (\r\n    <div className={styles.viewMode}>\r\n      {isShowToday && (\r\n        <span className={styles.todayBtn} onClick={toToday}>\r\n          今天\r\n        </span>\r\n      )}\r\n\r\n      <div className={styles.dataMode}>\r\n        <Tabs\r\n          defaultActiveKey={ViewMode.Day}\r\n          tabPosition=\"top\"\r\n          onChange={handleChange}\r\n        >\r\n          {viewModeOptions.map(ele => (\r\n            <TabPane tab={ele.label} key={ele.value} />\r\n          ))}\r\n        </Tabs>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DataMode;\r\n","import React, {\r\n  useState,\r\n  SyntheticEvent,\r\n  useRef,\r\n  useEffect,\r\n  useMemo,\r\n  useCallback,\r\n} from \"react\";\r\nimport { ViewMode, GanttProps } from \"../../types/public-types\";\r\nimport { GridProps } from \"../grid/grid\";\r\nimport {\r\n  ganttDateRange,\r\n  seedDates,\r\n  addToDate,\r\n} from \"../../helpers/date-helper\";\r\nimport { CalendarProps } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\r\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\r\nimport { DeleteTooltip } from \"../other/deleteTooltip\";\r\n\r\nimport { VerticalScroll } from \"../other/vertical-scroll\";\r\nimport { TaskGantt } from \"./task-gantt\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\r\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./gantt.module.css\";\r\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\r\nimport GanttConfig from \"../gantt-config/index\";\r\nimport GuideModal from \"./guide-modal\";\r\nimport { Button } from \"antd\";\r\nimport ArrowIcon from \"../icons/arrow\";\r\nimport utils from \"../../helpers/utils\";\r\nimport { scrollBarHeight } from \"../../helpers/dicts\";\r\nimport DataMode from \"./data-mode\";\r\n\r\nimport \"./gantt.css\";\r\n\r\nimport {\r\n  GanttConfigContext,\r\n  ConfigHandleContext,\r\n  BaseLineContext,\r\n} from \"../../contsxt\";\r\nconst widthData = {\r\n  [ViewMode.Month]: 300,\r\n  [ViewMode.Week]: 210,\r\n  [ViewMode.Year]: 240,\r\n  [ViewMode.Quarter]: 180,\r\n};\r\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\r\n  tasks,\r\n  baseLineLog,\r\n  isUpdate,\r\n  headerHeight = 41,\r\n  // columnWidth = 60,\r\n  listCellWidth = \"155px\",\r\n  listWidth = 496,\r\n  listBottomHeight = 48,\r\n  rowHeight = 41,\r\n  // viewMode = ViewMode.Day,\r\n  // locale = \"en-GB\",\r\n  locale = \"zh-cn\",\r\n  barFill = 60, // bar占的百分比\r\n  barCornerRadius = 4,\r\n  barProgressColor = \"#4B8BFF\",\r\n  barProgressSelectedColor = \"#4B8BFF\",\r\n  barBackgroundColor = \"#4B8BFF\",\r\n  barBackgroundSelectedColor = \"#4B8BFF\",\r\n  projectProgressColor = \"#7db59a\",\r\n  projectProgressSelectedColor = \"#59a985\",\r\n  projectBackgroundColor = \"#fac465\",\r\n  projectBackgroundSelectedColor = \"#f7bb53\",\r\n  milestoneBackgroundColor = \"#f1c453\",\r\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\r\n  handleWidth = 2,\r\n  timeStep = 300000,\r\n  arrowColor = \"grey\",\r\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\r\n  fontSize = \"14px\",\r\n  arrowIndent = 20,\r\n  todayColor = \"#FFAB00\",\r\n  TooltipContent = StandardTooltipContent,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onDelete,\r\n  onSelect,\r\n  renderTaskListComponent,\r\n  renderOverflowTooltip,\r\n  renderUserAvatar,\r\n  itemTypeData = [], // 卡片类型\r\n  configHandle, // 配置事件\r\n  baseLineHandle, // 基线事件\r\n  setCurrentLog, // 选择基线log\r\n  ganttConfig = {}, // 配置详情\r\n  itemLinks = [], // 卡片关联\r\n  addConnection,\r\n  delConnection,\r\n  baselineList = [],\r\n  currentLog,\r\n  actionRef,\r\n  workspaceId,\r\n  getCustomFields, // 获取字段\r\n  isConnect = true,\r\n  isViewModeChange = true,\r\n  onMouseEvent,\r\n  onClickEvent,\r\n  configVisibleChange, // 甘特图配置页面显示和隐藏\r\n  tableQuerySelector = \".BaseTable__table-main .BaseTable__body\",\r\n}) => {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const taskListRef = useRef<HTMLDivElement>(null);\r\n  const onMouseEventRef = useRef<any>(null);\r\n  const taskGanttContainerRef = useRef<any>({});\r\n  const verticalScrollContainerRef = useRef<HTMLDivElement>(null);\r\n  const horizontalScrollContainerRef = useRef<HTMLDivElement>(null);\r\n  const [viewMode, setViewMode] = useState(ViewMode.Day);\r\n  const [columnWidth, setColumnWidth] = useState(60);\r\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\r\n    const [startDate, endDate] = ganttDateRange(viewMode);\r\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\r\n  });\r\n  const CACHE_LIST_WIDTH_KEY = \"gantt-cache-list-width\";\r\n  const cacheListWidth = utils.getLocalStorageItem(CACHE_LIST_WIDTH_KEY);\r\n  const initListWidth = useMemo(() => {\r\n    return cacheListWidth || listWidth;\r\n  }, [listWidth, cacheListWidth]);\r\n\r\n  const [taskHeight, setTaskHeight] = useState((rowHeight * barFill) / 100);\r\n  const [taskListWidth, setTaskListWidth] = useState(initListWidth);\r\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\r\n  const [ganttHeight, setGanttHeight] = useState(0);\r\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\r\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\r\n  const [logTasks, setLogTasks] = useState<BarTask[]>([]);\r\n  // 定义列表是否有横向滚动条，以适配甘特图的横向滚动条\r\n  const [isTableScrollX, setIsTableScrollX] = useState(true);\r\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\r\n    action: \"\",\r\n  });\r\n  const [currentConnection, setCurrentConnection] = useState(null);\r\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\r\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\r\n\r\n  const eleListTableBodyRef = useRef<any>(null);\r\n  const [scrollY, setScrollY] = useState(0);\r\n  const [scrollX, setScrollX] = useState(0);\r\n  const refScrollY: any = useRef(0);\r\n  const refScrollX: any = useRef(0);\r\n  const [visible, setVisible] = useState(false);\r\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\r\n  const [guideModalVisible, setGuideModalVisible] = useState(false);\r\n  const [currentPanel, setCurrentPanel] = useState(\"\");\r\n\r\n  const dividerPositionRef = useRef({ left: 0 });\r\n  // 到今天移动的距离\r\n  // const [todayDistance, setTodayDistance] = useState(0);\r\n  const svgWidth = dateSetup.dates.length * columnWidth;\r\n  const ganttFullHeight = barTasks.length * rowHeight;\r\n  const minWidth = 2; // 面板折叠后，taskListWidth 设置成2（设置成0后，dom节点会移除）\r\n  const paddingLeft = 38; // wrapper的padding值， 用于dividerWrapper定位\r\n  // task change events\r\n  useEffect(() => {\r\n    const [startDate, endDate] = ganttDateRange(viewMode);\r\n    const newDates = seedDates(startDate, endDate, viewMode);\r\n    setDateSetup({ dates: newDates, viewMode });\r\n    setBarTasks(\r\n      convertToBarTasks(\r\n        tasks,\r\n        newDates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor,\r\n        viewMode\r\n      )\r\n    );\r\n  }, [\r\n    tasks,\r\n    isUpdate,\r\n    viewMode,\r\n    rowHeight,\r\n    barCornerRadius,\r\n    columnWidth,\r\n    taskHeight,\r\n    handleWidth,\r\n    barProgressColor,\r\n    barProgressSelectedColor,\r\n    barBackgroundColor,\r\n    barBackgroundSelectedColor,\r\n    projectProgressColor,\r\n    projectProgressSelectedColor,\r\n    projectBackgroundColor,\r\n    projectBackgroundSelectedColor,\r\n    milestoneBackgroundColor,\r\n    milestoneBackgroundSelectedColor,\r\n  ]);\r\n  useEffect(() => {\r\n    const [startDate, endDate] = ganttDateRange(viewMode);\r\n    const newDates = seedDates(startDate, endDate, viewMode);\r\n    if (baseLineLog?.length) {\r\n      setLogTasks(\r\n        convertToBarTasks(\r\n          // @ts-ignore\r\n          (tasks = baseLineLog),\r\n          newDates,\r\n          columnWidth,\r\n          rowHeight,\r\n          taskHeight,\r\n          barCornerRadius,\r\n          handleWidth,\r\n          barProgressColor,\r\n          barProgressSelectedColor,\r\n          barBackgroundColor,\r\n          barBackgroundSelectedColor,\r\n          projectProgressColor,\r\n          projectProgressSelectedColor,\r\n          projectBackgroundColor,\r\n          projectBackgroundSelectedColor,\r\n          milestoneBackgroundColor,\r\n          milestoneBackgroundSelectedColor,\r\n          viewMode\r\n        )\r\n      );\r\n    }\r\n  }, [\r\n    baseLineLog,\r\n    isUpdate,\r\n    viewMode,\r\n    rowHeight,\r\n    barCornerRadius,\r\n    columnWidth,\r\n    taskHeight,\r\n    handleWidth,\r\n    barProgressColor,\r\n    barProgressSelectedColor,\r\n    barBackgroundColor,\r\n    barBackgroundSelectedColor,\r\n    projectProgressColor,\r\n    projectProgressSelectedColor,\r\n    projectBackgroundColor,\r\n    projectBackgroundSelectedColor,\r\n    milestoneBackgroundColor,\r\n    milestoneBackgroundSelectedColor,\r\n  ]);\r\n  useEffect(() => {\r\n    const { changedTask, action } = ganttEvent;\r\n    if (changedTask) {\r\n      // 用于判断mouseLeave事件\r\n      onMouseEventRef.current = changedTask;\r\n      if (action === \"delete\") {\r\n        setGanttEvent({ action: \"\" });\r\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\r\n      } else if (\r\n        action === \"move\" ||\r\n        action === \"end\" ||\r\n        action === \"start\" ||\r\n        action === \"progress\"\r\n      ) {\r\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\r\n        if (\r\n          prevStateTask &&\r\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\r\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\r\n            prevStateTask.progress !== changedTask.progress)\r\n        ) {\r\n          // actions for change\r\n          const newTaskList = barTasks.map(t =>\r\n            t.id === changedTask.id ? changedTask : t\r\n          );\r\n          setBarTasks(newTaskList);\r\n        }\r\n      } else if (action === \"click\") {\r\n        onClickEvent?.(action, changedTask);\r\n      } else if (action === \"mouseenter\") {\r\n        onMouseEvent?.(action, changedTask);\r\n      }\r\n    } else if (onMouseEventRef.current) {\r\n      onMouseEvent?.(action, changedTask);\r\n    }\r\n  }, [ganttEvent, barTasks, onMouseEvent, onClickEvent]);\r\n\r\n  useEffect(() => {\r\n    if (failedTask) {\r\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\r\n      setFailedTask(null);\r\n    }\r\n  }, [failedTask, barTasks]);\r\n\r\n  useEffect(() => {\r\n    const newTaskHeight = (rowHeight * barFill) / 100;\r\n    if (newTaskHeight !== taskHeight) {\r\n      setTaskHeight(newTaskHeight);\r\n    }\r\n  }, [rowHeight, barFill, taskHeight]);\r\n\r\n  useEffect(() => {\r\n    if (!listCellWidth) {\r\n      setTaskListWidth(0);\r\n    }\r\n    if (taskListRef.current) {\r\n      setTaskListWidth(taskListRef.current.offsetWidth);\r\n    }\r\n  }, [taskListRef, listCellWidth]);\r\n  // 在数据为空时宽度设为100%，和structure保持一致\r\n  useEffect(() => {\r\n    if (wrapperRef.current) {\r\n      if (tasks.length) {\r\n        setTaskListWidth(initListWidth);\r\n      } else {\r\n        setTaskListWidth(wrapperRef?.current?.offsetWidth);\r\n      }\r\n    }\r\n  }, [tasks.length, initListWidth]);\r\n  useEffect(() => {\r\n    if (wrapperRef.current) {\r\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\r\n    }\r\n  }, [wrapperRef, taskListWidth]);\r\n\r\n  useEffect(() => {\r\n    if (ganttHeight) {\r\n      setSvgContainerHeight(ganttHeight + headerHeight);\r\n    } else {\r\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\r\n    }\r\n  }, [ganttHeight, tasks, headerHeight, rowHeight]);\r\n  useEffect(() => {\r\n    const ele = taskGanttContainerRef?.current?.horizontalContainerRef;\r\n    if (ele) {\r\n      setGanttHeight(ele.offsetHeight);\r\n    }\r\n  }, [taskGanttContainerRef?.current?.horizontalContainerRef]);\r\n\r\n  const setElementsScrollY = useCallback(() => {\r\n    eleListTableBodyRef.current &&\r\n      (eleListTableBodyRef.current.scrollTop = refScrollY.current);\r\n    taskGanttContainerRef?.current?.horizontalContainerRef &&\r\n      (taskGanttContainerRef.current.horizontalContainerRef.scrollTop =\r\n        refScrollY.current);\r\n    verticalScrollContainerRef?.current &&\r\n      (verticalScrollContainerRef.current.scrollTop = refScrollY.current);\r\n  }, []);\r\n\r\n  const setElementsScrollX = useCallback(() => {\r\n    taskGanttContainerRef?.current?.verticalGanttContainerRef &&\r\n      (taskGanttContainerRef.current.verticalGanttContainerRef.scrollLeft =\r\n        refScrollX.current);\r\n    horizontalScrollContainerRef?.current &&\r\n      (horizontalScrollContainerRef.current.scrollLeft = refScrollX.current);\r\n  }, []);\r\n\r\n  const handleWheel = useCallback(\r\n    (event: WheelEvent) => {\r\n      if (Math.abs(event.deltaX) >= Math.abs(event.deltaY)) {\r\n        if (event.deltaX !== 0) {\r\n          // @ts-ignore\r\n          const path = event.path || [];\r\n          const filterData = path.filter(\r\n            (ele: HTMLDivElement) => ele.id === \"ganttTaskListWrapper\"\r\n          );\r\n          if (filterData?.length) {\r\n            return;\r\n          }\r\n          event.preventDefault();\r\n          event.stopPropagation();\r\n          const scrollX = refScrollX.current;\r\n          const scrollMove = event.deltaX;\r\n          let newScrollX = scrollX + scrollMove;\r\n          if (newScrollX < 0) {\r\n            newScrollX = 0;\r\n          } else if (newScrollX > svgWidth) {\r\n            newScrollX = svgWidth;\r\n          }\r\n          refScrollX.current = newScrollX;\r\n          setElementsScrollX();\r\n          setScrollX(refScrollX.current);\r\n        }\r\n      } else {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        if (event.deltaY !== 0) {\r\n          // Y轴滚动处理\r\n          // 判断列表是否有横向滚动条\r\n          const isScroll =\r\n            eleListTableBodyRef?.current?.clientWidth !==\r\n            eleListTableBodyRef?.current?.scrollWidth;\r\n          setIsTableScrollX(isScroll);\r\n          const max = ganttFullHeight - ganttHeight;\r\n          const scrollY = refScrollY.current;\r\n          let newScrollY = scrollY + event.deltaY;\r\n          if (newScrollY < 0) {\r\n            newScrollY = 0;\r\n          } else if (newScrollY > max) {\r\n            if (isTableScrollX) {\r\n              // 16为横向滚动条的高度\r\n              newScrollY = max + scrollBarHeight;\r\n            } else {\r\n              newScrollY = max;\r\n            }\r\n          }\r\n          refScrollY.current = newScrollY;\r\n          setElementsScrollY();\r\n          setScrollY(refScrollY.current);\r\n        }\r\n      }\r\n      setIgnoreScrollEvent(true);\r\n    },\r\n    [\r\n      ganttFullHeight,\r\n      ganttHeight,\r\n      setElementsScrollX,\r\n      setElementsScrollY,\r\n      svgWidth,\r\n      isTableScrollX,\r\n    ]\r\n  );\r\n\r\n  useEffect(() => {\r\n    // subscribe if scroll is necessary\r\n    if (wrapperRef.current) {\r\n      wrapperRef.current.addEventListener(\"wheel\", handleWheel, {\r\n        passive: false,\r\n      });\r\n    }\r\n    return () => {\r\n      if (wrapperRef.current) {\r\n        wrapperRef?.current?.removeEventListener(\"wheel\", handleWheel);\r\n      }\r\n    };\r\n  }, [handleWheel]);\r\n\r\n  const handleScrollY = useCallback(\r\n    (event: SyntheticEvent<HTMLDivElement>) => {\r\n      const scrollY = refScrollY.current;\r\n      if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\r\n        refScrollY.current = event.currentTarget.scrollTop;\r\n        setElementsScrollY();\r\n        setScrollY(refScrollY.current);\r\n      }\r\n      setIgnoreScrollEvent(false);\r\n      setCurrentConnection(null);\r\n    },\r\n    [ignoreScrollEvent, setElementsScrollY]\r\n  );\r\n\r\n  const handleScrollX = useCallback(\r\n    (event: SyntheticEvent<HTMLDivElement>) => {\r\n      const scrollX = refScrollX.current;\r\n      if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\r\n        refScrollX.current = event.currentTarget.scrollLeft;\r\n        setElementsScrollX();\r\n        setScrollX(refScrollX.current);\r\n      }\r\n      setIgnoreScrollEvent(false);\r\n      setCurrentConnection(null);\r\n    },\r\n    [ignoreScrollEvent, setElementsScrollX]\r\n  );\r\n\r\n  /**\r\n   * Handles arrow keys events and transform it to new scroll\r\n   */\r\n  const handleKeyDown = useCallback(\r\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n      if (\r\n        [\r\n          \"Down\",\r\n          \"ArrowDown\",\r\n          \"Up\",\r\n          \"ArrowUp\",\r\n          \"Left\",\r\n          \"ArrowLeft\",\r\n          \"Right\",\r\n          \"ArrowRight\",\r\n        ].includes(event.key)\r\n      ) {\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n        const scrollY = refScrollY.current;\r\n        const scrollX = refScrollX.current;\r\n        let newScrollY = scrollY;\r\n        let newScrollX = scrollX;\r\n        let isX = true;\r\n        switch (event.key) {\r\n          case \"Down\": // IE/Edge specific value\r\n          case \"ArrowDown\":\r\n            newScrollY += rowHeight;\r\n            isX = false;\r\n            break;\r\n          case \"Up\": // IE/Edge specific value\r\n          case \"ArrowUp\":\r\n            newScrollY -= rowHeight;\r\n            isX = false;\r\n            break;\r\n          case \"Left\":\r\n          case \"ArrowLeft\":\r\n            newScrollX -= columnWidth;\r\n            break;\r\n          case \"Right\": // IE/Edge specific value\r\n          case \"ArrowRight\":\r\n            newScrollX += columnWidth;\r\n            break;\r\n        }\r\n        if (isX) {\r\n          if (newScrollX < 0) {\r\n            newScrollX = 0;\r\n          } else if (newScrollX > svgWidth) {\r\n            newScrollX = svgWidth;\r\n          }\r\n          refScrollX.current = newScrollX;\r\n          setElementsScrollX();\r\n          setScrollX(refScrollX.current);\r\n        } else {\r\n          if (newScrollY < 0) {\r\n            newScrollY = 0;\r\n          } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n            newScrollY = ganttFullHeight - ganttHeight;\r\n          }\r\n          refScrollY.current = newScrollY;\r\n          setElementsScrollY();\r\n          setScrollY(refScrollY.current);\r\n        }\r\n        setIgnoreScrollEvent(true);\r\n      }\r\n    },\r\n    [\r\n      columnWidth,\r\n      ganttFullHeight,\r\n      ganttHeight,\r\n      rowHeight,\r\n      setElementsScrollX,\r\n      setElementsScrollY,\r\n      svgWidth,\r\n    ]\r\n  );\r\n\r\n  /**\r\n   * Task select event\r\n   */\r\n  const handleSelectedTask = useCallback(\r\n    (taskId: string) => {\r\n      const newSelectedTask = barTasks.find(t => t.id === taskId);\r\n      const oldSelectedTask = barTasks.find(\r\n        t => !!selectedTask && t.id === selectedTask.id\r\n      );\r\n      if (onSelect) {\r\n        if (oldSelectedTask) {\r\n          onSelect(oldSelectedTask, false);\r\n        }\r\n        if (newSelectedTask) {\r\n          onSelect(newSelectedTask, true);\r\n        }\r\n      }\r\n      setSelectedTask(newSelectedTask);\r\n    },\r\n    [barTasks, onSelect, selectedTask]\r\n  );\r\n  const boundLeft = wrapperRef.current?.getBoundingClientRect().left || 0;\r\n  const boundTop = wrapperRef.current?.getBoundingClientRect().top || 0;\r\n  const offsetLeft = taskListRef.current?.clientWidth || 0;\r\n  const gridProps: GridProps = useMemo(() => {\r\n    return {\r\n      columnWidth,\r\n      svgWidth,\r\n      tasks: tasks,\r\n      rowHeight,\r\n      dates: dateSetup.dates,\r\n      todayColor,\r\n      scrollX,\r\n      // offsetLeft: 750,\r\n      offsetLeft: boundLeft + offsetLeft,\r\n      onDateChange,\r\n    };\r\n  }, [\r\n    boundLeft,\r\n    columnWidth,\r\n    dateSetup.dates,\r\n    offsetLeft,\r\n    onDateChange,\r\n    rowHeight,\r\n    scrollX,\r\n    svgWidth,\r\n    tasks,\r\n    todayColor,\r\n  ]);\r\n  const calendarProps: CalendarProps = useMemo(() => {\r\n    return {\r\n      dateSetup,\r\n      locale,\r\n      viewMode,\r\n      headerHeight,\r\n      columnWidth,\r\n      fontFamily,\r\n      fontSize,\r\n    };\r\n  }, [\r\n    columnWidth,\r\n    dateSetup,\r\n    fontFamily,\r\n    fontSize,\r\n    headerHeight,\r\n    locale,\r\n    viewMode,\r\n  ]);\r\n  const barProps: TaskGanttContentProps = useMemo(() => {\r\n    return {\r\n      tasks: barTasks,\r\n      logTasks: logTasks,\r\n      dates: dateSetup.dates,\r\n      ganttEvent,\r\n      selectedTask,\r\n      rowHeight,\r\n      taskHeight,\r\n      columnWidth,\r\n      arrowColor,\r\n      timeStep,\r\n      fontFamily,\r\n      fontSize,\r\n      arrowIndent,\r\n      svgWidth,\r\n      setGanttEvent,\r\n      setFailedTask,\r\n      setSelectedTask: handleSelectedTask,\r\n      onDateChange,\r\n      onProgressChange,\r\n      onDoubleClick,\r\n      onDelete,\r\n      delConnection,\r\n      addConnection,\r\n      itemLinks,\r\n      isConnect,\r\n      setCurrentConnection,\r\n      currentConnection,\r\n    };\r\n  }, [\r\n    barTasks,\r\n    logTasks,\r\n    dateSetup.dates,\r\n    ganttEvent,\r\n    selectedTask,\r\n    rowHeight,\r\n    taskHeight,\r\n    columnWidth,\r\n    arrowColor,\r\n    timeStep,\r\n    fontFamily,\r\n    fontSize,\r\n    arrowIndent,\r\n    svgWidth,\r\n    setGanttEvent,\r\n    setFailedTask,\r\n    onDateChange,\r\n    onProgressChange,\r\n    onDoubleClick,\r\n    onDelete,\r\n    delConnection,\r\n    addConnection,\r\n    itemLinks,\r\n    handleSelectedTask,\r\n    isConnect,\r\n    currentConnection,\r\n  ]);\r\n  const TaskListComponent = useMemo(() => {\r\n    if (typeof renderTaskListComponent === \"function\") {\r\n      return renderTaskListComponent();\r\n    }\r\n    return null;\r\n  }, [renderTaskListComponent]);\r\n  const isHiddenShowTooltip = useMemo(() => {\r\n    return [\"move\", \"start\", \"end\", \"progress\"].includes(ganttEvent.action);\r\n  }, [ganttEvent]);\r\n  useEffect(() => {\r\n    if (TaskListComponent) {\r\n      // 解决获取不到dom元素\r\n      setTimeout(() => {\r\n        eleListTableBodyRef.current = document.querySelector(\r\n          tableQuerySelector\r\n        );\r\n      });\r\n    }\r\n  }, [TaskListComponent, tableQuerySelector]);\r\n  const todayX = useMemo(() => {\r\n    // 之前考虑通过context， 在grid-body中setState 传递移动的距离，但是页面会抖动\r\n    const now = new Date();\r\n    let tickX = 0;\r\n    let newTickX = 0;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      if (\r\n        (i + 1 !== dateSetup.dates.length &&\r\n          date.getTime() < now.getTime() &&\r\n          dateSetup.dates[i + 1].getTime() >= now.getTime()) ||\r\n        // if current date is last\r\n        (i !== 0 &&\r\n          i + 1 === dateSetup.dates.length &&\r\n          date.getTime() < now.getTime() &&\r\n          addToDate(\r\n            date,\r\n            date.getTime() - dateSetup.dates[i - 1].getTime(),\r\n            \"millisecond\"\r\n          ).getTime() >= now.getTime())\r\n      ) {\r\n        // 当天的零点的时间戳（毫秒）\r\n        const currentStamp = new Date(\r\n          new Date().toLocaleDateString()\r\n        ).getTime();\r\n        // 当天和上一个时间的差\r\n        const currentMinus =\r\n          (currentStamp + 86400000 - dateSetup.dates[i].getTime()) / 86400000;\r\n        // 前后时间差\r\n        const totalMinus =\r\n          (dateSetup.dates[i + 1].getTime() - dateSetup.dates[i].getTime()) /\r\n          86400000;\r\n        newTickX =\r\n          tickX +\r\n          columnWidth * (currentMinus / totalMinus) -\r\n          columnWidth / totalMinus / 2;\r\n      }\r\n      tickX += columnWidth;\r\n    }\r\n    return newTickX;\r\n  }, [columnWidth, dateSetup.dates]);\r\n  const toToday = useCallback(() => {\r\n    refScrollX.current = todayX - svgContainerWidth / 2;\r\n    setElementsScrollX();\r\n    setScrollX(refScrollX.current);\r\n  }, [setElementsScrollX, svgContainerWidth, todayX]);\r\n\r\n  useEffect(() => {\r\n    toToday();\r\n  }, [toToday]);\r\n\r\n  const toConfig = useCallback(() => {\r\n    setVisible(true);\r\n    configVisibleChange?.(true);\r\n  }, [configVisibleChange]);\r\n  const toGantt = useCallback(() => {\r\n    setVisible(false);\r\n    configVisibleChange?.(false);\r\n  }, [configVisibleChange]);\r\n  const modeChange = useCallback((val: ViewMode) => {\r\n    setViewMode(val);\r\n    setColumnWidth(widthData[val] || 60);\r\n  }, []);\r\n  const handleDividerMouseDown = useCallback(\r\n    (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n      const handleMouseMove = (event: MouseEvent) => {\r\n        const distance = event.clientX - dividerPositionRef.current.left;\r\n        const minWidth = 220; // 拖动时，列表最小宽度为220\r\n        const width =\r\n          taskListWidth + distance > minWidth\r\n            ? taskListWidth + distance\r\n            : minWidth;\r\n        setTaskListWidth(width);\r\n        utils.setLocalStorageItem(CACHE_LIST_WIDTH_KEY, width);\r\n      };\r\n      const handleMouseUp = () => {\r\n        window.removeEventListener(\"mousemove\", handleMouseMove);\r\n        window.removeEventListener(\"mouseup\", handleMouseUp);\r\n        const isScroll =\r\n          eleListTableBodyRef?.current?.clientWidth !==\r\n          eleListTableBodyRef?.current?.scrollWidth;\r\n        setIsTableScrollX(isScroll);\r\n      };\r\n      dividerPositionRef.current.left = event.clientX;\r\n      window.addEventListener(\"mousemove\", handleMouseMove);\r\n      window.addEventListener(\"mouseup\", handleMouseUp);\r\n    },\r\n    [taskListWidth]\r\n  );\r\n\r\n  const handleDividerClick = useCallback(\r\n    (event: React.MouseEvent<HTMLDivElement, MouseEvent>) => {\r\n      let width;\r\n      if (taskListWidth > minWidth) {\r\n        dividerPositionRef.current.left = taskListWidth;\r\n        width = minWidth;\r\n      } else {\r\n        width = dividerPositionRef.current.left || listWidth;\r\n      }\r\n      setTaskListWidth(width);\r\n      utils.setLocalStorageItem(CACHE_LIST_WIDTH_KEY, width);\r\n      event.stopPropagation();\r\n    },\r\n    [listWidth, taskListWidth]\r\n  );\r\n  // 退出基线\r\n  const baselineExit = () => {\r\n    setCurrentLog?.({});\r\n    setLogTasks([]);\r\n  };\r\n  const toPanel = useCallback(() => {\r\n    setGuideModalVisible(false);\r\n    toConfig();\r\n  }, [toConfig]);\r\n  React.useImperativeHandle(actionRef, () => ({\r\n    openGuide(type: string) {\r\n      setCurrentPanel(type);\r\n      setGuideModalVisible(true);\r\n    },\r\n    toPanel: toPanel,\r\n  }));\r\n\r\n  const panelCanel = useCallback(() => {\r\n    setGuideModalVisible(false);\r\n  }, []);\r\n  const OverflowTooltip = useCallback(\r\n    (value: string) => {\r\n      if (typeof renderOverflowTooltip === \"function\") {\r\n        return renderOverflowTooltip(value);\r\n      }\r\n      return <React.Fragment />;\r\n    },\r\n    [renderOverflowTooltip]\r\n  );\r\n  return (\r\n    <div className={styles.box}>\r\n      <GuideModal\r\n        visible={guideModalVisible}\r\n        toPanel={toPanel}\r\n        toCancel={panelCanel}\r\n      />\r\n      <GanttConfigContext.Provider\r\n        value={{\r\n          ganttConfig,\r\n        }}\r\n      >\r\n        <ConfigHandleContext.Provider\r\n          value={{\r\n            configHandle,\r\n            itemTypeData,\r\n            workspaceId,\r\n            getCustomFields,\r\n          }}\r\n        >\r\n          <BaseLineContext.Provider\r\n            value={{\r\n              baseLineHandle,\r\n              baselineList,\r\n              setCurrentLog,\r\n              setLogTasks,\r\n              currentLog,\r\n              OverflowTooltip,\r\n            }}\r\n          >\r\n            <GanttConfig\r\n              toGantt={toGantt}\r\n              visible={visible}\r\n              currentPanel={currentPanel}\r\n              configHandle={configHandle}\r\n              ganttConfig={ganttConfig}\r\n            />\r\n          </BaseLineContext.Provider>\r\n        </ConfigHandleContext.Provider>\r\n        <div\r\n          className={styles.wrapper}\r\n          onKeyDown={handleKeyDown}\r\n          tabIndex={0}\r\n          ref={wrapperRef}\r\n        >\r\n          {currentLog?.name && (\r\n            <div className={styles.choosedBaselIne}>\r\n              <span className={styles.loaded}>\r\n                {OverflowTooltip(`已加载：${currentLog?.name}`)}\r\n              </span>\r\n              <Button size=\"small\" onClick={baselineExit}>\r\n                退出\r\n              </Button>\r\n            </div>\r\n          )}\r\n\r\n          {listCellWidth && TaskListComponent && (\r\n            <div\r\n              ref={taskListRef}\r\n              className={styles.taskListWrapper}\r\n              id=\"ganttTaskListWrapper\"\r\n              style={{\r\n                width: `${taskListWidth}px`,\r\n                visibility: tasks?.length ? \"visible\" : \"hidden\",\r\n              }}\r\n            >\r\n              {TaskListComponent}\r\n            </div>\r\n          )}\r\n          {tasks.length > 0 && (\r\n            <TaskGantt\r\n              ref={taskGanttContainerRef}\r\n              gridProps={gridProps}\r\n              calendarProps={calendarProps}\r\n              barProps={barProps}\r\n              ganttHeight={ganttHeight}\r\n              scrollX={scrollX}\r\n              onScroll={handleScrollX}\r\n              listBottomHeight={listBottomHeight}\r\n              taskListHeight={taskListRef?.current?.offsetHeight}\r\n              headerHeight={headerHeight}\r\n            />\r\n          )}\r\n          <div\r\n            className={\r\n              taskListWidth <= minWidth\r\n                ? `${styles.dividerWrapper} ${styles.reverse}`\r\n                : styles.dividerWrapper\r\n            }\r\n            style={{\r\n              left: `${\r\n                taskListWidth - minWidth > 0\r\n                  ? taskListWidth + paddingLeft\r\n                  : paddingLeft\r\n              }px`,\r\n              visibility: tasks?.length ? \"visible\" : \"hidden\",\r\n              height: `calc(100% - ${listBottomHeight}px)`,\r\n            }}\r\n          >\r\n            <div\r\n              className={styles.dividerContainer}\r\n              style={{\r\n                height: `calc(100% - ${headerHeight}px)`,\r\n                top: `${headerHeight}px`,\r\n              }}\r\n            >\r\n              <hr\r\n                onMouseDown={\r\n                  taskListWidth <= minWidth ? undefined : handleDividerMouseDown\r\n                }\r\n              />\r\n              <hr className={styles.maskLine} />\r\n              <hr className={styles.maskLineTop} />\r\n              <span\r\n                className={styles.dividerIconWarpper}\r\n                onMouseDown={e => e.stopPropagation()}\r\n                onClick={handleDividerClick}\r\n              >\r\n                <ArrowIcon />\r\n              </span>\r\n            </div>\r\n          </div>\r\n          {isViewModeChange && (\r\n            <DataMode\r\n              toToday={toToday}\r\n              modeChange={modeChange}\r\n              todayX={todayX}\r\n              svgContainerWidth={svgContainerWidth}\r\n              refScrollX={refScrollX.current}\r\n            />\r\n          )}\r\n          {ganttEvent.changedTask && !isHiddenShowTooltip && (\r\n            <Tooltip\r\n              arrowIndent={arrowIndent}\r\n              rowHeight={rowHeight}\r\n              svgContainerHeight={svgContainerHeight}\r\n              svgContainerWidth={svgContainerWidth}\r\n              fontFamily={fontFamily}\r\n              fontSize={fontSize}\r\n              scrollX={scrollX}\r\n              scrollY={scrollY}\r\n              task={ganttEvent.changedTask}\r\n              headerHeight={headerHeight}\r\n              taskListWidth={taskListWidth}\r\n              TooltipContent={TooltipContent}\r\n              renderUserAvatar={renderUserAvatar}\r\n            />\r\n          )}\r\n          {currentConnection && (\r\n            <DeleteTooltip\r\n              tasks={tasks}\r\n              taskListWidth={taskListWidth}\r\n              currentConnection={currentConnection}\r\n              boundTop={boundTop}\r\n              itemLinks={itemLinks}\r\n              delConnection={delConnection}\r\n              setCurrentConnection={setCurrentConnection}\r\n              svgContainerHeight={svgContainerHeight}\r\n            />\r\n          )}\r\n          {tasks.length > 0 && (\r\n            <VerticalScroll\r\n              ref={verticalScrollContainerRef}\r\n              ganttFullHeight={ganttFullHeight}\r\n              ganttHeight={ganttHeight}\r\n              headerHeight={headerHeight}\r\n              listBottomHeight={listBottomHeight}\r\n              onScroll={handleScrollY}\r\n            />\r\n          )}\r\n          {tasks.length > 0 && (\r\n            <HorizontalScroll\r\n              ref={horizontalScrollContainerRef}\r\n              listBottomHeight={\r\n                isTableScrollX\r\n                  ? listBottomHeight\r\n                  : listBottomHeight - scrollBarHeight\r\n              }\r\n              svgWidth={svgWidth}\r\n              taskListWidth={taskListWidth}\r\n              onScroll={handleScrollX}\r\n            />\r\n          )}\r\n        </div>\r\n      </GanttConfigContext.Provider>\r\n    </div>\r\n  );\r\n};\r\n"],"names":["ViewMode","viewModeOptions","label","value","DateDeltaInit","Month","Year","common","leap","Quarter","LeapMounth","LeapQuarter","intlDTCache","getCachedDateTimeFormat","locString","opts","key","JSON","stringify","dtf","Intl","DateTimeFormat","addToDate","date","quantity","scale","newDate","Date","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","getMilliseconds","startOfDate","scores","shouldReset","_scale","maxScore","indexOf","ganttDateRange","viewMode","newStartDate","now","newEndDate","year","oneYear","Week","getMonday","Day","seedDates","startDate","endDate","currentDate","dates","HalfDay","QuarterDay","push","getLocaleMonth","locale","bottomValue","month","format","replace","toLocaleUpperCase","day","getDay","diff","setDate","getWeekNumberISO8601","tmpDate","valueOf","dayNumber","firstThursday","setMonth","weekNumber","Math","ceil","toString","length","barBackgroundColorPivotalPath","barBackgroundColorTimeError","errorLinkBorderColor","pivotalPathLinkBorderColor","scrollBarHeight","dayFormat","dayTimeFormat","drawerWidth","daySeconds","Tooltip","memo","task","rowHeight","svgContainerHeight","svgContainerWidth","scrollX","scrollY","arrowIndent","fontSize","fontFamily","headerHeight","taskListWidth","TooltipContent","renderUserAvatar","tooltipRef","useRef","relatedY","setRelatedY","useState","relatedX","setRelatedX","UserAvatar","useMemo","item","assignee","React","Fragment","useEffect","current","newRelatedX","x2","newRelatedY","index","tooltipHeight","offsetHeight","tooltipWidth","offsetWidth","tooltipLowerPoint","tooltipLeftmostPoint","fullChartWidth","x1","ref","className","styles","tooltipDetailsContainer","tooltipDetailsContainerHidden","style","left","type","top","userAvatar","StandardTooltipContent","tooltipDefaultContainer","tooltipId","tooltipName","name","lightColor","status","dayjs","end","start","Svg","IconComponent","props","DeleteTooltip","tasks","delConnection","itemLinks","currentConnection","boundTop","setCurrentConnection","path","window","location","origin","sourceTask","filter","ele","id","connection","sourceId","targetTask","targetId","originalEvent","clientY","clientX","removeConnection","currentLink","source","objectId","destination","linkType","getData","tooltipDeleteContainer","tooltipDeleteDefaultContainer","taskInfo","title","itemType","icon","src","endpoints","anchor","cssClass","connect","connectionLine","connectionIcon","ConnectionIcon","unconnectionIcon","onClick","UnconnectionIcon","VerticalScrollComponent","ganttHeight","ganttFullHeight","onScroll","listBottomHeight","scrollHeight","height","marginTop","marginBottom","scroll","width","VerticalScroll","forwardRef","GanttConfigContext","createContext","ConfigHandleContext","BaseLineContext","extend","weekday","isRestDay","dt","includes","GridBody","svgWidth","columnWidth","todayColor","offsetLeft","taskListHeight","onDateChange","ganttConfig","useContext","translateX","setTranslateX","translateY","setTranslateY","isShow","setIsShow","parts","setParts","remainderDays","setRemainderDays","currentIndex","setCurrentDataIndex","y","invalidColumn","gridRows","rowLines","x","y1","y2","gridRowLine","handleMouseMove","useCallback","event","pointerX","currentDataIndex","floor","dateRemainder","dayWidth","remainder","handleInvalidColumnMouseMove","row","invalidBarClick","taskIndex","Object","assign","time","startOf","toDate","i","onMouseEnter","e","target","parentNode","firstChild","fill","onMouseLeave","gridRow","onMouseMove","ry","rx","cursor","getAttribute","Number","tickX","ticks","today","getTime","gridTick","gridTickWeekday","currentStamp","toLocaleDateString","currentMinus","totalMinus","newTickX","cx","cy","r","stroke","strokeWidth","invalidBar","defaultProps","Grid","TopPartOfCalendar","x1Line","y1Line","y2Line","xText","yText","calendarTopTick","calendarTopText","Calendar","dateSetup","bottomValuesInit","calendarBottomText","getCalendarValuesForYear","topValues","bottomValues","getCalendarValuesForQuarter","topDefaultWidth","topDefaultHeight","currentQuarter","topValue","getCalendarValuesForMonth","getCalendarValuesForWeek","weeksCount","getCalendarValuesForDay","getCalendarValuesForOther","hour","calendarHeader","Arrow","taskFrom","taskTo","taskHeight","indexCompare","taskToEndPosition","trianglePoints","d","points","isKeyboardEvent","undefined","isLeapYear","getQuarter","currMonth","convertToBarTasks","barCornerRadius","handleWidth","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","dateDelta","getTimezoneOffset","barTasks","map","t","convertToBarTask","dependencies","j","dependence","findIndex","barChildren","barTask","convertToMilestone","convertToBar","taskXCoordinate","taskYCoordinate","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","typeInternal","progress","xDate","precision","round","progressWithByParams","taskX1","taskX2","progressByX","barWidth","progressPercent","getProgressPoint","progressX","taskY","point","join","startByX","xStep","steps","additionalXValue","newX","endByX","moveByX","newX1","newX2","dateByX","taskX","taskDate","timeStep","handleTaskBySVGMouseEvent","svgX","action","selectedTask","initEventX1Delta","result","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTask","isChanged","newMoveX1","newMoveX2","BarDisplay","isSelected","progressWidth","onMouseDown","isLog","getBarColor","isTimeErrorItem","isOverdueItem","isPivotalPathItem","barBackground","opacity","BarDateHandle","BarProgressHandle","progressPoint","barHandleProgress","canChangeLayout","commonConfig","isSource","isTarget","maxConnections","endpoint","radius","endpointStyle","connector","alwaysRespectStubs","cornerRadius","stub","connectorStyle","strokeOpacity","connectorHoverStyle","outlineWidth","outlineStroke","connectorOverlays","offsetCalculators","CIRCLE","el","parseInt","ELLIPSE","RECT","sizeCalculators","w","h","relationInit","FS","FF","SS","SF","relationReverse","pointOverEvent","barRef","jsPlumb","classList","add","selectEndpoints","element","addClass","pointOutEvent","remove","removeClass","barAnchor","milestone","Left","Right","normal","useHover","passiveAction","addHoverClass","setVisible","removeHoverClass","nodeDom","addEventListener","removeEventListener","useAddPoint","addPointFinished","setAddPointFinished","setIdChanged","rightPoint","addEndpoint","uuid","bind","leftPoint","deleteEndpoint","Bar","isProgressChangeable","isDateChangeable","onEventStart","setPointInited","ganttEvent","handleHeight","revalidate","barWrapper","tabIndex","barHandleBackground","BarSmall","triangleX","triangleY","projectLeftTriangle","projectRightTriangle","BarParent","base64Milestone","Milestone","milestoneWrapper","milestoneBackground","href","Project","barColor","processColor","projectWith","projectWrapper","projectBackground","projectTop","TaskItem","isDelete","taskItem","setTaskItem","onKeyDown","stopPropagation","onDoubleClick","onFocus","TaskItemLog","TaskGanttContent","logTasks","svg","arrowColor","setGanttEvent","setFailedTask","setSelectedTask","onProgressChange","onDelete","addConnection","clickBaselineItem","isConnect","containerRef","connectUuids","setConnectUuids","createSVGPoint","setXStep","setInitEventX1Delta","isMoving","setIsMoving","jsPlumbInstance","setJsPlumbInstance","pointInited","connectClickHandle","container","connections","getConnections","forEach","newXStep","preventDefault","matrixTransform","getScreenCTM","inverse","handleMouseUp","originalSelectedTask","newChangedTask","isNotLikeOriginal","operationSuccess","error","handleBarEventStart","console","offsetX","nativeEvent","currentLogItem","getLinkTypeId","relation","getHasLinkItems","hasLinkItems","link","needUpdateItems","keys","concat","checkIsPivotalPathLink","relationType","targetPivotalPathItem","checkIsErrorLink","subItems","subItem","flag","targetItems","ancestors","then","ready","instance","getInstance","fire","originalOffset","getOffset","originalSize","getSize","tn","tagName","toUpperCase","apply","setContainer","conn","taskSource","taskTarget","message","warning","linkTypeId","dropEndpoint","desinationTask","infor","params","setData","select","unbind","isEqual","newConnectUuids","itemFilter","isErrorLink","isPivotalPathLink","setSuspendDrawing","uuidObj","uuids","setPaintStyle","deleteEveryConnection","child","cuttentLog","find","isDisabled","TaskGanttComponent","gridProps","calendarProps","barProps","ganttSVGRef","horizontalContainerRef","verticalGanttContainerRef","newBarProps","useImperativeHandle","ganttVerticalContainer","xmlns","horizontalContainer","position","TaskGantt","HorizontalScrollComponent","dividerWidth","marginLeft","bottom","HorizontalScroll","Option","Select","filterOption","input","option","toLowerCase","filterFields","customField","fieldType","filterDeleteFields","filterData","ItemModal","visible","handleCancel","handleOk","currentItem","timeList","form","Form","useForm","itemTypeData","getCustomFields","setIsSelected","setCustomField","confirmLoading","setConfirmLoading","resetFields","setFieldsValue","percentage","isDefault","fetch","fields","handleConfirm","validateFields","values","omit","fileldFilter","f","obj","catch","info","log","itemCheck","_","Promise","reject","Error","resolve","handelChange","val","Modal","onOk","onCancel","cancelText","okText","labelCol","span","wrapperCol","layout","Item","rules","required","validator","placeholder","onChange","showSearch","allowClear","Time","columns","dataIndex","render","text","res","QuestionCircleOutlined","_text","record","Space","editTime","del","configHandle","setCurrentItem","setIndex","canAddConfig","newTimeList","addTime","confirm","content","delConfig","splice","TimeModal","timeTips","WarningIcon","color","Table","dataSource","pagination","timeConfigTable","rowKey","timeConfigAddBtn","Button","PlusOutlined","disabled","OtherConfig","checked","setChecked","otherConfig","autoPatch","question","Switch","TextArea","Input","AddEdit","currentBaseline","modalVisible","setModalVisible","baselineList","isEdit","description","onFinish","confirmOk","nameValidator","callback","findRepeat","maxLength","BaseLine","baseLineHandle","setCurrentLog","currentLog","OverflowTooltip","setLogTasks","deleteBaseline","handleMenuClick","currentBaseLine","currentBaselineOmit","setCurrentBaseline","addBaseline","chooseLog","panel","createBaseline","list","activeBaseline","checkedIcon","Checked","createTime","createdAt","handleIcon","EditOutlined","DeleteOutlined","Display","currentValue","setCurrentValue","handleChange","newConfig","displayPopover","Row","displayRow","Col","textAlignR","pivotalPath","overdue","Panel","Collapse","GanttConfig","toGantt","currentPanel","activeKey","setActiveKey","isArray","genHeader","extraHeader","des","Drawer","onClose","getContainer","settingsModalContainer","contentWrapperStyle","maxWidth","maskClosable","mask","expandIcon","isActive","CollapseIcon","activeRotate","collapse","header","Baseline","GuideModal","toPanel","toCancel","toConfig","closable","footer","guideInfor","clickThis","getLocalStorageItem","defalut","localStorage","getItem","parse","setLocalStorageItem","setItem","TabPane","Tabs","DataMode","toToday","modeChange","todayX","refScrollX","isShowToday","todayBtn","dataMode","defaultActiveKey","tabPosition","tab","widthData","Gantt","baseLineLog","isUpdate","listCellWidth","listWidth","barFill","onSelect","renderTaskListComponent","renderOverflowTooltip","actionRef","workspaceId","isViewModeChange","onMouseEvent","onClickEvent","configVisibleChange","tableQuerySelector","wrapperRef","taskListRef","onMouseEventRef","taskGanttContainerRef","verticalScrollContainerRef","horizontalScrollContainerRef","setViewMode","setColumnWidth","setDateSetup","CACHE_LIST_WIDTH_KEY","cacheListWidth","utils","initListWidth","setTaskHeight","setTaskListWidth","setSvgContainerWidth","setGanttHeight","setSvgContainerHeight","setBarTasks","isTableScrollX","setIsTableScrollX","failedTask","eleListTableBodyRef","setScrollY","setScrollX","refScrollY","ignoreScrollEvent","setIgnoreScrollEvent","guideModalVisible","setGuideModalVisible","setCurrentPanel","dividerPositionRef","minWidth","paddingLeft","newDates","prevStateTask","newTaskList","newTaskHeight","setElementsScrollY","scrollTop","setElementsScrollX","scrollLeft","handleWheel","abs","deltaX","deltaY","scrollMove","newScrollX","isScroll","clientWidth","scrollWidth","max","newScrollY","passive","handleScrollY","currentTarget","handleScrollX","handleKeyDown","isX","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","boundLeft","getBoundingClientRect","TaskListComponent","isHiddenShowTooltip","setTimeout","document","querySelector","handleDividerMouseDown","distance","handleDividerClick","baselineExit","openGuide","panelCanel","box","Provider","wrapper","choosedBaselIne","loaded","size","taskListWrapper","visibility","dividerWrapper","reverse","dividerContainer","maskLine","maskLineTop","dividerIconWarpper","ArrowIcon"],"mappings":"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"}