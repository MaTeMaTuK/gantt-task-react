{"version":3,"sources":["../../src/types/public-types.ts","../../src/helpers/date-helper.ts","../../src/components/task-list/task-list-header.tsx","../../src/components/task-list/task-list-table.tsx","../../src/components/other/tooltip.tsx","../../src/components/other/vertical-scroll.tsx","../../src/components/task-list/task-list.tsx","../../src/components/grid/grid-body.tsx","../../src/components/grid/grid.tsx","../../src/components/calendar/top-part-of-calendar.tsx","../../src/components/calendar/calendar.tsx","../../src/components/other/arrow.tsx","../../src/helpers/bar-helper.ts","../../src/helpers/other-helper.ts","../../src/components/task-item/bar/bar-display.tsx","../../src/components/task-item/bar/bar-date-handle.tsx","../../src/components/task-item/bar/bar-progress-handle.tsx","../../src/components/task-item/bar/bar.tsx","../../src/components/task-item/bar/bar-small.tsx","../../src/components/task-item/milestone/milestone.tsx","../../src/components/task-item/project/project.tsx","../../src/components/task-item/task-item.tsx","../../src/components/gantt/task-gantt-content.tsx","../../src/components/gantt/task-gantt.tsx","../../src/components/other/horizontal-scroll.tsx","../../src/components/gantt/gantt.tsx","components/view-switcher.tsx","App.tsx","helper.tsx","index.tsx"],"names":["ViewMode","addToDate","Date","date","scale","startOfDate","scores","shouldReset","_scale","maxScore","ganttDateRange","tasks","newStartDate","newEndDate","task","getMonday","seedDates","currentDate","dates","getLocaleMonth","bottomValue","Intl","month","day","diff","getWeekNumberISO8601","tmpDate","dayNumber","firstThursday","weekNumber","Math","TaskListHeaderDefault","rowWidth","className","styles","style","fontFamily","fontSize","height","headerHeight","minWidth","marginTop","TaskListTableDefault","onExpanderClick","dateTimeOptions","weekday","year","t","expanderSymbol","rowHeight","key","id","maxWidth","title","name","onClick","React","Tooltip","TooltipContent","tooltipRef","useRef","useState","useEffect","tooltipHeight","tooltipWidth","newRelatedY","newRelatedX","arrowIndent","svgContainerWidth","taskListWidth","svgContainerHeight","setRelatedY","setRelatedX","ref","relatedX","left","top","relatedY","StandardTooltipContent","VerticalScroll","onScroll","scrollRef","marginLeft","rtl","width","TaskList","TaskListTable","horizontalContainerRef","headerProps","tableProps","locale","selectedTaskId","selectedTask","setSelectedTask","taskListRef","horizontalContainerClass","ganttHeight","GridBody","y","gridRows","rowLines","x","y1","x2","svgWidth","y2","now","tickX","ticks","today","i","x1","columnWidth","fill","todayColor","Grid","props","TopPartOfCalendar","yText","x1Line","y1Line","y2Line","value","xText","Calendar","topValues","bottomValues","dateSetup","topDefaultHeight","topValue","getCalendarValuesForMonth","weeksCount","getCalendarValuesForWeek","getDaysInMonth","getCalendarValuesForDay","viewMode","hour","getCalendarValuesForOther","length","Arrow","drownPathAndTriangleRTL","drownPathAndTriangle","strokeWidth","d","path","points","trianglePoints","indexCompare","taskFrom","taskTo","taskToEndPosition","taskHeight","taskFromEndPosition","taskFromHorizontalOffsetValue","taskToHorizontalOffsetValue","convertToBarTask","barTask","convertToMilestone","convertToBar","taskXCoordinateRTL","taskXCoordinate","typeInternal","handleWidth","progressWithByParams","taskYCoordinate","index","backgroundColor","backgroundSelectedColor","progressColor","progressSelectedColor","progressX","progressWidth","barCornerRadius","barChildren","rotatedHeight","end","progress","xDate","dateDelta","taskX2","getProgressPoint","taskY","point","moveByX","additionalXValue","newX1","dateByX","newDate","taskDate","handleTaskBySVGMouseEvent","result","handleTaskBySVGMouseEventForMilestone","handleTaskBySVGMouseEventForBar","changedTask","isChanged","barWidth","progressByXRTL","svgX","progressByX","startByX","xStep","newX2","endByX","newMoveX1","isKeyboardEvent","event","removeHiddenTasks","groupedTasks","groupedTask","children","getChildren","taskList","taskChildren","BarDisplay","onMouseDown","ry","rx","isSelected","BarDateHandle","BarProgressHandle","progressPoint","Bar","handleHeight","tabIndex","e","isDateChangeable","onEventStart","isProgressChangeable","BarSmall","Milestone","transform","Project","barColor","processColor","projectWith","projectLeftTriangle","projectRightTriangle","TaskItem","textRef","setTaskItem","setIsTextInside","onKeyDown","onMouseEnter","onMouseLeave","onDoubleClick","onFocus","hasChild","getX","isTextInside","TaskGanttContent","onDelete","svg","setXStep","timeStep","handleMouseMove","a","ganttEvent","cursor","setGanttEvent","action","handleMouseUp","newChangedTask","isNotLikeOriginal","originalSelectedTask","setIsMoving","operationSuccess","onDateChange","onProgressChange","setFailedTask","isMoving","handleBarEventStart","console","setInitEventX1Delta","arrowColor","stroke","child","isDisabled","isDelete","TaskGantt","scrollX","ganttSVGRef","verticalGanttContainerRef","newBarProps","dir","xmlns","gridProps","calendarProps","barProps","HorizontalScroll","margin","Gantt","listCellWidth","barFill","barProgressColor","barProgressSelectedColor","barBackgroundColor","barBackgroundSelectedColor","projectProgressColor","projectProgressSelectedColor","projectBackgroundColor","projectBackgroundSelectedColor","milestoneBackgroundColor","milestoneBackgroundSelectedColor","TaskListHeader","wrapperRef","startDate","endDate","ganttFullHeight","barTasks","filteredTasks","newDates","setScrollX","setDateSetup","setBarTasks","dependencies","j","dependence","convertToBarTasks","prevStateTask","newTaskList","failedTask","newTaskHeight","setTaskHeight","setTaskListWidth","setSvgContainerWidth","setSvgContainerHeight","handleWheel","scrollMove","newScrollX","newScrollY","scrollY","setScrollY","setIgnoreScrollEvent","passive","handleSelectedTask","taskId","newSelectedTask","oldSelectedTask","onSelect","hideChildren","isX","scroll","ViewSwitcher","onViewModeChange","onViewListChange","isChecked","QuarterDay","HalfDay","Day","Week","Month","type","defaultChecked","App","view","setView","start","getFullYear","getMonth","project","initTasks","setTasks","setIsChecked","handleTaskChange","log","newTasks","map","projectId","projectTasks","filter","getTime","getStartEndDateForProject","findIndex","changedProject","handleTaskDelete","conf","window","confirm","handleProgressChange","handleDblClick","alert","handleSelect","handleExpanderClick","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.fa0ee9bf.chunk.js","sourcesContent":["export enum ViewMode {\r\n  QuarterDay = \"Quarter Day\",\r\n  HalfDay = \"Half Day\",\r\n  Day = \"Day\",\r\n  /** ISO-8601 week */\r\n  Week = \"Week\",\r\n  Month = \"Month\",\r\n}\r\nexport type TaskType = \"task\" | \"milestone\" | \"project\";\r\nexport interface Task {\r\n  id: string;\r\n  type: TaskType;\r\n  name: string;\r\n  start: Date;\r\n  end: Date;\r\n  /**\r\n   * From 0 to 100\r\n   */\r\n  progress: number;\r\n  styles?: {\r\n    backgroundColor?: string;\r\n    backgroundSelectedColor?: string;\r\n    progressColor?: string;\r\n    progressSelectedColor?: string;\r\n  };\r\n  isDisabled?: boolean;\r\n  project?: string;\r\n  dependencies?: string[];\r\n  hideChildren?: boolean;\r\n}\r\n\r\nexport interface EventOption {\r\n  /**\r\n   * Time step value for date changes.\r\n   */\r\n  timeStep?: number;\r\n  /**\r\n   * Invokes on bar select on unselect.\r\n   */\r\n  onSelect?: (task: Task, isSelected: boolean) => void;\r\n  /**\r\n   * Invokes on bar double click.\r\n   */\r\n  onDoubleClick?: (task: Task) => void;\r\n  /**\r\n   * Invokes on end and start time change. Chart undoes operation if method return false or error.\r\n   */\r\n  onDateChange?: (\r\n    task: Task\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on progress change. Chart undoes operation if method return false or error.\r\n   */\r\n  onProgressChange?: (\r\n    task: Task\r\n  ) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on delete selected task. Chart undoes operation if method return false or error.\r\n   */\r\n  onDelete?: (task: Task) => void | boolean | Promise<void> | Promise<boolean>;\r\n  /**\r\n   * Invokes on expander on task list\r\n   */\r\n  onExpanderClick?: (task: Task) => void;\r\n}\r\n\r\nexport interface DisplayOption {\r\n  viewMode?: ViewMode;\r\n  /**\r\n   * Specifies the month name language. Able formats: ISO 639-2, Java Locale\r\n   */\r\n  locale?: string;\r\n  rtl?: boolean;\r\n}\r\n\r\nexport interface StylingOption {\r\n  headerHeight?: number;\r\n  columnWidth?: number;\r\n  listCellWidth?: string;\r\n  rowHeight?: number;\r\n  ganttHeight?: number;\r\n  barCornerRadius?: number;\r\n  handleWidth?: number;\r\n  fontFamily?: string;\r\n  fontSize?: string;\r\n  /**\r\n   * How many of row width can be taken by task.\r\n   * From 0 to 100\r\n   */\r\n  barFill?: number;\r\n  barProgressColor?: string;\r\n  barProgressSelectedColor?: string;\r\n  barBackgroundColor?: string;\r\n  barBackgroundSelectedColor?: string;\r\n  projectProgressColor?: string;\r\n  projectProgressSelectedColor?: string;\r\n  projectBackgroundColor?: string;\r\n  projectBackgroundSelectedColor?: string;\r\n  milestoneBackgroundColor?: string;\r\n  milestoneBackgroundSelectedColor?: string;\r\n  arrowColor?: string;\r\n  arrowIndent?: number;\r\n  todayColor?: string;\r\n  TooltipContent?: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n  TaskListHeader?: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable?: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    /**\r\n     * Sets selected task by id\r\n     */\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n}\r\n\r\nexport interface GanttProps extends EventOption, DisplayOption, StylingOption {\r\n  tasks: Task[];\r\n}\r\n","import { Task, ViewMode } from \"../types/public-types\";\r\n\r\ntype DateHelperScales =\r\n  | \"year\"\r\n  | \"month\"\r\n  | \"day\"\r\n  | \"hour\"\r\n  | \"minute\"\r\n  | \"second\"\r\n  | \"millisecond\";\r\n\r\nexport const addToDate = (\r\n  date: Date,\r\n  quantity: number,\r\n  scale: DateHelperScales\r\n) => {\r\n  const newDate = new Date(\r\n    date.getFullYear() + (scale === \"year\" ? quantity : 0),\r\n    date.getMonth() + (scale === \"month\" ? quantity : 0),\r\n    date.getDate() + (scale === \"day\" ? quantity : 0),\r\n    date.getHours() + (scale === \"hour\" ? quantity : 0),\r\n    date.getMinutes() + (scale === \"minute\" ? quantity : 0),\r\n    date.getSeconds() + (scale === \"second\" ? quantity : 0),\r\n    date.getMilliseconds() + (scale === \"millisecond\" ? quantity : 0)\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const startOfDate = (date: Date, scale: DateHelperScales) => {\r\n  const scores = [\r\n    \"millisecond\",\r\n    \"second\",\r\n    \"minute\",\r\n    \"hour\",\r\n    \"day\",\r\n    \"month\",\r\n    \"year\",\r\n  ];\r\n\r\n  const shouldReset = (_scale: DateHelperScales) => {\r\n    const maxScore = scores.indexOf(scale);\r\n    return scores.indexOf(_scale) <= maxScore;\r\n  };\r\n  const newDate = new Date(\r\n    date.getFullYear(),\r\n    shouldReset(\"year\") ? 0 : date.getMonth(),\r\n    shouldReset(\"month\") ? 1 : date.getDate(),\r\n    shouldReset(\"day\") ? 0 : date.getHours(),\r\n    shouldReset(\"hour\") ? 0 : date.getMinutes(),\r\n    shouldReset(\"minute\") ? 0 : date.getSeconds(),\r\n    shouldReset(\"second\") ? 0 : date.getMilliseconds()\r\n  );\r\n  return newDate;\r\n};\r\n\r\nexport const ganttDateRange = (tasks: Task[], viewMode: ViewMode) => {\r\n  let newStartDate: Date = tasks[0].start;\r\n  let newEndDate: Date = tasks[0].start;\r\n  for (const task of tasks) {\r\n    if (task.start < newStartDate) {\r\n      newStartDate = task.start;\r\n    }\r\n    if (task.end > newEndDate) {\r\n      newEndDate = task.end;\r\n    }\r\n  }\r\n  switch (viewMode) {\r\n    case ViewMode.Month:\r\n      newStartDate = addToDate(newStartDate, -1, \"month\");\r\n      newStartDate = startOfDate(newStartDate, \"month\");\r\n      newEndDate = addToDate(newEndDate, 1, \"year\");\r\n      newEndDate = startOfDate(newEndDate, \"year\");\r\n      break;\r\n    case ViewMode.Week:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(getMonday(newStartDate), -7, \"day\");\r\n      newEndDate = addToDate(newEndDate, 1.5, \"month\");\r\n      break;\r\n    case ViewMode.Day:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"day\");\r\n      newEndDate = addToDate(newEndDate, 19, \"day\");\r\n      break;\r\n    case ViewMode.QuarterDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"day\");\r\n      newEndDate = addToDate(newEndDate, 66, \"hour\"); // 24(1 day)*3 - 6\r\n      break;\r\n    case ViewMode.HalfDay:\r\n      newStartDate = startOfDate(newStartDate, \"day\");\r\n      newEndDate = startOfDate(newEndDate, \"day\");\r\n      newStartDate = addToDate(newStartDate, -1, \"day\");\r\n      newEndDate = addToDate(newEndDate, 108, \"hour\"); // 24(1 day)*5 - 12\r\n      break;\r\n  }\r\n  return [newStartDate, newEndDate];\r\n};\r\n\r\nexport const seedDates = (\r\n  startDate: Date,\r\n  endDate: Date,\r\n  viewMode: ViewMode\r\n) => {\r\n  let currentDate: Date = new Date(startDate);\r\n  const dates: Date[] = [currentDate];\r\n  while (currentDate < endDate) {\r\n    switch (viewMode) {\r\n      case ViewMode.Month:\r\n        currentDate = addToDate(currentDate, 1, \"month\");\r\n        break;\r\n      case ViewMode.Week:\r\n        currentDate = addToDate(currentDate, 7, \"day\");\r\n        break;\r\n      case ViewMode.Day:\r\n        currentDate = addToDate(currentDate, 1, \"day\");\r\n        break;\r\n      case ViewMode.HalfDay:\r\n        currentDate = addToDate(currentDate, 12, \"hour\");\r\n        break;\r\n      case ViewMode.QuarterDay:\r\n        currentDate = addToDate(currentDate, 6, \"hour\");\r\n        break;\r\n    }\r\n    dates.push(currentDate);\r\n  }\r\n  return dates;\r\n};\r\n\r\nexport const getLocaleMonth = (date: Date, locale: string) => {\r\n  let bottomValue = new Intl.DateTimeFormat(locale, {\r\n    month: \"long\",\r\n  }).format(date);\r\n  bottomValue = bottomValue.replace(\r\n    bottomValue[0],\r\n    bottomValue[0].toLocaleUpperCase()\r\n  );\r\n  return bottomValue;\r\n};\r\n\r\n/**\r\n * Returns monday of current week\r\n * @param date date for modify\r\n */\r\nconst getMonday = (date: Date) => {\r\n  const day = date.getDay();\r\n  const diff = date.getDate() - day + (day === 0 ? -6 : 1); // adjust when day is sunday\r\n  return new Date(date.setDate(diff));\r\n};\r\n\r\nexport const getWeekNumberISO8601 = (date: Date) => {\r\n  const tmpDate = new Date(date.valueOf());\r\n  const dayNumber = (tmpDate.getDay() + 6) % 7;\r\n  tmpDate.setDate(tmpDate.getDate() - dayNumber + 3);\r\n  const firstThursday = tmpDate.valueOf();\r\n  tmpDate.setMonth(0, 1);\r\n  if (tmpDate.getDay() !== 4) {\r\n    tmpDate.setMonth(0, 1 + ((4 - tmpDate.getDay() + 7) % 7));\r\n  }\r\n  const weekNumber = (\r\n    1 + Math.ceil((firstThursday - tmpDate.valueOf()) / 604800000)\r\n  ).toString();\r\n\r\n  if (weekNumber.length === 1) {\r\n    return `0${weekNumber}`;\r\n  } else {\r\n    return weekNumber;\r\n  }\r\n};\r\n\r\nexport const getDaysInMonth = (month: number, year: number) => {\r\n  return new Date(year, month + 1, 0).getDate();\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./task-list-header.module.css\";\r\n\r\nexport const TaskListHeaderDefault: React.FC<{\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n}> = ({ headerHeight, fontFamily, fontSize, rowWidth }) => {\r\n  return (\r\n    <div\r\n      className={styles.ganttTable}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      <div\r\n        className={styles.ganttTable_Header}\r\n        style={{\r\n          height: headerHeight - 2,\r\n        }}\r\n      >\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;Name\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.2,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;From\r\n        </div>\r\n        <div\r\n          className={styles.ganttTable_HeaderSeparator}\r\n          style={{\r\n            height: headerHeight * 0.5,\r\n            marginTop: headerHeight * 0.25,\r\n          }}\r\n        />\r\n        <div\r\n          className={styles.ganttTable_HeaderItem}\r\n          style={{\r\n            minWidth: rowWidth,\r\n          }}\r\n        >\r\n          &nbsp;To\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./task-list-table.module.css\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nexport const TaskListTableDefault: React.FC<{\r\n  rowHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  locale: string;\r\n  tasks: Task[];\r\n  selectedTaskId: string;\r\n  setSelectedTask: (taskId: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n}> = ({\r\n  rowHeight,\r\n  rowWidth,\r\n  tasks,\r\n  fontFamily,\r\n  fontSize,\r\n  locale,\r\n  onExpanderClick,\r\n}) => {\r\n  const dateTimeOptions: Intl.DateTimeFormatOptions = {\r\n    weekday: \"short\",\r\n    year: \"numeric\",\r\n    month: \"long\",\r\n    day: \"numeric\",\r\n  };\r\n  return (\r\n    <div\r\n      className={styles.taskListWrapper}\r\n      style={{\r\n        fontFamily: fontFamily,\r\n        fontSize: fontSize,\r\n      }}\r\n    >\r\n      {tasks.map(t => {\r\n        let expanderSymbol = \"\";\r\n        if (t.hideChildren === false) {\r\n          expanderSymbol = \"\";\r\n        } else if (t.hideChildren === true) {\r\n          expanderSymbol = \"\";\r\n        }\r\n\r\n        return (\r\n          <div\r\n            className={styles.taskListTableRow}\r\n            style={{ height: rowHeight }}\r\n            key={`${t.id}row`}\r\n          >\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n              title={t.name}\r\n            >\r\n              <div className={styles.taskListNameWrapper}>\r\n                <div\r\n                  className={\r\n                    expanderSymbol\r\n                      ? styles.taskListExpander\r\n                      : styles.taskListEmptyExpander\r\n                  }\r\n                  onClick={() => onExpanderClick(t)}\r\n                >\r\n                  {expanderSymbol}\r\n                </div>\r\n                <div>{t.name}</div>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;{t.start.toLocaleDateString(locale, dateTimeOptions)}\r\n            </div>\r\n            <div\r\n              className={styles.taskListCell}\r\n              style={{\r\n                minWidth: rowWidth,\r\n                maxWidth: rowWidth,\r\n              }}\r\n            >\r\n              &nbsp;\r\n              {t.end.toLocaleDateString(locale, dateTimeOptions)}\r\n            </div>\r\n          </div>\r\n        );\r\n      })}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useRef, useEffect, useState } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport styles from \"./tooltip.module.css\";\r\n\r\nexport type TooltipProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n  svgContainerHeight: number;\r\n  svgContainerWidth: number;\r\n  svgWidth: number;\r\n  headerHeight: number;\r\n  taskListWidth: number;\r\n  scrollX: number;\r\n  scrollY: number;\r\n  rowHeight: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  TooltipContent: React.FC<{\r\n    task: Task;\r\n    fontSize: string;\r\n    fontFamily: string;\r\n  }>;\r\n};\r\nexport const Tooltip: React.FC<TooltipProps> = ({\r\n  task,\r\n  rowHeight,\r\n  rtl,\r\n  svgContainerHeight,\r\n  svgContainerWidth,\r\n  scrollX,\r\n  scrollY,\r\n  arrowIndent,\r\n  fontSize,\r\n  fontFamily,\r\n  headerHeight,\r\n  taskListWidth,\r\n  TooltipContent,\r\n}) => {\r\n  const tooltipRef = useRef<HTMLDivElement | null>(null);\r\n  const [relatedY, setRelatedY] = useState(0);\r\n  const [relatedX, setRelatedX] = useState(0);\r\n  useEffect(() => {\r\n    if (tooltipRef.current) {\r\n      const tooltipHeight = tooltipRef.current.offsetHeight * 1.1;\r\n      const tooltipWidth = tooltipRef.current.offsetWidth * 1.1;\r\n\r\n      let newRelatedY = task.index * rowHeight - scrollY + headerHeight;\r\n      let newRelatedX: number;\r\n      if (rtl) {\r\n        newRelatedX = task.x1 - arrowIndent * 1.5 - tooltipWidth - scrollX;\r\n        if (newRelatedX < 0) {\r\n          newRelatedX = task.x2 + arrowIndent * 1.5 - scrollX;\r\n        }\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        if (tooltipLeftmostPoint > svgContainerWidth) {\r\n          newRelatedX = svgContainerWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      } else {\r\n        newRelatedX = task.x2 + arrowIndent * 1.5 + taskListWidth - scrollX;\r\n        const tooltipLeftmostPoint = tooltipWidth + newRelatedX;\r\n        const fullChartWidth = taskListWidth + svgContainerWidth;\r\n        if (tooltipLeftmostPoint > fullChartWidth) {\r\n          newRelatedX =\r\n            task.x1 +\r\n            taskListWidth -\r\n            arrowIndent * 1.5 -\r\n            scrollX -\r\n            tooltipWidth;\r\n        }\r\n        if (newRelatedX < taskListWidth) {\r\n          newRelatedX = svgContainerWidth + taskListWidth - tooltipWidth;\r\n          newRelatedY += rowHeight;\r\n        }\r\n      }\r\n\r\n      const tooltipLowerPoint = tooltipHeight + newRelatedY - scrollY;\r\n      if (tooltipLowerPoint > svgContainerHeight - scrollY) {\r\n        newRelatedY = svgContainerHeight - tooltipHeight;\r\n      }\r\n      setRelatedY(newRelatedY);\r\n      setRelatedX(newRelatedX);\r\n    }\r\n  }, [\r\n    tooltipRef.current,\r\n    task,\r\n    arrowIndent,\r\n    scrollX,\r\n    scrollY,\r\n    headerHeight,\r\n    taskListWidth,\r\n    rowHeight,\r\n    svgContainerHeight,\r\n    svgContainerWidth,\r\n  ]);\r\n\r\n  return (\r\n    <div\r\n      ref={tooltipRef}\r\n      className={\r\n        relatedX\r\n          ? styles.tooltipDetailsContainer\r\n          : styles.tooltipDetailsContainerHidden\r\n      }\r\n      style={{ left: relatedX, top: relatedY }}\r\n    >\r\n      <TooltipContent task={task} fontSize={fontSize} fontFamily={fontFamily} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const StandardTooltipContent: React.FC<{\r\n  task: Task;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n}> = ({ task, fontSize, fontFamily }) => {\r\n  const style = {\r\n    fontSize,\r\n    fontFamily,\r\n  };\r\n  return (\r\n    <div className={styles.tooltipDefaultContainer} style={style}>\r\n      <b style={{ fontSize: fontSize + 6 }}>{`${\r\n        task.name\r\n      }: ${task.start.getDate()}-${\r\n        task.start.getMonth() + 1\r\n      }-${task.start.getFullYear()} - ${task.end.getDate()}-${\r\n        task.end.getMonth() + 1\r\n      }-${task.end.getFullYear()}`}</b>\r\n      {task.end.getTime() - task.start.getTime() !== 0 && (\r\n        <p className={styles.tooltipDefaultContainerParagraph}>{`Duration: ${~~(\r\n          (task.end.getTime() - task.start.getTime()) /\r\n          (1000 * 60 * 60 * 24)\r\n        )} day(s)`}</p>\r\n      )}\r\n\r\n      <p className={styles.tooltipDefaultContainerParagraph}>\r\n        {!!task.progress && `Progress: ${task.progress} %`}\r\n      </p>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./vertical-scroll.module.css\";\r\n\r\nexport const VerticalScroll: React.FC<{\r\n  scroll: number;\r\n  ganttHeight: number;\r\n  ganttFullHeight: number;\r\n  headerHeight: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({\r\n  scroll,\r\n  ganttHeight,\r\n  ganttFullHeight,\r\n  headerHeight,\r\n  rtl,\r\n  onScroll,\r\n}) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollTop = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      style={{\r\n        height: ganttHeight,\r\n        marginTop: headerHeight,\r\n        marginLeft: rtl ? \"\" : \"-17px\",\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ height: ganttFullHeight, width: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useRef } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Task } from \"../../types/public-types\";\r\n\r\nexport type TaskListProps = {\r\n  headerHeight: number;\r\n  rowWidth: string;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n  rowHeight: number;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  locale: string;\r\n  tasks: Task[];\r\n  taskListRef: React.RefObject<HTMLDivElement>;\r\n  horizontalContainerClass?: string;\r\n  selectedTask: BarTask | undefined;\r\n  setSelectedTask: (task: string) => void;\r\n  onExpanderClick: (task: Task) => void;\r\n  TaskListHeader: React.FC<{\r\n    headerHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n  }>;\r\n  TaskListTable: React.FC<{\r\n    rowHeight: number;\r\n    rowWidth: string;\r\n    fontFamily: string;\r\n    fontSize: string;\r\n    locale: string;\r\n    tasks: Task[];\r\n    selectedTaskId: string;\r\n    setSelectedTask: (taskId: string) => void;\r\n    onExpanderClick: (task: Task) => void;\r\n  }>;\r\n};\r\n\r\nexport const TaskList: React.FC<TaskListProps> = ({\r\n  headerHeight,\r\n  fontFamily,\r\n  fontSize,\r\n  rowWidth,\r\n  rowHeight,\r\n  scrollY,\r\n  tasks,\r\n  selectedTask,\r\n  setSelectedTask,\r\n  onExpanderClick,\r\n  locale,\r\n  ganttHeight,\r\n  taskListRef,\r\n  horizontalContainerClass,\r\n  TaskListHeader,\r\n  TaskListTable,\r\n}) => {\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  const headerProps = {\r\n    headerHeight,\r\n    fontFamily,\r\n    fontSize,\r\n    rowWidth,\r\n  };\r\n  const selectedTaskId = selectedTask ? selectedTask.id : \"\";\r\n  const tableProps = {\r\n    rowHeight,\r\n    rowWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks,\r\n    locale,\r\n    selectedTaskId: selectedTaskId,\r\n    setSelectedTask,\r\n    onExpanderClick,\r\n  };\r\n\r\n  return (\r\n    <div ref={taskListRef}>\r\n      <TaskListHeader {...headerProps} />\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={horizontalContainerClass}\r\n        style={ganttHeight ? { height: ganttHeight } : {}}\r\n      >\r\n        <TaskListTable {...tableProps} />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { Task } from \"../../types/public-types\";\r\nimport { addToDate } from \"../../helpers/date-helper\";\r\nimport styles from \"./grid.module.css\";\r\n\r\nexport type GridBodyProps = {\r\n  tasks: Task[];\r\n  dates: Date[];\r\n  svgWidth: number;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  todayColor: string;\r\n  rtl: boolean;\r\n};\r\nexport const GridBody: React.FC<GridBodyProps> = ({\r\n  tasks,\r\n  dates,\r\n  rowHeight,\r\n  svgWidth,\r\n  columnWidth,\r\n  todayColor,\r\n  rtl,\r\n}) => {\r\n  let y = 0;\r\n  const gridRows: ReactChild[] = [];\r\n  const rowLines: ReactChild[] = [\r\n    <line\r\n      key=\"RowLineFirst\"\r\n      x=\"0\"\r\n      y1={0}\r\n      x2={svgWidth}\r\n      y2={0}\r\n      className={styles.gridRowLine}\r\n    />,\r\n  ];\r\n  for (const task of tasks) {\r\n    gridRows.push(\r\n      <rect\r\n        key={\"Row\" + task.id}\r\n        x=\"0\"\r\n        y={y}\r\n        width={svgWidth}\r\n        height={rowHeight}\r\n        className={styles.gridRow}\r\n      />\r\n    );\r\n    rowLines.push(\r\n      <line\r\n        key={\"RowLine\" + task.id}\r\n        x=\"0\"\r\n        y1={y + rowHeight}\r\n        x2={svgWidth}\r\n        y2={y + rowHeight}\r\n        className={styles.gridRowLine}\r\n      />\r\n    );\r\n    y += rowHeight;\r\n  }\r\n\r\n  const now = new Date();\r\n  let tickX = 0;\r\n  const ticks: ReactChild[] = [];\r\n  let today: ReactChild = <rect />;\r\n  for (let i = 0; i < dates.length; i++) {\r\n    const date = dates[i];\r\n    ticks.push(\r\n      <line\r\n        key={date.getTime()}\r\n        x1={tickX}\r\n        y1={0}\r\n        x2={tickX}\r\n        y2={y}\r\n        className={styles.gridTick}\r\n      />\r\n    );\r\n    if (\r\n      (i + 1 !== dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        dates[i + 1].getTime() >= now.getTime()) ||\r\n      // if current date is last\r\n      (i !== 0 &&\r\n        i + 1 === dates.length &&\r\n        date.getTime() < now.getTime() &&\r\n        addToDate(\r\n          date,\r\n          date.getTime() - dates[i - 1].getTime(),\r\n          \"millisecond\"\r\n        ).getTime() >= now.getTime())\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    // rtl for today\r\n    if (\r\n      rtl &&\r\n      i + 1 !== dates.length &&\r\n      date.getTime() >= now.getTime() &&\r\n      dates[i + 1].getTime() < now.getTime()\r\n    ) {\r\n      today = (\r\n        <rect\r\n          x={tickX + columnWidth}\r\n          y={0}\r\n          width={columnWidth}\r\n          height={y}\r\n          fill={todayColor}\r\n        />\r\n      );\r\n    }\r\n    tickX += columnWidth;\r\n  }\r\n  return (\r\n    <g className=\"gridBody\">\r\n      <g className=\"rows\">{gridRows}</g>\r\n      <g className=\"rowLines\">{rowLines}</g>\r\n      <g className=\"ticks\">{ticks}</g>\r\n      <g className=\"today\">{today}</g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { GridBody, GridBodyProps } from \"./grid-body\";\r\n\r\nexport type GridProps = GridBodyProps;\r\nexport const Grid: React.FC<GridProps> = props => {\r\n  return (\r\n    <g className=\"grid\">\r\n      <GridBody {...props} />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\ntype TopPartOfCalendarProps = {\r\n  value: string;\r\n  x1Line: number;\r\n  y1Line: number;\r\n  y2Line: number;\r\n  xText: number;\r\n  yText: number;\r\n};\r\n\r\nexport const TopPartOfCalendar: React.FC<TopPartOfCalendarProps> = ({\r\n  value,\r\n  x1Line,\r\n  y1Line,\r\n  y2Line,\r\n  xText,\r\n  yText,\r\n}) => {\r\n  return (\r\n    <g className=\"calendarTop\">\r\n      <line\r\n        x1={x1Line}\r\n        y1={y1Line}\r\n        x2={x1Line}\r\n        y2={y2Line}\r\n        className={styles.calendarTopTick}\r\n        key={value + \"line\"}\r\n      />\r\n      <text\r\n        key={value + \"text\"}\r\n        y={yText}\r\n        x={xText}\r\n        className={styles.calendarTopText}\r\n      >\r\n        {value}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { ReactChild } from \"react\";\r\nimport { ViewMode } from \"../../types/public-types\";\r\nimport { TopPartOfCalendar } from \"./top-part-of-calendar\";\r\nimport {\r\n  getDaysInMonth,\r\n  getLocaleMonth,\r\n  getWeekNumberISO8601,\r\n} from \"../../helpers/date-helper\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./calendar.module.css\";\r\n\r\nexport type CalendarProps = {\r\n  dateSetup: DateSetup;\r\n  locale: string;\r\n  viewMode: ViewMode;\r\n  rtl: boolean;\r\n  headerHeight: number;\r\n  columnWidth: number;\r\n  fontFamily: string;\r\n  fontSize: string;\r\n};\r\n\r\nexport const Calendar: React.FC<CalendarProps> = ({\r\n  dateSetup,\r\n  locale,\r\n  viewMode,\r\n  rtl,\r\n  headerHeight,\r\n  columnWidth,\r\n  fontFamily,\r\n  fontSize,\r\n}) => {\r\n  const getCalendarValuesForMonth = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    for (let i = 0; i < dateSetup.dates.length; i++) {\r\n      const date = dateSetup.dates[i];\r\n      const bottomValue = getLocaleMonth(date, locale);\r\n      bottomValues.push(\r\n        <text\r\n          key={bottomValue + date.getFullYear()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i === 0 ||\r\n        date.getFullYear() !== dateSetup.dates[i - 1].getFullYear()\r\n      ) {\r\n        const topValue = date.getFullYear().toString();\r\n        let xText: number;\r\n        if (rtl) {\r\n          xText = (6 + i + date.getMonth() + 1) * columnWidth;\r\n        } else {\r\n          xText = (6 + i - date.getMonth()) * columnWidth;\r\n        }\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue}\r\n            value={topValue}\r\n            x1Line={columnWidth * i}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={xText}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForWeek = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    let weeksCount: number = 1;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = dates.length - 1; i >= 0; i--) {\r\n      const date = dates[i];\r\n      let topValue = \"\";\r\n      if (i === 0 || date.getMonth() !== dates[i - 1].getMonth()) {\r\n        // top\r\n        topValue = `${getLocaleMonth(date, locale)}, ${date.getFullYear()}`;\r\n      }\r\n      // bottom\r\n      const bottomValue = `W${getWeekNumberISO8601(date)}`;\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n\r\n      if (topValue) {\r\n        // if last day is new month\r\n        if (i !== dates.length - 1) {\r\n          topValues.push(\r\n            <TopPartOfCalendar\r\n              key={topValue}\r\n              value={topValue}\r\n              x1Line={columnWidth * i + weeksCount * columnWidth}\r\n              y1Line={0}\r\n              y2Line={topDefaultHeight}\r\n              xText={columnWidth * i + columnWidth * weeksCount * 0.5}\r\n              yText={topDefaultHeight * 0.9}\r\n            />\r\n          );\r\n        }\r\n        weeksCount = 0;\r\n      }\r\n      weeksCount++;\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForDay = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = date.getDate().toString();\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * i + columnWidth * 0.5}\r\n          className={styles.calendarBottomText}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (\r\n        i + 1 !== dates.length &&\r\n        date.getMonth() !== dates[i + 1].getMonth()\r\n      ) {\r\n        const topValue = getLocaleMonth(date, locale);\r\n\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * (i + 1)}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={\r\n              columnWidth * (i + 1) -\r\n              getDaysInMonth(date.getMonth(), date.getFullYear()) *\r\n                columnWidth *\r\n                0.5\r\n            }\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  const getCalendarValuesForOther = () => {\r\n    const topValues: ReactChild[] = [];\r\n    const bottomValues: ReactChild[] = [];\r\n    const ticks = viewMode === ViewMode.HalfDay ? 2 : 4;\r\n    const topDefaultHeight = headerHeight * 0.5;\r\n    const dates = dateSetup.dates;\r\n    for (let i = 0; i < dates.length; i++) {\r\n      const date = dates[i];\r\n      const bottomValue = Intl.DateTimeFormat(locale, {\r\n        hour: \"numeric\",\r\n      }).format(date);\r\n\r\n      bottomValues.push(\r\n        <text\r\n          key={date.getTime()}\r\n          y={headerHeight * 0.8}\r\n          x={columnWidth * (i + +rtl)}\r\n          className={styles.calendarBottomText}\r\n          fontFamily={fontFamily}\r\n        >\r\n          {bottomValue}\r\n        </text>\r\n      );\r\n      if (i === 0 || date.getDate() !== dates[i - 1].getDate()) {\r\n        const topValue = `${date.getDate()} ${getLocaleMonth(date, locale)}`;\r\n        topValues.push(\r\n          <TopPartOfCalendar\r\n            key={topValue + date.getFullYear()}\r\n            value={topValue}\r\n            x1Line={columnWidth * i + ticks * columnWidth}\r\n            y1Line={0}\r\n            y2Line={topDefaultHeight}\r\n            xText={columnWidth * i + ticks * columnWidth * 0.5}\r\n            yText={topDefaultHeight * 0.9}\r\n          />\r\n        );\r\n      }\r\n    }\r\n\r\n    return [topValues, bottomValues];\r\n  };\r\n\r\n  let topValues: ReactChild[] = [];\r\n  let bottomValues: ReactChild[] = [];\r\n  switch (dateSetup.viewMode) {\r\n    case ViewMode.Month:\r\n      [topValues, bottomValues] = getCalendarValuesForMonth();\r\n      break;\r\n    case ViewMode.Week:\r\n      [topValues, bottomValues] = getCalendarValuesForWeek();\r\n      break;\r\n    case ViewMode.Day:\r\n      [topValues, bottomValues] = getCalendarValuesForDay();\r\n      break;\r\n    default:\r\n      [topValues, bottomValues] = getCalendarValuesForOther();\r\n      break;\r\n  }\r\n  return (\r\n    <g className=\"calendar\" fontSize={fontSize} fontFamily={fontFamily}>\r\n      <rect\r\n        x={0}\r\n        y={0}\r\n        width={columnWidth * dateSetup.dates.length}\r\n        height={headerHeight}\r\n        className={styles.calendarHeader}\r\n      />\r\n      {bottomValues} {topValues}\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\n\r\ntype ArrowProps = {\r\n  taskFrom: BarTask;\r\n  taskTo: BarTask;\r\n  rowHeight: number;\r\n  taskHeight: number;\r\n  arrowIndent: number;\r\n  rtl: boolean;\r\n};\r\nexport const Arrow: React.FC<ArrowProps> = ({\r\n  taskFrom,\r\n  taskTo,\r\n  rowHeight,\r\n  taskHeight,\r\n  arrowIndent,\r\n  rtl,\r\n}) => {\r\n  let path: string;\r\n  let trianglePoints: string;\r\n  if (rtl) {\r\n    [path, trianglePoints] = drownPathAndTriangleRTL(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  } else {\r\n    [path, trianglePoints] = drownPathAndTriangle(\r\n      taskFrom,\r\n      taskTo,\r\n      rowHeight,\r\n      taskHeight,\r\n      arrowIndent\r\n    );\r\n  }\r\n\r\n  return (\r\n    <g className=\"arrow\">\r\n      <path strokeWidth=\"1.5\" d={path} fill=\"none\" />\r\n      <polygon points={trianglePoints} />\r\n    </g>\r\n  );\r\n};\r\n\r\nconst drownPathAndTriangle = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x2 + arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x1 ? \"\" : `H ${taskTo.x1 - arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x1\r\n      ? arrowIndent\r\n      : taskTo.x1 - taskFrom.x2 - arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x2} ${taskFrom.y + taskHeight / 2} \r\n  h ${arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x1},${taskToEndPosition} \r\n  ${taskTo.x1 - 5},${taskToEndPosition - 5} \r\n  ${taskTo.x1 - 5},${taskToEndPosition + 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n\r\nconst drownPathAndTriangleRTL = (\r\n  taskFrom: BarTask,\r\n  taskTo: BarTask,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  arrowIndent: number\r\n) => {\r\n  const indexCompare = taskFrom.index > taskTo.index ? -1 : 1;\r\n  const taskToEndPosition = taskTo.y + taskHeight / 2;\r\n  const taskFromEndPosition = taskFrom.x1 - arrowIndent * 2;\r\n  const taskFromHorizontalOffsetValue =\r\n    taskFromEndPosition > taskTo.x2 ? \"\" : `H ${taskTo.x2 + arrowIndent}`;\r\n  const taskToHorizontalOffsetValue =\r\n    taskFromEndPosition < taskTo.x2\r\n      ? -arrowIndent\r\n      : taskTo.x2 - taskFrom.x1 + arrowIndent;\r\n\r\n  const path = `M ${taskFrom.x1} ${taskFrom.y + taskHeight / 2} \r\n  h ${-arrowIndent} \r\n  v ${(indexCompare * rowHeight) / 2} \r\n  ${taskFromHorizontalOffsetValue}\r\n  V ${taskToEndPosition} \r\n  h ${taskToHorizontalOffsetValue}`;\r\n\r\n  const trianglePoints = `${taskTo.x2},${taskToEndPosition} \r\n  ${taskTo.x2 + 5},${taskToEndPosition + 5} \r\n  ${taskTo.x2 + 5},${taskToEndPosition - 5}`;\r\n  return [path, trianglePoints];\r\n};\r\n","import { Task } from \"../types/public-types\";\r\nimport { BarTask, TaskTypeInternal } from \"../types/bar-task\";\r\nimport { BarMoveAction } from \"../types/gantt-task-actions\";\r\n\r\nexport const convertToBarTasks = (\r\n  tasks: Task[],\r\n  dates: Date[],\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n) => {\r\n  const dateDelta =\r\n    dates[1].getTime() -\r\n    dates[0].getTime() -\r\n    dates[1].getTimezoneOffset() * 60 * 1000 +\r\n    dates[0].getTimezoneOffset() * 60 * 1000;\r\n  let barTasks = tasks.map((t, i) => {\r\n    return convertToBarTask(\r\n      t,\r\n      i,\r\n      dates,\r\n      dateDelta,\r\n      columnWidth,\r\n      rowHeight,\r\n      taskHeight,\r\n      barCornerRadius,\r\n      handleWidth,\r\n      rtl,\r\n      barProgressColor,\r\n      barProgressSelectedColor,\r\n      barBackgroundColor,\r\n      barBackgroundSelectedColor,\r\n      projectProgressColor,\r\n      projectProgressSelectedColor,\r\n      projectBackgroundColor,\r\n      projectBackgroundSelectedColor,\r\n      milestoneBackgroundColor,\r\n      milestoneBackgroundSelectedColor\r\n    );\r\n  });\r\n\r\n  // set dependencies\r\n  barTasks = barTasks.map((task, i) => {\r\n    const dependencies = task.dependencies || [];\r\n    for (let j = 0; j < dependencies.length; j++) {\r\n      const dependence = barTasks.findIndex(\r\n        value => value.id === dependencies[j]\r\n      );\r\n      if (dependence !== -1) barTasks[dependence].barChildren.push(i);\r\n    }\r\n    return task;\r\n  });\r\n  // normalize flags for hideChildren\r\n  barTasks = barTasks.map(task => {\r\n    if (task.barChildren.length > 0) {\r\n      if (!task.hideChildren) {\r\n        task.hideChildren = false;\r\n      }\r\n    } else if (!task.hideChildren && task.type === \"project\") {\r\n      task.hideChildren = false;\r\n    } else if (!task.hideChildren) {\r\n      task.hideChildren = undefined;\r\n    }\r\n    return task;\r\n  });\r\n\r\n  return barTasks;\r\n};\r\n\r\nconst convertToBarTask = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string,\r\n  projectProgressColor: string,\r\n  projectProgressSelectedColor: string,\r\n  projectBackgroundColor: string,\r\n  projectBackgroundSelectedColor: string,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let barTask: BarTask;\r\n  switch (task.type) {\r\n    case \"milestone\":\r\n      barTask = convertToMilestone(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      );\r\n      break;\r\n    case \"project\":\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor\r\n      );\r\n      break;\r\n    default:\r\n      barTask = convertToBar(\r\n        task,\r\n        index,\r\n        dates,\r\n        dateDelta,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor\r\n      );\r\n      break;\r\n  }\r\n  return barTask;\r\n};\r\n\r\nconst convertToBar = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  rtl: boolean,\r\n  barProgressColor: string,\r\n  barProgressSelectedColor: string,\r\n  barBackgroundColor: string,\r\n  barBackgroundSelectedColor: string\r\n): BarTask => {\r\n  let x1: number;\r\n  let x2: number;\r\n  if (rtl) {\r\n    x2 = taskXCoordinateRTL(task.start, dates, dateDelta, columnWidth);\r\n    x1 = taskXCoordinateRTL(task.end, dates, dateDelta, columnWidth);\r\n  } else {\r\n    x1 = taskXCoordinate(task.start, dates, dateDelta, columnWidth);\r\n    x2 = taskXCoordinate(task.end, dates, dateDelta, columnWidth);\r\n  }\r\n  let typeInternal: TaskTypeInternal = task.type;\r\n  if (typeInternal === \"task\" && x2 - x1 < handleWidth * 2) {\r\n    typeInternal = \"smalltask\";\r\n    x2 = x1 + handleWidth * 2;\r\n  }\r\n\r\n  const [progressWidth, progressX] = progressWithByParams(\r\n    x1,\r\n    x2,\r\n    task.progress,\r\n    rtl\r\n  );\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n\r\n  const styles = {\r\n    backgroundColor: barBackgroundColor,\r\n    backgroundSelectedColor: barBackgroundSelectedColor,\r\n    progressColor: barProgressColor,\r\n    progressSelectedColor: barProgressSelectedColor,\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    typeInternal,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX,\r\n    progressWidth,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    height: taskHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst convertToMilestone = (\r\n  task: Task,\r\n  index: number,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number,\r\n  rowHeight: number,\r\n  taskHeight: number,\r\n  barCornerRadius: number,\r\n  handleWidth: number,\r\n  milestoneBackgroundColor: string,\r\n  milestoneBackgroundSelectedColor: string\r\n): BarTask => {\r\n  const x = taskXCoordinate(task.start, dates, dateDelta, columnWidth);\r\n  const y = taskYCoordinate(index, rowHeight, taskHeight);\r\n\r\n  const x1 = x - taskHeight * 0.5;\r\n  const x2 = x + taskHeight * 0.5;\r\n\r\n  const rotatedHeight = taskHeight / 1.414;\r\n  const styles = {\r\n    backgroundColor: milestoneBackgroundColor,\r\n    backgroundSelectedColor: milestoneBackgroundSelectedColor,\r\n    progressColor: \"\",\r\n    progressSelectedColor: \"\",\r\n    ...task.styles,\r\n  };\r\n  return {\r\n    ...task,\r\n    end: task.start,\r\n    x1,\r\n    x2,\r\n    y,\r\n    index,\r\n    progressX: 0,\r\n    progressWidth: 0,\r\n    barCornerRadius,\r\n    handleWidth,\r\n    typeInternal: task.type,\r\n    progress: 0,\r\n    height: rotatedHeight,\r\n    barChildren: [],\r\n    styles,\r\n  };\r\n};\r\n\r\nconst taskXCoordinate = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number\r\n) => {\r\n  const index = ~~(\r\n    (xDate.getTime() -\r\n      dates[0].getTime() +\r\n      xDate.getTimezoneOffset() -\r\n      dates[0].getTimezoneOffset()) /\r\n    dateDelta\r\n  );\r\n  const x = Math.round(\r\n    (index +\r\n      (xDate.getTime() -\r\n        dates[index].getTime() -\r\n        xDate.getTimezoneOffset() * 60 * 1000 +\r\n        dates[index].getTimezoneOffset() * 60 * 1000) /\r\n        dateDelta) *\r\n      columnWidth\r\n  );\r\n  return x;\r\n};\r\nconst taskXCoordinateRTL = (\r\n  xDate: Date,\r\n  dates: Date[],\r\n  dateDelta: number,\r\n  columnWidth: number\r\n) => {\r\n  let x = taskXCoordinate(xDate, dates, dateDelta, columnWidth);\r\n  x += columnWidth;\r\n  return x;\r\n};\r\nconst taskYCoordinate = (\r\n  index: number,\r\n  rowHeight: number,\r\n  taskHeight: number\r\n) => {\r\n  const y = index * rowHeight + (rowHeight - taskHeight) / 2;\r\n  return y;\r\n};\r\n\r\nexport const progressWithByParams = (\r\n  taskX1: number,\r\n  taskX2: number,\r\n  progress: number,\r\n  rtl: boolean\r\n) => {\r\n  const progressWidth = (taskX2 - taskX1) * progress * 0.01;\r\n  let progressX: number;\r\n  if (rtl) {\r\n    progressX = taskX2 - progressWidth;\r\n  } else {\r\n    progressX = taskX1;\r\n  }\r\n  return [progressWidth, progressX];\r\n};\r\n\r\nexport const progressByProgressWidth = (\r\n  progressWidth: number,\r\n  barTask: BarTask\r\n) => {\r\n  const barWidth = barTask.x2 - barTask.x1;\r\n  const progressPercent = Math.round((progressWidth * 100) / barWidth);\r\n  if (progressPercent >= 100) return 100;\r\n  else if (progressPercent <= 0) return 0;\r\n  else return progressPercent;\r\n};\r\n\r\nconst progressByX = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 100;\r\n  else if (x <= task.x1) return 0;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((x - task.x1) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\nconst progressByXRTL = (x: number, task: BarTask) => {\r\n  if (x >= task.x2) return 0;\r\n  else if (x <= task.x1) return 100;\r\n  else {\r\n    const barWidth = task.x2 - task.x1;\r\n    const progressPercent = Math.round(((task.x2 - x) * 100) / barWidth);\r\n    return progressPercent;\r\n  }\r\n};\r\n\r\nexport const getProgressPoint = (\r\n  progressX: number,\r\n  taskY: number,\r\n  taskHeight: number\r\n) => {\r\n  const point = [\r\n    progressX - 5,\r\n    taskY + taskHeight,\r\n    progressX + 5,\r\n    taskY + taskHeight,\r\n    progressX,\r\n    taskY + taskHeight - 8.66,\r\n  ];\r\n  return point.join(\",\");\r\n};\r\n\r\nconst startByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x >= task.x2 - task.handleWidth * 2) {\r\n    x = task.x2 - task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x1 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst endByX = (x: number, xStep: number, task: BarTask) => {\r\n  if (x <= task.x1 + task.handleWidth * 2) {\r\n    x = task.x1 + task.handleWidth * 2;\r\n  }\r\n  const steps = Math.round((x - task.x2) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX = task.x2 + additionalXValue;\r\n  return newX;\r\n};\r\n\r\nconst moveByX = (x: number, xStep: number, task: BarTask) => {\r\n  const steps = Math.round((x - task.x1) / xStep);\r\n  const additionalXValue = steps * xStep;\r\n  const newX1 = task.x1 + additionalXValue;\r\n  const newX2 = newX1 + task.x2 - task.x1;\r\n  return [newX1, newX2];\r\n};\r\n\r\nconst dateByX = (\r\n  x: number,\r\n  taskX: number,\r\n  taskDate: Date,\r\n  xStep: number,\r\n  timeStep: number\r\n) => {\r\n  let newDate = new Date(((x - taskX) / xStep) * timeStep + taskDate.getTime());\r\n  newDate = new Date(\r\n    newDate.getTime() +\r\n      (newDate.getTimezoneOffset() - taskDate.getTimezoneOffset()) * 60000\r\n  );\r\n  return newDate;\r\n};\r\n\r\n/**\r\n * Method handles event in real time(mousemove) and on finish(mouseup)\r\n */\r\nexport const handleTaskBySVGMouseEvent = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  let result: { isChanged: boolean; changedTask: BarTask };\r\n  switch (selectedTask.type) {\r\n    case \"milestone\":\r\n      result = handleTaskBySVGMouseEventForMilestone(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta\r\n      );\r\n      break;\r\n    default:\r\n      result = handleTaskBySVGMouseEventForBar(\r\n        svgX,\r\n        action,\r\n        selectedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      break;\r\n  }\r\n  return result;\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForBar = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number,\r\n  rtl: boolean\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"progress\":\r\n      if (rtl) {\r\n        changedTask.progress = progressByXRTL(svgX, selectedTask);\r\n      } else {\r\n        changedTask.progress = progressByX(svgX, selectedTask);\r\n      }\r\n      isChanged = changedTask.progress !== selectedTask.progress;\r\n      if (isChanged) {\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    case \"start\": {\r\n      const newX1 = startByX(svgX, xStep, selectedTask);\r\n      changedTask.x1 = newX1;\r\n      isChanged = changedTask.x1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.end = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.start = dateByX(\r\n            newX1,\r\n            selectedTask.x1,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"end\": {\r\n      const newX2 = endByX(svgX, xStep, selectedTask);\r\n      changedTask.x2 = newX2;\r\n      isChanged = changedTask.x2 !== selectedTask.x2;\r\n      if (isChanged) {\r\n        if (rtl) {\r\n          changedTask.start = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.start,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        } else {\r\n          changedTask.end = dateByX(\r\n            newX2,\r\n            selectedTask.x2,\r\n            selectedTask.end,\r\n            xStep,\r\n            timeStep\r\n          );\r\n        }\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = dateByX(\r\n          newMoveX2,\r\n          selectedTask.x2,\r\n          selectedTask.end,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n        const [progressWidth, progressX] = progressWithByParams(\r\n          changedTask.x1,\r\n          changedTask.x2,\r\n          changedTask.progress,\r\n          rtl\r\n        );\r\n        changedTask.progressWidth = progressWidth;\r\n        changedTask.progressX = progressX;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n\r\nconst handleTaskBySVGMouseEventForMilestone = (\r\n  svgX: number,\r\n  action: BarMoveAction,\r\n  selectedTask: BarTask,\r\n  xStep: number,\r\n  timeStep: number,\r\n  initEventX1Delta: number\r\n): { isChanged: boolean; changedTask: BarTask } => {\r\n  const changedTask: BarTask = { ...selectedTask };\r\n  let isChanged = false;\r\n  switch (action) {\r\n    case \"move\": {\r\n      const [newMoveX1, newMoveX2] = moveByX(\r\n        svgX - initEventX1Delta,\r\n        xStep,\r\n        selectedTask\r\n      );\r\n      isChanged = newMoveX1 !== selectedTask.x1;\r\n      if (isChanged) {\r\n        changedTask.start = dateByX(\r\n          newMoveX1,\r\n          selectedTask.x1,\r\n          selectedTask.start,\r\n          xStep,\r\n          timeStep\r\n        );\r\n        changedTask.end = changedTask.start;\r\n        changedTask.x1 = newMoveX1;\r\n        changedTask.x2 = newMoveX2;\r\n      }\r\n      break;\r\n    }\r\n  }\r\n  return { isChanged, changedTask };\r\n};\r\n","import { BarTask } from \"../types/bar-task\";\r\nimport { Task } from \"../types/public-types\";\r\n\r\nexport function isKeyboardEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.KeyboardEvent {\r\n  return (event as React.KeyboardEvent).key !== undefined;\r\n}\r\n\r\nexport function isMouseEvent(\r\n  event: React.MouseEvent | React.KeyboardEvent | React.FocusEvent\r\n): event is React.MouseEvent {\r\n  return (event as React.MouseEvent).clientX !== undefined;\r\n}\r\n\r\nexport function isBarTask(task: Task | BarTask): task is BarTask {\r\n  return (task as BarTask).x1 !== undefined;\r\n}\r\n\r\nexport function removeHiddenTasks(tasks: Task[]) {\r\n  const groupedTasks = tasks.filter(t => t.hideChildren);\r\n  if (groupedTasks.length > 0) {\r\n    for (let i = 0; groupedTasks.length > i; i++) {\r\n      const groupedTask = groupedTasks[i];\r\n      const children = getChildren(tasks, groupedTask);\r\n      tasks = tasks.filter(t => children.indexOf(t) === -1);\r\n    }\r\n  }\r\n  return tasks;\r\n}\r\n\r\nfunction getChildren(taskList: Task[], task: Task) {\r\n  let tasks: Task[] = [];\r\n  if (task.type !== \"project\") {\r\n    tasks = taskList.filter(\r\n      t => t.dependencies && t.dependencies.indexOf(task.id) !== -1\r\n    );\r\n  } else {\r\n    tasks = taskList.filter(t => t.project && t.project === task.id);\r\n  }\r\n  const taskChildren = tasks.reduce(\r\n    (children: Task[], t) =>\r\n      children.concat(children, getChildren(taskList, t)),\r\n    []\r\n  );\r\n  tasks = tasks.concat(tasks, taskChildren);\r\n  return tasks;\r\n}\r\n","import React from \"react\";\r\nimport style from \"./bar.module.css\";\r\n\r\ntype BarDisplayProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  isSelected: boolean;\r\n  /* progress start point */\r\n  progressX: number;\r\n  progressWidth: number;\r\n  barCornerRadius: number;\r\n  styles: {\r\n    backgroundColor: string;\r\n    backgroundSelectedColor: string;\r\n    progressColor: string;\r\n    progressSelectedColor: string;\r\n  };\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarDisplay: React.FC<BarDisplayProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  isSelected,\r\n  progressX,\r\n  progressWidth,\r\n  barCornerRadius,\r\n  styles,\r\n  onMouseDown,\r\n}) => {\r\n  const getProcessColor = () => {\r\n    return isSelected ? styles.progressSelectedColor : styles.progressColor;\r\n  };\r\n\r\n  const getBarColor = () => {\r\n    return isSelected ? styles.backgroundSelectedColor : styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g onMouseDown={onMouseDown}>\r\n      <rect\r\n        x={x}\r\n        width={width}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getBarColor()}\r\n        className={style.barBackground}\r\n      />\r\n      <rect\r\n        x={progressX}\r\n        width={progressWidth}\r\n        y={y}\r\n        height={height}\r\n        ry={barCornerRadius}\r\n        rx={barCornerRadius}\r\n        fill={getProcessColor()}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarDateHandleProps = {\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  barCornerRadius: number;\r\n  onMouseDown: (event: React.MouseEvent<SVGRectElement, MouseEvent>) => void;\r\n};\r\nexport const BarDateHandle: React.FC<BarDateHandleProps> = ({\r\n  x,\r\n  y,\r\n  width,\r\n  height,\r\n  barCornerRadius,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <rect\r\n      x={x}\r\n      y={y}\r\n      width={width}\r\n      height={height}\r\n      className={styles.barHandle}\r\n      ry={barCornerRadius}\r\n      rx={barCornerRadius}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport styles from \"./bar.module.css\";\r\n\r\ntype BarProgressHandleProps = {\r\n  progressPoint: string;\r\n  onMouseDown: (event: React.MouseEvent<SVGPolygonElement, MouseEvent>) => void;\r\n};\r\nexport const BarProgressHandle: React.FC<BarProgressHandleProps> = ({\r\n  progressPoint,\r\n  onMouseDown,\r\n}) => {\r\n  return (\r\n    <polygon\r\n      className={styles.barHandle}\r\n      points={progressPoint}\r\n      onMouseDown={onMouseDown}\r\n    />\r\n  );\r\n};\r\n","import React from \"react\";\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\nimport { BarDisplay } from \"./bar-display\";\nimport { BarDateHandle } from \"./bar-date-handle\";\nimport { BarProgressHandle } from \"./bar-progress-handle\";\nimport { TaskItemProps } from \"../task-item\";\nimport styles from \"./bar.module.css\";\n\nexport const Bar: React.FC<TaskItemProps> = ({\n  task,\n  isProgressChangeable,\n  isDateChangeable,\n  rtl,\n  onEventStart,\n  isSelected,\n}) => {\n  const progressPoint = getProgressPoint(\n    +!rtl * task.progressWidth + task.progressX,\n    task.y,\n    task.height\n  );\n  const handleHeight = task.height - 2;\n  return (\n    <g className={styles.barWrapper} tabIndex={0}>\n      <BarDisplay\n        x={task.x1}\n        y={task.y}\n        width={task.x2 - task.x1}\n        height={task.height}\n        progressX={task.progressX}\n        progressWidth={task.progressWidth}\n        barCornerRadius={task.barCornerRadius}\n        styles={task.styles}\n        isSelected={isSelected}\n        onMouseDown={e => {\n          isDateChangeable && onEventStart(\"move\", task, e);\n        }}\n      />\n      <g className=\"handleGroup\">\n        {isDateChangeable && (\n          <g>\n            {/* left */}\n            <BarDateHandle\n              x={task.x1 + 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"start\", task, e);\n              }}\n            />\n            {/* right */}\n            <BarDateHandle\n              x={task.x2 - task.handleWidth - 1}\n              y={task.y + 1}\n              width={task.handleWidth}\n              height={handleHeight}\n              barCornerRadius={task.barCornerRadius}\n              onMouseDown={e => {\n                onEventStart(\"end\", task, e);\n              }}\n            />\n          </g>\n        )}\n        {isProgressChangeable && (\n          <BarProgressHandle\n            progressPoint={progressPoint}\n            onMouseDown={e => {\n              onEventStart(\"progress\", task, e);\n            }}\n          />\n        )}\n      </g>\n    </g>\n  );\n};\n","import React from \"react\";\r\nimport { getProgressPoint } from \"../../../helpers/bar-helper\";\r\nimport { BarDisplay } from \"./bar-display\";\r\nimport { BarProgressHandle } from \"./bar-progress-handle\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./bar.module.css\";\r\n\r\nexport const BarSmall: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isProgressChangeable,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const progressPoint = getProgressPoint(\r\n    task.progressWidth + task.x1,\r\n    task.y,\r\n    task.height\r\n  );\r\n  return (\r\n    <g className={styles.barWrapper} tabIndex={0}>\r\n      <BarDisplay\r\n        x={task.x1}\r\n        y={task.y}\r\n        width={task.x2 - task.x1}\r\n        height={task.height}\r\n        progressX={task.progressX}\r\n        progressWidth={task.progressWidth}\r\n        barCornerRadius={task.barCornerRadius}\r\n        styles={task.styles}\r\n        isSelected={isSelected}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n      <g className=\"handleGroup\">\r\n        {isProgressChangeable && (\r\n          <BarProgressHandle\r\n            progressPoint={progressPoint}\r\n            onMouseDown={e => {\r\n              onEventStart(\"progress\", task, e);\r\n            }}\r\n          />\r\n        )}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./milestone.module.css\";\r\n\r\nexport const Milestone: React.FC<TaskItemProps> = ({\r\n  task,\r\n  isDateChangeable,\r\n  onEventStart,\r\n  isSelected,\r\n}) => {\r\n  const transform = `rotate(45 ${task.x1 + task.height * 0.356} \r\n    ${task.y + task.height * 0.85})`;\r\n  const getBarColor = () => {\r\n    return isSelected\r\n      ? task.styles.backgroundSelectedColor\r\n      : task.styles.backgroundColor;\r\n  };\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.milestoneWrapper}>\r\n      <rect\r\n        fill={getBarColor()}\r\n        x={task.x1}\r\n        width={task.height}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        transform={transform}\r\n        className={styles.milestoneBackground}\r\n        onMouseDown={e => {\r\n          isDateChangeable && onEventStart(\"move\", task, e);\r\n        }}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { TaskItemProps } from \"../task-item\";\r\nimport styles from \"./project.module.css\";\r\n\r\nexport const Project: React.FC<TaskItemProps> = ({ task, isSelected }) => {\r\n  const barColor = isSelected\r\n    ? task.styles.backgroundSelectedColor\r\n    : task.styles.backgroundColor;\r\n  const processColor = isSelected\r\n    ? task.styles.progressSelectedColor\r\n    : task.styles.progressColor;\r\n  const projectWith = task.x2 - task.x1;\r\n\r\n  const projectLeftTriangle = [\r\n    task.x1,\r\n    task.y + task.height / 2 - 1,\r\n    task.x1,\r\n    task.y + task.height,\r\n    task.x1 + 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n  const projectRightTriangle = [\r\n    task.x2,\r\n    task.y + task.height / 2 - 1,\r\n    task.x2,\r\n    task.y + task.height,\r\n    task.x2 - 15,\r\n    task.y + task.height / 2 - 1,\r\n  ].join(\",\");\r\n\r\n  return (\r\n    <g tabIndex={0} className={styles.projectWrapper}>\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectBackground}\r\n      />\r\n      <rect\r\n        x={task.progressX}\r\n        width={task.progressWidth}\r\n        y={task.y}\r\n        height={task.height}\r\n        ry={task.barCornerRadius}\r\n        rx={task.barCornerRadius}\r\n        fill={processColor}\r\n      />\r\n      <rect\r\n        fill={barColor}\r\n        x={task.x1}\r\n        width={projectWith}\r\n        y={task.y}\r\n        height={task.height / 2}\r\n        rx={task.barCornerRadius}\r\n        ry={task.barCornerRadius}\r\n        className={styles.projectTop}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectLeftTriangle}\r\n        fill={barColor}\r\n      />\r\n      <polygon\r\n        className={styles.projectTop}\r\n        points={projectRightTriangle}\r\n        fill={barColor}\r\n      />\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useRef, useState } from \"react\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { GanttContentMoveAction } from \"../../types/gantt-task-actions\";\r\nimport { Bar } from \"./bar/bar\";\r\nimport { BarSmall } from \"./bar/bar-small\";\r\nimport { Milestone } from \"./milestone/milestone\";\r\nimport { Project } from \"./project/project\";\r\nimport style from \"./task-list.module.css\";\r\n\r\nexport type TaskItemProps = {\r\n  task: BarTask;\r\n  arrowIndent: number;\r\n  taskHeight: number;\r\n  isProgressChangeable: boolean;\r\n  isDateChangeable: boolean;\r\n  isDelete: boolean;\r\n  isSelected: boolean;\r\n  rtl: boolean;\r\n  onEventStart: (\r\n    action: GanttContentMoveAction,\r\n    selectedTask: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => any;\r\n};\r\n\r\nexport const TaskItem: React.FC<TaskItemProps> = props => {\r\n  const {\r\n    task,\r\n    arrowIndent,\r\n    isDelete,\r\n    taskHeight,\r\n    isSelected,\r\n    rtl,\r\n    onEventStart,\r\n  } = {\r\n    ...props,\r\n  };\r\n  const textRef = useRef<SVGTextElement>(null);\r\n  const [taskItem, setTaskItem] = useState<JSX.Element>(<div />);\r\n  const [isTextInside, setIsTextInside] = useState(true);\r\n\r\n  useEffect(() => {\r\n    switch (task.typeInternal) {\r\n      case \"milestone\":\r\n        setTaskItem(<Milestone {...props} />);\r\n        break;\r\n      case \"project\":\r\n        setTaskItem(<Project {...props} />);\r\n        break;\r\n      case \"smalltask\":\r\n        setTaskItem(<BarSmall {...props} />);\r\n        break;\r\n      default:\r\n        setTaskItem(<Bar {...props} />);\r\n        break;\r\n    }\r\n  }, [task, isSelected]);\r\n\r\n  useEffect(() => {\r\n    if (textRef.current) {\r\n      setIsTextInside(textRef.current.getBBox().width < task.x2 - task.x1);\r\n    }\r\n  }, [textRef, task]);\r\n\r\n  const getX = () => {\r\n    const width = task.x2 - task.x1;\r\n    const hasChild = task.barChildren.length > 0;\r\n    if (isTextInside) {\r\n      return task.x1 + width * 0.5;\r\n    }\r\n    if (rtl && textRef.current) {\r\n      return (\r\n        task.x1 -\r\n        textRef.current.getBBox().width -\r\n        arrowIndent * +hasChild -\r\n        arrowIndent * 0.2\r\n      );\r\n    } else {\r\n      return task.x1 + width + arrowIndent * +hasChild + arrowIndent * 0.2;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g\r\n      onKeyDown={e => {\r\n        switch (e.key) {\r\n          case \"Delete\": {\r\n            if (isDelete) onEventStart(\"delete\", task, e);\r\n            break;\r\n          }\r\n        }\r\n        e.stopPropagation();\r\n      }}\r\n      onMouseEnter={e => {\r\n        onEventStart(\"mouseenter\", task, e);\r\n      }}\r\n      onMouseLeave={e => {\r\n        onEventStart(\"mouseleave\", task, e);\r\n      }}\r\n      onDoubleClick={e => {\r\n        onEventStart(\"dblclick\", task, e);\r\n      }}\r\n      onFocus={() => {\r\n        onEventStart(\"select\", task);\r\n      }}\r\n    >\r\n      {taskItem}\r\n      <text\r\n        x={getX()}\r\n        y={task.y + taskHeight * 0.5}\r\n        className={\r\n          isTextInside\r\n            ? style.barLabel\r\n            : style.barLabel && style.barLabelOutside\r\n        }\r\n        ref={textRef}\r\n      >\r\n        {task.name}\r\n      </text>\r\n    </g>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { EventOption } from \"../../types/public-types\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { Arrow } from \"../other/arrow\";\r\nimport { handleTaskBySVGMouseEvent } from \"../../helpers/bar-helper\";\r\nimport { isKeyboardEvent } from \"../../helpers/other-helper\";\r\nimport { TaskItem } from \"../task-item/task-item\";\r\nimport {\r\n  BarMoveAction,\r\n  GanttContentMoveAction,\r\n  GanttEvent,\r\n} from \"../../types/gantt-task-actions\";\r\n\r\nexport type TaskGanttContentProps = {\r\n  tasks: BarTask[];\r\n  dates: Date[];\r\n  ganttEvent: GanttEvent;\r\n  selectedTask: BarTask | undefined;\r\n  rowHeight: number;\r\n  columnWidth: number;\r\n  timeStep: number;\r\n  svg?: React.RefObject<SVGSVGElement>;\r\n  svgWidth: number;\r\n  taskHeight: number;\r\n  arrowColor: string;\r\n  arrowIndent: number;\r\n  fontSize: string;\r\n  fontFamily: string;\r\n  rtl: boolean;\r\n  setGanttEvent: (value: GanttEvent) => void;\r\n  setFailedTask: (value: BarTask | null) => void;\r\n  setSelectedTask: (taskId: string) => void;\r\n} & EventOption;\r\n\r\nexport const TaskGanttContent: React.FC<TaskGanttContentProps> = ({\r\n  tasks,\r\n  dates,\r\n  ganttEvent,\r\n  selectedTask,\r\n  rowHeight,\r\n  columnWidth,\r\n  timeStep,\r\n  svg,\r\n  taskHeight,\r\n  arrowColor,\r\n  arrowIndent,\r\n  fontFamily,\r\n  fontSize,\r\n  rtl,\r\n  setGanttEvent,\r\n  setFailedTask,\r\n  setSelectedTask,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onDelete,\r\n}) => {\r\n  const point = svg?.current?.createSVGPoint();\r\n  const [xStep, setXStep] = useState(0);\r\n  const [initEventX1Delta, setInitEventX1Delta] = useState(0);\r\n  const [isMoving, setIsMoving] = useState(false);\r\n\r\n  // create xStep\r\n  useEffect(() => {\r\n    const dateDelta =\r\n      dates[1].getTime() -\r\n      dates[0].getTime() -\r\n      dates[1].getTimezoneOffset() * 60 * 1000 +\r\n      dates[0].getTimezoneOffset() * 60 * 1000;\r\n    const newXStep = (timeStep * columnWidth) / dateDelta;\r\n    setXStep(newXStep);\r\n  }, [columnWidth, dates, timeStep]);\r\n\r\n  useEffect(() => {\r\n    const handleMouseMove = async (event: MouseEvent) => {\r\n      if (!ganttEvent.changedTask || !point || !svg?.current) return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n\r\n      const { isChanged, changedTask } = handleTaskBySVGMouseEvent(\r\n        cursor.x,\r\n        ganttEvent.action as BarMoveAction,\r\n        ganttEvent.changedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n      if (isChanged) {\r\n        setGanttEvent({ action: ganttEvent.action, changedTask });\r\n      }\r\n    };\r\n\r\n    const handleMouseUp = async (event: MouseEvent) => {\r\n      const { action, originalSelectedTask, changedTask } = ganttEvent;\r\n      if (!changedTask || !point || !svg?.current || !originalSelectedTask)\r\n        return;\r\n      event.preventDefault();\r\n\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg?.current.getScreenCTM()?.inverse()\r\n      );\r\n      const { changedTask: newChangedTask } = handleTaskBySVGMouseEvent(\r\n        cursor.x,\r\n        action as BarMoveAction,\r\n        changedTask,\r\n        xStep,\r\n        timeStep,\r\n        initEventX1Delta,\r\n        rtl\r\n      );\r\n\r\n      const isNotLikeOriginal =\r\n        originalSelectedTask.start !== newChangedTask.start ||\r\n        originalSelectedTask.end !== newChangedTask.end ||\r\n        originalSelectedTask.progress !== newChangedTask.progress;\r\n\r\n      // remove listeners\r\n      svg.current.removeEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.removeEventListener(\"mouseup\", handleMouseUp);\r\n      setGanttEvent({ action: \"\" });\r\n      setIsMoving(false);\r\n\r\n      // custom operation start\r\n      let operationSuccess = true;\r\n      if (\r\n        (action === \"move\" || action === \"end\" || action === \"start\") &&\r\n        onDateChange &&\r\n        isNotLikeOriginal\r\n      ) {\r\n        try {\r\n          const result = await onDateChange(newChangedTask);\r\n          if (result !== undefined) {\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          operationSuccess = false;\r\n        }\r\n      } else if (onProgressChange && isNotLikeOriginal) {\r\n        try {\r\n          const result = await onProgressChange(newChangedTask);\r\n          if (result !== undefined) {\r\n            operationSuccess = result;\r\n          }\r\n        } catch (error) {\r\n          operationSuccess = false;\r\n        }\r\n      }\r\n\r\n      // If operation is failed - return old state\r\n      if (!operationSuccess) {\r\n        setFailedTask(originalSelectedTask);\r\n      }\r\n    };\r\n\r\n    if (\r\n      !isMoving &&\r\n      (ganttEvent.action === \"move\" ||\r\n        ganttEvent.action === \"end\" ||\r\n        ganttEvent.action === \"start\" ||\r\n        ganttEvent.action === \"progress\") &&\r\n      svg?.current\r\n    ) {\r\n      svg.current.addEventListener(\"mousemove\", handleMouseMove);\r\n      svg.current.addEventListener(\"mouseup\", handleMouseUp);\r\n      setIsMoving(true);\r\n    }\r\n  }, [\r\n    ganttEvent,\r\n    xStep,\r\n    initEventX1Delta,\r\n    onProgressChange,\r\n    timeStep,\r\n    onDateChange,\r\n    svg,\r\n    isMoving,\r\n  ]);\r\n\r\n  /**\r\n   * Method is Start point of task change\r\n   */\r\n  const handleBarEventStart = async (\r\n    action: GanttContentMoveAction,\r\n    task: BarTask,\r\n    event?: React.MouseEvent | React.KeyboardEvent\r\n  ) => {\r\n    if (!event) {\r\n      if (action === \"select\") {\r\n        setSelectedTask(task.id);\r\n      }\r\n    }\r\n    // Keyboard events\r\n    else if (isKeyboardEvent(event)) {\r\n      if (action === \"delete\") {\r\n        if (onDelete) {\r\n          try {\r\n            const result = await onDelete(task);\r\n            if (result !== undefined && result) {\r\n              setGanttEvent({ action, changedTask: task });\r\n            }\r\n          } catch (error) {\r\n            console.error(\"Error on Delete. \" + error);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // Mouse Events\r\n    else if (action === \"mouseenter\") {\r\n      if (!ganttEvent.action) {\r\n        setGanttEvent({\r\n          action,\r\n          changedTask: task,\r\n          originalSelectedTask: task,\r\n        });\r\n      }\r\n    } else if (action === \"mouseleave\") {\r\n      if (ganttEvent.action === \"mouseenter\") {\r\n        setGanttEvent({ action: \"\" });\r\n      }\r\n    } else if (action === \"dblclick\") {\r\n      !!onDoubleClick && onDoubleClick(task);\r\n    }\r\n    // Change task event start\r\n    else if (action === \"move\") {\r\n      if (!svg?.current || !point) return;\r\n      point.x = event.clientX;\r\n      const cursor = point.matrixTransform(\r\n        svg.current.getScreenCTM()?.inverse()\r\n      );\r\n      setInitEventX1Delta(cursor.x - task.x1);\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    } else {\r\n      setGanttEvent({\r\n        action,\r\n        changedTask: task,\r\n        originalSelectedTask: task,\r\n      });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <g className=\"content\">\r\n      <g className=\"arrows\" fill={arrowColor} stroke={arrowColor}>\r\n        {tasks.map(task => {\r\n          return task.barChildren.map(child => {\r\n            return (\r\n              <Arrow\r\n                key={`Arrow from ${task.id} to ${tasks[child].id}`}\r\n                taskFrom={task}\r\n                taskTo={tasks[child]}\r\n                rowHeight={rowHeight}\r\n                taskHeight={taskHeight}\r\n                arrowIndent={arrowIndent}\r\n                rtl={rtl}\r\n              />\r\n            );\r\n          });\r\n        })}\r\n      </g>\r\n      <g className=\"bar\" fontFamily={fontFamily} fontSize={fontSize}>\r\n        {tasks.map(task => {\r\n          return (\r\n            <TaskItem\r\n              task={task}\r\n              arrowIndent={arrowIndent}\r\n              taskHeight={taskHeight}\r\n              isProgressChangeable={!!onProgressChange && !task.isDisabled}\r\n              isDateChangeable={!!onDateChange && !task.isDisabled}\r\n              isDelete={!task.isDisabled}\r\n              onEventStart={handleBarEventStart}\r\n              key={task.id}\r\n              isSelected={!!selectedTask && task.id === selectedTask.id}\r\n              rtl={rtl}\r\n            />\r\n          );\r\n        })}\r\n      </g>\r\n    </g>\r\n  );\r\n};\r\n","import React, { useRef, useEffect } from \"react\";\r\nimport { GridProps, Grid } from \"../grid/grid\";\r\nimport { CalendarProps, Calendar } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps, TaskGanttContent } from \"./task-gantt-content\";\r\nimport styles from \"./gantt.module.css\";\r\n\r\nexport type TaskGanttProps = {\r\n  gridProps: GridProps;\r\n  calendarProps: CalendarProps;\r\n  barProps: TaskGanttContentProps;\r\n  ganttHeight: number;\r\n  scrollY: number;\r\n  scrollX: number;\r\n};\r\nexport const TaskGantt: React.FC<TaskGanttProps> = ({\r\n  gridProps,\r\n  calendarProps,\r\n  barProps,\r\n  ganttHeight,\r\n  scrollY,\r\n  scrollX,\r\n}) => {\r\n  const ganttSVGRef = useRef<SVGSVGElement>(null);\r\n  const horizontalContainerRef = useRef<HTMLDivElement>(null);\r\n  const verticalGanttContainerRef = useRef<HTMLDivElement>(null);\r\n  const newBarProps = { ...barProps, svg: ganttSVGRef };\r\n\r\n  useEffect(() => {\r\n    if (horizontalContainerRef.current) {\r\n      horizontalContainerRef.current.scrollTop = scrollY;\r\n    }\r\n  }, [scrollY]);\r\n\r\n  useEffect(() => {\r\n    if (verticalGanttContainerRef.current) {\r\n      verticalGanttContainerRef.current.scrollLeft = scrollX;\r\n    }\r\n  }, [scrollX]);\r\n\r\n  return (\r\n    <div\r\n      className={styles.ganttVerticalContainer}\r\n      ref={verticalGanttContainerRef}\r\n      dir=\"ltr\"\r\n    >\r\n      <svg\r\n        xmlns=\"http://www.w3.org/2000/svg\"\r\n        width={gridProps.svgWidth}\r\n        height={calendarProps.headerHeight}\r\n        fontFamily={barProps.fontFamily}\r\n      >\r\n        <Calendar {...calendarProps} />\r\n      </svg>\r\n      <div\r\n        ref={horizontalContainerRef}\r\n        className={styles.horizontalContainer}\r\n        style={\r\n          ganttHeight\r\n            ? { height: ganttHeight, width: gridProps.svgWidth }\r\n            : { width: gridProps.svgWidth }\r\n        }\r\n      >\r\n        <svg\r\n          xmlns=\"http://www.w3.org/2000/svg\"\r\n          width={gridProps.svgWidth}\r\n          height={barProps.rowHeight * barProps.tasks.length}\r\n          fontFamily={barProps.fontFamily}\r\n          ref={ganttSVGRef}\r\n        >\r\n          <Grid {...gridProps} />\r\n          <TaskGanttContent {...newBarProps} />\r\n        </svg>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport styles from \"./horizontal-scroll.module.css\";\r\n\r\nexport const HorizontalScroll: React.FC<{\r\n  scroll: number;\r\n  svgWidth: number;\r\n  taskListWidth: number;\r\n  rtl: boolean;\r\n  onScroll: (event: SyntheticEvent<HTMLDivElement>) => void;\r\n}> = ({ scroll, svgWidth, taskListWidth, rtl, onScroll }) => {\r\n  const scrollRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    if (scrollRef.current) {\r\n      scrollRef.current.scrollLeft = scroll;\r\n    }\r\n  }, [scroll]);\r\n\r\n  return (\r\n    <div\r\n      dir=\"ltr\"\r\n      style={{\r\n        margin: rtl\r\n          ? `0px ${taskListWidth}px 0px 0px`\r\n          : `0px 0px 0px ${taskListWidth}px`,\r\n      }}\r\n      className={styles.scroll}\r\n      onScroll={onScroll}\r\n      ref={scrollRef}\r\n    >\r\n      <div style={{ width: svgWidth, height: 1 }} />\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, SyntheticEvent, useRef, useEffect } from \"react\";\r\nimport { ViewMode, GanttProps, Task } from \"../../types/public-types\";\r\nimport { GridProps } from \"../grid/grid\";\r\nimport { ganttDateRange, seedDates } from \"../../helpers/date-helper\";\r\nimport { CalendarProps } from \"../calendar/calendar\";\r\nimport { TaskGanttContentProps } from \"./task-gantt-content\";\r\nimport { TaskListHeaderDefault } from \"../task-list/task-list-header\";\r\nimport { TaskListTableDefault } from \"../task-list/task-list-table\";\r\nimport { StandardTooltipContent, Tooltip } from \"../other/tooltip\";\r\nimport { VerticalScroll } from \"../other/vertical-scroll\";\r\nimport { TaskListProps, TaskList } from \"../task-list/task-list\";\r\nimport { TaskGantt } from \"./task-gantt\";\r\nimport { BarTask } from \"../../types/bar-task\";\r\nimport { convertToBarTasks } from \"../../helpers/bar-helper\";\r\nimport { GanttEvent } from \"../../types/gantt-task-actions\";\r\nimport { DateSetup } from \"../../types/date-setup\";\r\nimport styles from \"./gantt.module.css\";\r\nimport { HorizontalScroll } from \"../other/horizontal-scroll\";\r\nimport { removeHiddenTasks } from \"../../helpers/other-helper\";\r\n\r\nexport const Gantt: React.FunctionComponent<GanttProps> = ({\r\n  tasks,\r\n  headerHeight = 50,\r\n  columnWidth = 60,\r\n  listCellWidth = \"155px\",\r\n  rowHeight = 50,\r\n  ganttHeight = 0,\r\n  viewMode = ViewMode.Day,\r\n  locale = \"en-GB\",\r\n  barFill = 60,\r\n  barCornerRadius = 3,\r\n  barProgressColor = \"#a3a3ff\",\r\n  barProgressSelectedColor = \"#8282f5\",\r\n  barBackgroundColor = \"#b8c2cc\",\r\n  barBackgroundSelectedColor = \"#aeb8c2\",\r\n  projectProgressColor = \"#7db59a\",\r\n  projectProgressSelectedColor = \"#59a985\",\r\n  projectBackgroundColor = \"#fac465\",\r\n  projectBackgroundSelectedColor = \"#f7bb53\",\r\n  milestoneBackgroundColor = \"#f1c453\",\r\n  milestoneBackgroundSelectedColor = \"#f29e4c\",\r\n  rtl = false,\r\n  handleWidth = 8,\r\n  timeStep = 300000,\r\n  arrowColor = \"grey\",\r\n  fontFamily = \"Arial, Roboto, Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue\",\r\n  fontSize = \"14px\",\r\n  arrowIndent = 20,\r\n  todayColor = \"rgba(252, 248, 227, 0.5)\",\r\n  TooltipContent = StandardTooltipContent,\r\n  TaskListHeader = TaskListHeaderDefault,\r\n  TaskListTable = TaskListTableDefault,\r\n  onDateChange,\r\n  onProgressChange,\r\n  onDoubleClick,\r\n  onDelete,\r\n  onSelect,\r\n  onExpanderClick,\r\n}) => {\r\n  const wrapperRef = useRef<HTMLDivElement>(null);\r\n  const taskListRef = useRef<HTMLDivElement>(null);\r\n  const [dateSetup, setDateSetup] = useState<DateSetup>(() => {\r\n    const [startDate, endDate] = ganttDateRange(tasks, viewMode);\r\n    return { viewMode, dates: seedDates(startDate, endDate, viewMode) };\r\n  });\r\n\r\n  const [taskHeight, setTaskHeight] = useState((rowHeight * barFill) / 100);\r\n  const [taskListWidth, setTaskListWidth] = useState(0);\r\n  const [svgContainerWidth, setSvgContainerWidth] = useState(0);\r\n  const [svgContainerHeight, setSvgContainerHeight] = useState(ganttHeight);\r\n  const [barTasks, setBarTasks] = useState<BarTask[]>([]);\r\n  const [ganttEvent, setGanttEvent] = useState<GanttEvent>({\r\n    action: \"\",\r\n  });\r\n\r\n  const [selectedTask, setSelectedTask] = useState<BarTask>();\r\n  const [failedTask, setFailedTask] = useState<BarTask | null>(null);\r\n\r\n  const svgWidth = dateSetup.dates.length * columnWidth;\r\n  const ganttFullHeight = barTasks.length * rowHeight;\r\n\r\n  const [scrollY, setScrollY] = useState(0);\r\n  const [scrollX, setScrollX] = useState(-1);\r\n  const [ignoreScrollEvent, setIgnoreScrollEvent] = useState(false);\r\n\r\n  // task change events\r\n  useEffect(() => {\r\n    const filteredTasks = removeHiddenTasks(tasks);\r\n    const [startDate, endDate] = ganttDateRange(filteredTasks, viewMode);\r\n    let newDates = seedDates(startDate, endDate, viewMode);\r\n    if (rtl) {\r\n      newDates = newDates.reverse();\r\n      if (scrollX === -1) {\r\n        setScrollX(newDates.length * columnWidth);\r\n      }\r\n    }\r\n    setDateSetup({ dates: newDates, viewMode });\r\n    setBarTasks(\r\n      convertToBarTasks(\r\n        filteredTasks,\r\n        newDates,\r\n        columnWidth,\r\n        rowHeight,\r\n        taskHeight,\r\n        barCornerRadius,\r\n        handleWidth,\r\n        rtl,\r\n        barProgressColor,\r\n        barProgressSelectedColor,\r\n        barBackgroundColor,\r\n        barBackgroundSelectedColor,\r\n        projectProgressColor,\r\n        projectProgressSelectedColor,\r\n        projectBackgroundColor,\r\n        projectBackgroundSelectedColor,\r\n        milestoneBackgroundColor,\r\n        milestoneBackgroundSelectedColor\r\n      )\r\n    );\r\n  }, [\r\n    tasks,\r\n    viewMode,\r\n    rowHeight,\r\n    barCornerRadius,\r\n    columnWidth,\r\n    taskHeight,\r\n    handleWidth,\r\n    barProgressColor,\r\n    barProgressSelectedColor,\r\n    barBackgroundColor,\r\n    barBackgroundSelectedColor,\r\n    projectProgressColor,\r\n    projectProgressSelectedColor,\r\n    projectBackgroundColor,\r\n    projectBackgroundSelectedColor,\r\n    milestoneBackgroundColor,\r\n    milestoneBackgroundSelectedColor,\r\n    rtl,\r\n    scrollX,\r\n  ]);\r\n\r\n  useEffect(() => {\r\n    const { changedTask, action } = ganttEvent;\r\n    if (changedTask) {\r\n      if (action === \"delete\") {\r\n        setGanttEvent({ action: \"\" });\r\n        setBarTasks(barTasks.filter(t => t.id !== changedTask.id));\r\n      } else if (\r\n        action === \"move\" ||\r\n        action === \"end\" ||\r\n        action === \"start\" ||\r\n        action === \"progress\"\r\n      ) {\r\n        const prevStateTask = barTasks.find(t => t.id === changedTask.id);\r\n        if (\r\n          prevStateTask &&\r\n          (prevStateTask.start.getTime() !== changedTask.start.getTime() ||\r\n            prevStateTask.end.getTime() !== changedTask.end.getTime() ||\r\n            prevStateTask.progress !== changedTask.progress)\r\n        ) {\r\n          // actions for change\r\n          const newTaskList = barTasks.map(t =>\r\n            t.id === changedTask.id ? changedTask : t\r\n          );\r\n          setBarTasks(newTaskList);\r\n        }\r\n      }\r\n    }\r\n  }, [ganttEvent, barTasks]);\r\n\r\n  useEffect(() => {\r\n    if (failedTask) {\r\n      setBarTasks(barTasks.map(t => (t.id !== failedTask.id ? t : failedTask)));\r\n      setFailedTask(null);\r\n    }\r\n  }, [failedTask, barTasks]);\r\n\r\n  useEffect(() => {\r\n    const newTaskHeight = (rowHeight * barFill) / 100;\r\n    if (newTaskHeight !== taskHeight) {\r\n      setTaskHeight(newTaskHeight);\r\n    }\r\n  }, [rowHeight, barFill, taskHeight]);\r\n\r\n  useEffect(() => {\r\n    if (!listCellWidth) {\r\n      setTaskListWidth(0);\r\n    }\r\n    if (taskListRef.current) {\r\n      setTaskListWidth(taskListRef.current.offsetWidth);\r\n    }\r\n  }, [taskListRef, listCellWidth]);\r\n\r\n  useEffect(() => {\r\n    if (wrapperRef.current) {\r\n      setSvgContainerWidth(wrapperRef.current.offsetWidth - taskListWidth);\r\n    }\r\n  }, [wrapperRef, taskListWidth]);\r\n\r\n  useEffect(() => {\r\n    if (ganttHeight) {\r\n      setSvgContainerHeight(ganttHeight + headerHeight);\r\n    } else {\r\n      setSvgContainerHeight(tasks.length * rowHeight + headerHeight);\r\n    }\r\n  }, [ganttHeight, tasks]);\r\n\r\n  // scroll events\r\n  useEffect(() => {\r\n    const handleWheel = (event: WheelEvent) => {\r\n      if (event.shiftKey || event.deltaX) {\r\n        const scrollMove = event.deltaX ? event.deltaX : event.deltaY;\r\n        let newScrollX = scrollX + scrollMove;\r\n        if (newScrollX < 0) {\r\n          newScrollX = 0;\r\n        } else if (newScrollX > svgWidth) {\r\n          newScrollX = svgWidth;\r\n        }\r\n        setScrollX(newScrollX);\r\n        event.preventDefault();\r\n      } else if (ganttHeight) {\r\n        let newScrollY = scrollY + event.deltaY;\r\n        if (newScrollY < 0) {\r\n          newScrollY = 0;\r\n        } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n          newScrollY = ganttFullHeight - ganttHeight;\r\n        }\r\n        if (newScrollY !== scrollY) {\r\n          setScrollY(newScrollY);\r\n          event.preventDefault();\r\n        }\r\n      }\r\n\r\n      setIgnoreScrollEvent(true);\r\n    };\r\n\r\n    // subscribe if scroll is necessary\r\n    if (wrapperRef.current) {\r\n      wrapperRef.current.addEventListener(\"wheel\", handleWheel, {\r\n        passive: false,\r\n      });\r\n    }\r\n    return () => {\r\n      if (wrapperRef.current) {\r\n        wrapperRef.current.removeEventListener(\"wheel\", handleWheel);\r\n      }\r\n    };\r\n  }, [wrapperRef.current, scrollY, scrollX, ganttHeight, svgWidth, rtl]);\r\n\r\n  const handleScrollY = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollY !== event.currentTarget.scrollTop && !ignoreScrollEvent) {\r\n      setScrollY(event.currentTarget.scrollTop);\r\n    }\r\n    setIgnoreScrollEvent(false);\r\n  };\r\n\r\n  const handleScrollX = (event: SyntheticEvent<HTMLDivElement>) => {\r\n    if (scrollX !== event.currentTarget.scrollLeft && !ignoreScrollEvent) {\r\n      setScrollX(event.currentTarget.scrollLeft);\r\n    }\r\n    setIgnoreScrollEvent(false);\r\n  };\r\n\r\n  /**\r\n   * Handles arrow keys events and transform it to new scroll\r\n   */\r\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLDivElement>) => {\r\n    event.preventDefault();\r\n    let newScrollY = scrollY;\r\n    let newScrollX = scrollX;\r\n    let isX = true;\r\n    switch (event.key) {\r\n      case \"Down\": // IE/Edge specific value\r\n      case \"ArrowDown\":\r\n        newScrollY += rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Up\": // IE/Edge specific value\r\n      case \"ArrowUp\":\r\n        newScrollY -= rowHeight;\r\n        isX = false;\r\n        break;\r\n      case \"Left\":\r\n      case \"ArrowLeft\":\r\n        newScrollX -= columnWidth;\r\n        break;\r\n      case \"Right\": // IE/Edge specific value\r\n      case \"ArrowRight\":\r\n        newScrollX += columnWidth;\r\n        break;\r\n    }\r\n    if (isX) {\r\n      if (newScrollX < 0) {\r\n        newScrollX = 0;\r\n      } else if (newScrollX > svgWidth) {\r\n        newScrollX = svgWidth;\r\n      }\r\n      setScrollX(newScrollX);\r\n    } else {\r\n      if (newScrollY < 0) {\r\n        newScrollY = 0;\r\n      } else if (newScrollY > ganttFullHeight - ganttHeight) {\r\n        newScrollY = ganttFullHeight - ganttHeight;\r\n      }\r\n      setScrollY(newScrollY);\r\n    }\r\n    setIgnoreScrollEvent(true);\r\n  };\r\n\r\n  /**\r\n   * Task select event\r\n   */\r\n  const handleSelectedTask = (taskId: string) => {\r\n    const newSelectedTask = barTasks.find(t => t.id === taskId);\r\n    const oldSelectedTask = barTasks.find(\r\n      t => !!selectedTask && t.id === selectedTask.id\r\n    );\r\n    if (onSelect) {\r\n      if (oldSelectedTask) {\r\n        onSelect(oldSelectedTask, false);\r\n      }\r\n      if (newSelectedTask) {\r\n        onSelect(newSelectedTask, true);\r\n      }\r\n    }\r\n    setSelectedTask(newSelectedTask);\r\n  };\r\n  const handleExpanderClick = (task: Task) => {\r\n    debugger;\r\n    if (onExpanderClick && task.hideChildren !== undefined) {\r\n      onExpanderClick({ ...task, hideChildren: !task.hideChildren });\r\n    }\r\n  };\r\n  const gridProps: GridProps = {\r\n    columnWidth,\r\n    svgWidth,\r\n    tasks: tasks,\r\n    rowHeight,\r\n    dates: dateSetup.dates,\r\n    todayColor,\r\n    rtl,\r\n  };\r\n  const calendarProps: CalendarProps = {\r\n    dateSetup,\r\n    locale,\r\n    viewMode,\r\n    headerHeight,\r\n    columnWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    rtl,\r\n  };\r\n  const barProps: TaskGanttContentProps = {\r\n    tasks: barTasks,\r\n    dates: dateSetup.dates,\r\n    ganttEvent,\r\n    selectedTask,\r\n    rowHeight,\r\n    taskHeight,\r\n    columnWidth,\r\n    arrowColor,\r\n    timeStep,\r\n    fontFamily,\r\n    fontSize,\r\n    arrowIndent,\r\n    svgWidth,\r\n    rtl,\r\n    setGanttEvent,\r\n    setFailedTask,\r\n    setSelectedTask: handleSelectedTask,\r\n    onDateChange,\r\n    onProgressChange,\r\n    onDoubleClick,\r\n    onDelete,\r\n  };\r\n\r\n  const tableProps: TaskListProps = {\r\n    rowHeight,\r\n    rowWidth: listCellWidth,\r\n    fontFamily,\r\n    fontSize,\r\n    tasks: barTasks,\r\n    locale,\r\n    headerHeight,\r\n    scrollY,\r\n    ganttHeight,\r\n    horizontalContainerClass: styles.horizontalContainer,\r\n    selectedTask,\r\n    taskListRef,\r\n    setSelectedTask: handleSelectedTask,\r\n    onExpanderClick: handleExpanderClick,\r\n    TaskListHeader,\r\n    TaskListTable,\r\n  };\r\n  return (\r\n    <div>\r\n      <div\r\n        className={styles.wrapper}\r\n        onKeyDown={handleKeyDown}\r\n        tabIndex={0}\r\n        ref={wrapperRef}\r\n      >\r\n        {listCellWidth && <TaskList {...tableProps} />}\r\n        <TaskGantt\r\n          gridProps={gridProps}\r\n          calendarProps={calendarProps}\r\n          barProps={barProps}\r\n          ganttHeight={ganttHeight}\r\n          scrollY={scrollY}\r\n          scrollX={scrollX}\r\n        />\r\n        {ganttEvent.changedTask && (\r\n          <Tooltip\r\n            arrowIndent={arrowIndent}\r\n            rowHeight={rowHeight}\r\n            svgContainerHeight={svgContainerHeight}\r\n            svgContainerWidth={svgContainerWidth}\r\n            fontFamily={fontFamily}\r\n            fontSize={fontSize}\r\n            scrollX={scrollX}\r\n            scrollY={scrollY}\r\n            task={ganttEvent.changedTask}\r\n            headerHeight={headerHeight}\r\n            taskListWidth={taskListWidth}\r\n            TooltipContent={TooltipContent}\r\n            rtl={rtl}\r\n            svgWidth={svgWidth}\r\n          />\r\n        )}\r\n        <VerticalScroll\r\n          ganttFullHeight={ganttFullHeight}\r\n          ganttHeight={ganttHeight}\r\n          headerHeight={headerHeight}\r\n          scroll={scrollY}\r\n          onScroll={handleScrollY}\r\n          rtl={rtl}\r\n        />\r\n      </div>\r\n      <HorizontalScroll\r\n        svgWidth={svgWidth}\r\n        taskListWidth={taskListWidth}\r\n        scroll={scrollX}\r\n        rtl={rtl}\r\n        onScroll={handleScrollX}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport \"gantt-task-react/dist/index.css\";\r\nimport { ViewMode } from \"gantt-task-react\";\r\ntype ViewSwitcherProps = {\r\n  isChecked: boolean;\r\n  onViewListChange: (isChecked: boolean) => void;\r\n  onViewModeChange: (viewMode: ViewMode) => void;\r\n};\r\nexport const ViewSwitcher: React.SFC<ViewSwitcherProps> = ({\r\n  onViewModeChange,\r\n  onViewListChange,\r\n  isChecked,\r\n}) => {\r\n  return (\r\n    <div className=\"ViewContainer\">\r\n      <button\r\n        className=\"Button\"\r\n        onClick={() => onViewModeChange(ViewMode.QuarterDay)}\r\n      >\r\n        Quarter of Day\r\n      </button>\r\n      <button\r\n        className=\"Button\"\r\n        onClick={() => onViewModeChange(ViewMode.HalfDay)}\r\n      >\r\n        Half of Day\r\n      </button>\r\n      <button className=\"Button\" onClick={() => onViewModeChange(ViewMode.Day)}>\r\n        Day\r\n      </button>\r\n      <button\r\n        className=\"Button\"\r\n        onClick={() => onViewModeChange(ViewMode.Week)}\r\n      >\r\n        Week\r\n      </button>\r\n      <button\r\n        className=\"Button\"\r\n        onClick={() => onViewModeChange(ViewMode.Month)}\r\n      >\r\n        Month\r\n      </button>\r\n\r\n      <div className=\"Switch\">\r\n        <label className=\"Switch_Toggle\">\r\n          <input\r\n            type=\"checkbox\"\r\n            defaultChecked={isChecked}\r\n            onClick={() => onViewListChange(!isChecked)}\r\n          />\r\n          <span className=\"Slider\" />\r\n        </label>\r\n        Show Task List\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Task, ViewMode, Gantt } from \"gantt-task-react\";\r\nimport { ViewSwitcher } from \"./components/view-switcher\";\r\nimport { getStartEndDateForProject, initTasks } from \"./helper\";\r\nimport \"gantt-task-react/dist/index.css\";\r\n\r\n//Init\r\nconst App = () => {\r\n  const [view, setView] = React.useState<ViewMode>(ViewMode.Day);\r\n  const [tasks, setTasks] = React.useState<Task[]>(initTasks());\r\n  const [isChecked, setIsChecked] = React.useState(true);\r\n  let columnWidth = 60;\r\n  if (view === ViewMode.Month) {\r\n    columnWidth = 300;\r\n  } else if (view === ViewMode.Week) {\r\n    columnWidth = 250;\r\n  }\r\n\r\n  const handleTaskChange = (task: Task) => {\r\n    console.log(\"On date change Id:\" + task.id);\r\n    let newTasks = tasks.map(t => (t.id === task.id ? task : t));\r\n    if (task.project) {\r\n      const [start, end] = getStartEndDateForProject(newTasks, task.project);\r\n      const project = newTasks[newTasks.findIndex(t => t.id === task.project)];\r\n      if (\r\n        project.start.getTime() !== start.getTime() ||\r\n        project.end.getTime() !== end.getTime()\r\n      ) {\r\n        const changedProject = { ...project, start, end };\r\n        newTasks = newTasks.map(t =>\r\n          t.id === task.project ? changedProject : t\r\n        );\r\n      }\r\n    }\r\n    setTasks(newTasks);\r\n  };\r\n\r\n  const handleTaskDelete = (task: Task) => {\r\n    const conf = window.confirm(\"Are you sure about \" + task.name + \" ?\");\r\n    if (conf) {\r\n      setTasks(tasks.filter(t => t.id !== task.id));\r\n    }\r\n    return conf;\r\n  };\r\n\r\n  const handleProgressChange = async (task: Task) => {\r\n    setTasks(tasks.map(t => (t.id === task.id ? task : t)));\r\n    console.log(\"On progress change Id:\" + task.id);\r\n  };\r\n\r\n  const handleDblClick = (task: Task) => {\r\n    alert(\"On Double Click event Id:\" + task.id);\r\n  };\r\n\r\n  const handleSelect = (task: Task, isSelected: boolean) => {\r\n    console.log(task.name + \" has \" + (isSelected ? \"selected\" : \"unselected\"));\r\n  };\r\n\r\n  const handleExpanderClick = (task: Task) => {\r\n    setTasks(tasks.map(t => (t.id === task.id ? task : t)));\r\n    console.log(\"On expander click Id:\" + task.id);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <ViewSwitcher\r\n        onViewModeChange={viewMode => setView(viewMode)}\r\n        onViewListChange={setIsChecked}\r\n        isChecked={isChecked}\r\n      />\r\n      <h3>Gantt With Unlimited Height</h3>\r\n      <Gantt\r\n        tasks={tasks}\r\n        viewMode={view}\r\n        onDateChange={handleTaskChange}\r\n        onDelete={handleTaskDelete}\r\n        onProgressChange={handleProgressChange}\r\n        onDoubleClick={handleDblClick}\r\n        onSelect={handleSelect}\r\n        onExpanderClick={handleExpanderClick}\r\n        listCellWidth={isChecked ? \"155px\" : \"\"}\r\n        columnWidth={columnWidth}\r\n      />\r\n      <h3>Gantt With Limited Height</h3>\r\n      <Gantt\r\n        tasks={tasks}\r\n        viewMode={view}\r\n        onDateChange={handleTaskChange}\r\n        onDelete={handleTaskDelete}\r\n        onProgressChange={handleProgressChange}\r\n        onDoubleClick={handleDblClick}\r\n        onSelect={handleSelect}\r\n        onExpanderClick={handleExpanderClick}\r\n        listCellWidth={isChecked ? \"155px\" : \"\"}\r\n        ganttHeight={300}\r\n        columnWidth={columnWidth}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { Task } from \"../../dist/types/public-types\";\r\n\r\nexport function initTasks() {\r\n  const currentDate = new Date();\r\n  const tasks: Task[] = [\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 1),\r\n      end: new Date(currentDate.getFullYear(), currentDate.getMonth(), 15),\r\n      name: \"Some Project\",\r\n      id: \"ProjectSample\",\r\n      progress: 25,\r\n      type: \"project\",\r\n    },\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 1),\r\n      end: new Date(\r\n        currentDate.getFullYear(),\r\n        currentDate.getMonth(),\r\n        2,\r\n        12,\r\n        28\r\n      ),\r\n      name: \"Idea\",\r\n      id: \"Task 0\",\r\n      progress: 45,\r\n      type: \"task\",\r\n      project: \"ProjectSample\",\r\n    },\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 2),\r\n      end: new Date(currentDate.getFullYear(), currentDate.getMonth(), 4, 0, 0),\r\n      name: \"Research\",\r\n      id: \"Task 1\",\r\n      progress: 25,\r\n      dependencies: [\"Task 0\"],\r\n      type: \"task\",\r\n      project: \"ProjectSample\",\r\n    },\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 4),\r\n      end: new Date(currentDate.getFullYear(), currentDate.getMonth(), 8, 0, 0),\r\n      name: \"Discussion with team\",\r\n      id: \"Task 2\",\r\n      progress: 10,\r\n      dependencies: [\"Task 1\"],\r\n      type: \"task\",\r\n      project: \"ProjectSample\",\r\n    },\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 8),\r\n      end: new Date(currentDate.getFullYear(), currentDate.getMonth(), 9, 0, 0),\r\n      name: \"Developing\",\r\n      id: \"Task 3\",\r\n      progress: 2,\r\n      dependencies: [\"Task 2\"],\r\n      type: \"task\",\r\n      project: \"ProjectSample\",\r\n    },\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 8),\r\n      end: new Date(currentDate.getFullYear(), currentDate.getMonth(), 10),\r\n      name: \"Review\",\r\n      id: \"Task 4\",\r\n      type: \"task\",\r\n      progress: 70,\r\n      dependencies: [\"Task 2\"],\r\n      project: \"ProjectSample\",\r\n    },\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 15),\r\n      end: new Date(currentDate.getFullYear(), currentDate.getMonth(), 15),\r\n      name: \"Release\",\r\n      id: \"Task 6\",\r\n      progress: currentDate.getMonth(),\r\n      type: \"milestone\",\r\n      dependencies: [\"Task 4\"],\r\n      project: \"ProjectSample\",\r\n    },\r\n    {\r\n      start: new Date(currentDate.getFullYear(), currentDate.getMonth(), 18),\r\n      end: new Date(currentDate.getFullYear(), currentDate.getMonth(), 19),\r\n      name: \"Party Time\",\r\n      id: \"Task 9\",\r\n      progress: 0,\r\n      isDisabled: true,\r\n      type: \"task\",\r\n    },\r\n  ];\r\n  return tasks;\r\n}\r\n\r\nexport function getStartEndDateForProject(tasks: Task[], projectId: string) {\r\n  const projectTasks = tasks.filter(t => t.project === projectId);\r\n  let start = projectTasks[0].start;\r\n  let end = projectTasks[0].end;\r\n\r\n  for (let i = 0; i < projectTasks.length; i++) {\r\n    const task = projectTasks[i];\r\n    if (start.getTime() > task.start.getTime()) {\r\n      start = task.start;\r\n    }\r\n    if (end.getTime() < task.end.getTime()) {\r\n      end = task.end;\r\n    }\r\n  }\r\n  return [start, end];\r\n}\r\n","import './index.css'\n\nimport React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))\n"],"sourceRoot":""}